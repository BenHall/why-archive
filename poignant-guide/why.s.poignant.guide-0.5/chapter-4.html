<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Why's (Poignant) Guide to Ruby :: 4. Floating Little Leaves of Code</title>
    <link rel="stylesheet" type="text/css" href="guide.css" />
</head>
<body>

<div id="banner">
   <div class="pager">
   &lt; <a class="pagebar" href="chapter-3.html">prev</a> | <a class="pagebar" href="chapter-5.html">next</a> &gt;
   </div>
   <div class="title">
   <h3>why's <span class="hilite">(poignant)</span> guide to ruby</h3>
   &nbsp;<a class="pagebar" href="http://whytheluckystiff.net/"><b>whytheluckystiff.net</b></a> &gt; <a class="pagebar" href="index.html">Contents</a>
   </div>
</div>
<div align="center">
<div class="page">
    <div class="pageTitle">
        <h3>4.</h3>
        <h1>Floating Little Leaves of Code</h1>
        <p><img src="i/chapter.poignant.guide-4.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    

        <p><img src="i/the.elf-1.gif" title="Impossibly deep in the caverns of Ambrose... the Elf with a pet ham!" alt="Impossibly deep in the caverns of Ambrose... the Elf with a pet ham!" /><br />
<img src="i/the.elf-2.gif" title="...and the cat Trady Blix." alt="...and the cat Trady Blix." /></p>

	<p>I&#8217;ve never seen the ham do anything but leak juice.  Today, our business in Ambrose Caverns is with the elf.  He is a crucial part of the next lessons. Let&#8217;s all make him feel welcome. Go start warming up your listening hats!   (And please change out of those ridiculous stirrup pants.)</p>

	<p>A prompt warning: this lesson is much slower.  Stay with it.  This will be a long, deep breath. The most crucial stage of your instruction.  It may seem like you&#8217;re not learning much code at first.  You will be learning concepts.  By the end of this chapter, you will know Ruby&#8217;s beauty.  The coziness of the code will become a down sleeping bag for your own solace.<br />
</p>

    
    
        
        <a name="section1" />
        <h2>1. The Leaf as a Status Symbol in Ambrose</h2>

        <p>Alright, Elf.  Give us a quick rundown of the currency issues you&#8217;ve faced there in your kingdom.</p>

	<p><img src="i/the.elf-3.gif" title="Blue Crystals got the shaft." alt="Blue Crystals got the shaft." /></p>

	<p>Yeah, that&#8217;s not the way I remember it.  This Elf was paging me constantly.  When I refused to call him back, he somehow left a message on my pager.  Meaning: it beeped a couple times and then printed out a small slip of paper.  The slip said something to the effect of, &#8220;Get down here quick!&#8221; and also, &#8220;We&#8217;ve got to rid the earth of this scourge of enterpreneurial caterpillars, these twisted insect vikings are suffocating my blue crystals!&#8221; </p>

	<p>Lately, the exchange rate has settled down between leaves and crystals.  One treegrown note is worth five crystals.  So the basic money situation looks like this:</p>

<pre>
  blue_crystal = 1
  leaf_tender = 5
</pre>

	<p>This example is, like, <em>totally</em> last chapter.  Still.  It&#8217;s a start.  We&#8217;re setting two <em>variables</em>. The <strong>equals sign</strong> is used for <em>assignment</em>.</p>

	<p>Now <code>leaf_tender</code> represents the number <code>5</code> (as in: five blue crystals.)  This concept right here is <strong>half of Ruby</strong>.  We&#8217;re <em>defining</em>.  We&#8217;re <em>creating</em>.  This is half of the work.   Assignment is the most basic form of defining.</p>

	<p>You can&#8217;t complain though, can you Elf?  You&#8217;ve built an empire from cashing your blue crystals into the new free market among the forest creatures.  (And even though he&#8217;s an elf to us, he&#8217;s a tall monster to them.)</p>

	<p><img src="i/the.elf-4.jpg" title="Animal Perfect, LLC" alt="Animal Perfect, LLC" /><br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>The Scarf Eaters</h2>
        

        <p>I hate to intrude upon your instruction, but I&#8217;ve already walked all over it enough to  warrant some further disregard.  Can I go over my next project with you?</p>

	<p>I&#8217;ve pledged to write another book.  (<em>Trombones</em>.)  The good news is that I won&#8217;t actually be writing any of it.  You won&#8217;t have to endure any more of this inane blathering.</p>

	<p>It&#8217;s over between me and words.  I&#8217;d love to stick around and exploit them each, one after another, but it&#8217;s all becoming quite predictable, wouldn&#8217;t you say?  Eventually, they will all be used and I&#8217;d have to come up with fake words and that would be way too cnoofy.</p>

	<p>Now.  The deal isn&#8217;t cut yet, but I&#8217;m in negotiations with Anna Quindlen to do my ghost writing. We&#8217;re tag-teaming on a book that&#8217;s going to blow the (Poignant) Guide right out of your hands.  To put it bluntly, the Guide will be worthless.  You won&#8217;t be able to pile enough  pomegranates on top of the thing.</p>

	<p>So this new book.  The Scarf Eaters.  It&#8217;s a coming-of-age novel.  But it&#8217;s also a beginner&#8217;s guide to Macromedia Flash.  It&#8217;s like Judy Blume crossed Praystation.  It&#8217;s like 0sil8 starring Hillary Duff.</p>

	<p>I don&#8217;t want to give away the plot at all, but to tug your appetite I&#8217;ll just say this: one kid talks to his dead brother in ActionScript.  More to come.<br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>Nonono.  Hang on a sec.  You&#8217;re not ready for what the Elf here is doing in his caves. You&#8217;ll think it&#8217;s all positively inhumane, naughty, sick, tweeested, yada yada.</p>

	<h3> Now You&#8217;re Going to Hear the Animal Perfect Mission Statement Because This Is A Book And We Have Time And No Rush, Right?</h3>

	<p>Back, back, way back before speedboats, I owned a prize race horse who took a stumble on  the track.  She did ten front flips and crashed into a guy who was carrying a full jar  of mayonnaisse.  We had blood and mayonnaisse up and down the track.  Needless to say,  she was a disaster.</p>

	<p>The vet took one look at her and swore she&#8217;d never walk again.  Her legs were gone and the vet wouldn&#8217;t allow a legless horse to just sit around.  We&#8217;d need to put her down.   He swore his life and career on it, insisting we divide into two parallel lines.  The people  who could not refute the doctor&#8217;s claims on one side; those too stubborn to accept his  infallable medical reasoning on the other.  The Elf, his pet ham, and I were the only  ones in that second line.</p>

	<p>So while the others heaped up trophies and great wreaths around the horse, bidding it a  fond farewell before the bullet came to take him home, the Elf and I frantically pawed the Internet for  answers.  We took matter into our own hands, cauterizing her leg wounds with live crawdads.   It worked great!  We now had a horse again.   Or at least: a horse body with a crustaceous abdominal frosting.  </p>

	<p>She scurried everywhere after that and lived for years in pleasantly moist underground cavities.</p>

	<p>Animal Perfect is now the future of animal enhancement.  They build new animals and salvage  old-style animals for parts.  Of course, they&#8217;ve come a long ways. When Animal Perfect started, you&#8217;d see a full-grown bear walk into Animal Perfect and you&#8217;d see a full-grown bear with sunglasses walk out.  Completely cheesy.</p>

	<p>Stick around and you&#8217;ll see a crab with <em>his own jet pack</em>.  That&#8217;s a new 2004 model jetcrab.</p>

	<p>But now, the whole operation is up and running.  And the cleanliness of the place is astonishing. All the equipment is so shiny.  Everything is in chrome.  Oh, and all the staff have concealed weapons.  They&#8217;re trained to kill anyone who enters unannounced.  Or, if they run out of bullets, they&#8217;re trained to pistol whip anyone who enters unannounced.</p>

	<p>Elf, make me a starmonkey.</p>

	<p><img src="i/the.elf-5a.jpg" title="First, the star is caught." alt="First, the star is caught." /></p>

	<p>Some imaginary Ruby for you:</p>

	<blockquote>
		<p><code>pipe.catch_a_star</code></p>
	</blockquote>

	<p>Variable <code>pipe</code>.  Method <code>catch_a_star</code>.  A lot of Rubyists like to think of methods as a message. Whatever comes before the dot is handed the message.  The above code tells the <code>pipe</code> to <code>catch_a_star</code>.</p>

	<p>This is the <strong>second half</strong> of Ruby.  Putting things in motion.  These things you define and create in the first half start to <em>act</em> in the second half.</p>

	<ol>
	<li>Defining things.</li>
		<li>Putting those things into action.</li>
	</ol>

	<p>So what if the star catching code works?  Where does the star go?</p>

	<blockquote>
		<p><code>captive_star = pipe.catch_a_star</code></p>
	</blockquote>

	<p>See, it&#8217;s up to you to collect the miserable, little star.  If you don&#8217;t, it&#8217;ll simply vanish. Whenever you use a method, you&#8217;ll always be given something back.  You can ignore it or use it.</p>

	<p><em>If you can learn to use the answers that methods give you back, then you will <strong>dominate</strong>.</em></p>

	<p><img src="i/the.elf-5b.jpg" title="Star is ratcheted to the monkey's face." alt="Star is ratcheted to the monkey's face." /></p>

	<p>Quickly then.</p>

	<blockquote>
		<p><code>starmonkey = ratchet.attach( captive_monkey, captive_star )</code></p>
	</blockquote>

	<p>The <code>ratchet</code> gets an <code>attach</code> message.  What needs to be attached?  The <em>method arguments</em>: the <code>captive_monkey</code> and the <code>captive_star</code>.  We are given back a <code>starmonkey</code>, which we have decided to hang on to.</p>

	<p><img src="i/the.elf-5c.gif" title="Frog on the hand." alt="Frog on the hand." /></p>

	<p>This is turning out to be such a short, little proggie that I&#8217;m just going to put it all together as one statement.</p>

	<blockquote>
		<p><code>starmonkey = ratchet.attach( captive_monkey, pipe.catch_a_star ) + deco_hand_frog</code></p>
	</blockquote>

	<p>See how <code>pipe.catch_a_star</code> is right in the arguments for the method?  The caught  star will get passed right to the ratchet.  No need to find a place to put it.  Just let it go.</p>

    
    
        
        <a name="section2" />
        <h2>2. Small and Nearly Worthless</h2>

        <p><img src="i/blix-1.gif" title="Law-va." alt="Law-va." /></p>

	<p>The hotel here in Ambrose is no good at all.  The beds are all lumpy. The elevator is tiny.  One guy put all his bags in the elevator and found out there wasn&#8217;t room for him.  He hit the button and chased up the stairs after it all.  But the stairwell turned out to be too narrow and his shoulders got wedged going up.  </p>

	<p>The soap mini-bars they give you are sized down for elves, so it&#8217;s impossible to work up a lather.  I hate it.  I keep mistaking them for contact lenses.</p>

	<p>I turned on the faucet and nothing came out.  Thing is: Ambrose is a place with magical properties, so I took a chance.  I put my hands under the spigot.  Invisible, warm wetness.  I felt the hurried sensation of running water, darting through my fingers.  When I took my hands away, they were dry and clean.</p>

	<p>It was an amazing nothingness to experience.  It was just like <code>nil</code>.</p>

	<h3>Nil</h3>

	<p>In Ruby, <code>nil</code> represents an emptiness.  It is <strong>without value</strong>.  It isn&#8217;t zero. Zero is a number.  </p>

	<p>It&#8217;s Ruby&#8217;s own walking dead, a flatlined keyword.  You can&#8217;t add to it, it doesn&#8217;t evolve.  But it&#8217;s terribly popular.  This skeleton&#8217;s smiling in all the pictures.</p>

	<blockquote>
		<p><code>plastic_cup = nil</code></p>
	</blockquote>

	<p>The above <code>plastic_cup</code> is <strong>empty</strong>.  You could argue that the <code>plastic_cup</code> contains something, a <code>nil</code>.  The <code>nil</code> represents the emptiness, though, so go ahead and call it empty.</p>

	<p>Some of you who have programmed before will be tempted to say the <code>plastic_cup</code> is <strong>undefined</strong>.  How about let&#8217;s not.  When you say a variable is undefined, you&#8217;re saying that Ruby simply has no recollection of the variable, it doesn&#8217;t know the var, it&#8217;s absolutely non-existent.</p>

	<p>But Ruby is aware of the <code>plastic_cup</code>.  Ruby can easily look in the <code>plastic_cup</code>. It&#8217;s <strong>empty</strong>, but not <strong>undefined</strong>.</p>

	<h3>False</h3>

	<p><img src="i/blix-neg.gif" align="left" title="Shape of a cat." alt="Shape of a cat." /></p>

	<p><em>The cat Trady Blix.  Frozen in emptiness.  Immaculate whiskers rigid.  Placid eyes of lake.  Tail of warm icicle.  Sponsored by a Very Powerful Pause Button.</em></p>

	<p>The darkness surrounding Blix can be called <strong>negative space</strong>.  Hang on to that phrase. Let it suggest that the emptiness has a negative connotation.  In a similar way, <code>nil</code> has a slightly sour note that it whistles.</p>

	<p>Generally speaking, <strong>everything in Ruby has a positive charge to it</strong>.  This spark flows through strings, numbers, regexps, all of it.  Only two keywords wear a shady cloak: <code>nil</code> and <code>false</code> draggin us down.</p>

	<p>You can <strong>test that charge</strong> with an <code>if</code> keyword.  It looks very much like the <code>do</code> blocks we saw in the last chapter, in that both end with an <code>end</code>.</p>

<pre>
  if plastic_cup
    print "Plastic cup is on the up 'n' up!" 
  end
</pre>

	<p>If <code>plastic_cup</code> contains either <code>nil</code> or <code>false</code>, you won&#8217;t see anything print to the screen.  They&#8217;re not on the <code>if</code> guest list.  So <code>if</code> isn&#8217;t going to run any of the code it&#8217;s protecting.</p>

	<p>But <code>nil</code> and <code>false</code> need not walk away in shame.  They may be of questionable character, but <code>unless</code> runs a smaller establishment that caters to the bedraggled. The <code>unless</code> keyword has a policy of <strong>only allowing those with a negative charge in</strong>. Who are: <code>nil</code> and <code>false</code>.</p>

<pre>
  unless plastic_cup
    print "Plastic cup is on the down low." 
  end
</pre>

	<p>You can also use <code>if</code> and <code>unless</code> at the <strong>end of a single line of code</strong>, if that&#8217;s all that is being protected.</p>

<pre>
  print "Yeah, plastic cup is up again!" if plastic_cup
  print "Hardly. It's down." unless plastic_cup
</pre>

	<p>And another nice trick: stack the <code>if</code> and <code>unless</code>.</p>

<pre>
  print "We're using plastic 'cause we don't have glass." if plastic_cup unless glass_cup
</pre>

	<p>This trick is a gorgeous way of expressing, <em>Do this only if <strong>a</strong> is true and <strong>b</strong> isn&#8217;t true</em>.</p>

	<p>Now that you&#8217;ve met <code>false</code>, I&#8217;m sure you can see what&#8217;s on next.<br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Make Your Own Starmonkey!</h2>
        

        <p>1.  Turn a mug upside-down.<br />
<img src="i/starmonkeycrafts-1.jpg" alt="" /><br />
2. Attach an apple with a rubber band.<br />
<img src="i/starmonkeycrafts-2.jpg" alt="" /><br />
3. Shove car keys into the sides of the apple.<br />
<img src="i/starmonkeycrafts-3.jpg" alt="" /><br />
4. Glue star face.<br />
<img src="i/starmonkeycrafts-4.jpg" alt="" /></p>

	<p>You have two complementary star faces waiting in your account.</p>

	<p style="text-align:center;"><img src="i/starmonkeycrafts-5.gif" alt="" /><br />
Standard, placid.</p>

	<p style="text-align:center;"><img src="i/starmonkeycrafts-6.gif" alt="" /><br />
Eating chalk.<br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <h3>True</h3>

	<blockquote>
		<p><code>approaching_guy = true</code></p>
	</blockquote>

	<p>I saw <code>true</code> at the hotel buffet tables today.  I cannot stand that guy. His stance is way too wide.  And you&#8217;ve never met anyone who planted his feet so hard in the ground.  He wears this corny necklace made out of shells.  His face exudes this brash confidence.  (You can tell he&#8217;s exerting all of his restraint just to keep from bursting into Neo flight.)</p>

	<p>To be honest, I can&#8217;t be around someone who always has to be right. This <code>true</code> is always saying, &#8220;A-OK.&#8221;  Flashing hang ten.  And seriously,  he loves that necklace.  Wears it constantly.</p>

	<p>As you&#8217;d suspect, he&#8217;s backstage at everything on the <code>if</code> event schedule.</p>

	<blockquote>
		<p><code>print "Hugo Boss" if true</code> acts like <code>print "Hugo Boss"</code>.</p>
	</blockquote>

	<p>Occassionally, <code>if</code> will haul out the velvet ropes to exercise some crowd control.   The <strong>double equals</strong> gives the appearance of a short link of ropes, right along the sides of a red carpet where only <code>true</code> can be admitted.</p>

<pre>
  if approaching_guy == true
    print "That necklace is classic." 
  end
</pre>

	<p>The double equals is simply <strong>an ID check</strong>.  Do the gentleman at both ends of this rope appear to match?</p>

	<p>In this way, you control who <code>if</code> lets in.  If you have a hard time getting along with <code>true</code> as I do, you can heartily welcome <code>false</code>.</p>

<pre>
  if approaching_guy == false
    print "Get in here, you conniving devil." 
  end
</pre>

	<p>Same goes for <code>unless</code>.  The gateway is yours.  Take possession of it.</p>

	<h3>Again, I Want You to Dominate</h3>

	<p>Now, you want a head trip?  <strong>The double equals sign is a method.</strong>  Can you guess how it works?  Here, check it out with the dot and parens:</p>

	<blockquote>
		<p><code>approaching_guy.==( true )</code></p>
	</blockquote>

	<p>Ruby allows the shortcut, though.  You can drop the dot and back away slowly.</p>

	<p>Now, do you remember what you need to do to <strong>dominate</strong> in Ruby?  <em>Use the answers the methods give you.</em></p>

<pre>
  if nil.==( true )
    print "This will never see realization." 
  end
</pre>

	<p>In the above, how is the method&#8217;s answer being used?</p>

	<p>Let&#8217;s take the statement <code>nil == true</code>.  This will fail every time.  No match.   When there&#8217;s no match, the double equals method answers with <code>false</code>.  A shake of the head. That answer is given to <code>if</code>, who can&#8217;t accept a <code>false</code>.  The <code>print</code> never sees realization.</p>

<pre>
  at_hotel = true
  email = if at_hotel
            "why@hotelambrose.com" 
          else
            "why@drnhowardcham.com" 
          end
</pre>

	<p>Even though <code>if</code> isn&#8217;t a method, <code>if</code> does give a return answer.  Look at the above and wonder over what happens when <code>at_hotel</code> is <code>true</code>.</p>

	<p>The <code>if</code> will return the answer given by the code it chooses to run.  In the case of  <code>at_hotel</code> being true, the first string, my e-mail address at Hotel Ambrose, will be returned.  The <code>else</code> keyword marks code which will run, should <code>if</code> fail.  If <code>at_hotel</code> is false, the <code>if</code> will answer with my e-mail address at Dr. N. Howard Clay&#8217;s office,  where I take my apprenticeship.</p>

	<p>Should you have several lines of code in an <code>if</code> or <code>unless</code>, <strong>only the answer from the last full statement will be used</strong>.</p>

<pre>
   email = if at_hotel
             address = "why" 
             address &lt;&lt; "@hotelambrose" 
             address &lt;&lt; ".com" 
           end
</pre>

	<p>Three lines of code inside the <code>if</code>.  The first line assigns a string with my name in it to a variable. The second and third lines add the rest of my e-mail address on to the end.  The <strong>double less-than <code>&lt;&lt;</code> is the concatenation operator</strong>.  To concatenate is to <strong>append</strong>, or <strong>add to the end</strong>.</p>

	<p>Just as we saw with the equality checker <code>==</code>, the concatenator is a method.  After adding to the end of the string, the concatenator also <strong>answers with that very string</strong>.  So, the third line, which could be read as <code>address.&lt;&lt;( ".com" )</code>, gives back <code>address</code>, which the <code>if</code> then hands back for <code>email</code>&#8217;s assignment.</p>

	<p>Here&#8217;s a question: what if the <code>if</code> fails?  What if <code>at_hotel</code> is false in the above example? Is anything returned?  Nothing is assigned to <code>email</code>, right?</p>

	<p>Yes, nothing is returned.  By which I mean: <code>nil</code> is returned.  And often <code>nil</code> is a very useful answer.</p>

<pre>
  print( if at_hotel.nil?
           "No clue if he's in the hotel." 
         elsif at_hotel == true
           "Definitely in." 
         elsif at_hotel == false
           "He's out." 
         else
           "The system is on the freee-itz." 
         end )
</pre>

	<p>You can use the <code>nil?</code> method on any value in Ruby.  Again, think of it as a message. To the value: &#8220;Are you nil?  Are you empty?&#8221; </p>

	<p>If <code>at_hotel</code> is empty, Ruby doesn&#8217;t have any idea if I&#8217;m in the hotel or not.  So <code>if</code> answers with the &#8220;No clue&#8221; string.  In order to handle the <code>true</code> or <code>false</code> possibilities, the <code>elsif</code> keyword is used.  While you can have only one <code>if</code> and one <code>else</code>, you can fill the inbetween with an exorbitant number of <code>elsif</code> keywords.  Each <code>elsif</code> acts as <strong>a further <code>if</code> test</strong>.  Checking for a positive charge.</p>

	<p>If you&#8217;re doing okay at this point, then you&#8217;re in tip-top shape for the rest of the book.  You have seen some pretty tough code in the last few examples.  You strong fellow.<br />
</p>

    
    
        
        <a name="section3" />
        <h2>3. Chaining Delusions Together</h2>

        <p><img src="i/the.elf-6.jpg" title="55,000 starmonkeys and one spirited Olympic hopeful." alt="55,000 starmonkeys and one spirited Olympic hopeful." /></p>

	<p>You finish reading the above comic and retire to your daybed for reflection. It&#8217;s one of those canopy affairs which is always logjammed with pillows.  You sit atop the pile, gazing out upon the world.  You see the tall smokestacks belching wide spools of fume and haze.  The tangled concourses of freeways smattered with swift, shimmering traffic is but a gently pulsing eye muscle from your vantage point.</p>

	<p>It is all so fantastic.  How the colors of the horizon spread across the landscape as a great mix of butter and grease with a tablespoon of vanilla extract.</p>

	<p>Yet, for all of the beauty which beckons for your attention, the images of the Elf and  his Olympic Hopeful return.  And more especially, that order for <strong>55,000</strong> starmonkeys.   <em>55,000 starmonkeys</em>, you think.  <em>Fifty-five Thousand</em>.</p>

	<p>You think of just the number itself.  <em>55,000</em>.  It&#8217;s walking down a road.  It might be in a forest, you don&#8217;t know for sure as your eyes are fixed right on the number itself.  It&#8217;s stopping and talking to people.  To tennis players, to a men&#8217;s choral group.  There is merriment and good  feeling.  When it laughs, its lower zeros quiver with glee.</p>

	<p>You want to talk to it.  You want to skip along that forest trail with it.  You want to climb aboard a jet bound to Brazil with it.  And after five days and four nights at the leisureful Costa do Sauipe Marriott Resort &#38; Spa, to marry it, to bear a family of 55,000 starmonkeys with it. To take possession of Nigeria with it.</p>

	<p>With a flying leap, you dismount your pillow tower of isolation.  Scrambling with the key, you unlock your roll top desk and pull out a sheet of paper, holding it firmly upon the desk.  You begin scribbling.</p>

	<blockquote>
		<p><em>Take possession of Nigeria with my new 55,000 starmonkeys</em>... <br />
<em>Over it, build Nigeria-sized <strong>vegetarians only</strong> casino and go-cart arena</em>...<br />
<em>Wings&#8230; we could have our own special sauce on the wings that&#8217;s different</em>...<br />
<em>Mustard + codeine = Smotchkkiss&#8217; Starry Starmonkey Glow Sauce</em>...<br />
<em>Franchise, franchise&#8230; logos</em>... <br />
<em>Employee instructional videos</em>... <br />
<em>When you give the customer change, let them reach inside the frog on your hand to get it</em>...  <br />
<em>If they have no change, at least put their reciept some place where they have to touch the frog</em>...  <br />
<em>We&#8217;re leveling the playing field here</em>...<br />
<em>Advertise cheap pizza, let&#8217;s make our money off soda</em>...<br />
<em>Collect all 4 frosted glasses</em>...</p>
	</blockquote>

	<p>Wow, the ideas are really coming out.  You literally had to smack yourself to stop.  We need to put these in a safe place.  Actually, we should store them on your computer and mangle the words.  You look out the window and watch for <span class="caps">FBI</span>.  I&#8217;m going to start this script.</p>

	<h3>The Flipping Script</h3>

<pre>
  print "Type and be diabolical: " 
  idea_backwards = gets.reverse
</pre>

	<p>Let this script be your confidante.  It will ask for evil plans and turn their letters backwards. The <code>gets</code> method is <strong>built into Ruby</strong>.  It&#8217;s a <strong>kernel method</strong> like <code>print</code>.  This method <code>gets</code> will pause Ruby to let you type.  When you hit <em>Enter</em>, <code>gets</code> will then stop paying attention to your keyboard punchings and answer back to Ruby with a string that contains everything you typed.<br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Get Ahead with The Tiger's Vest</h2>
        

        <p><a href="expansion-pak-1.html"><img src="i/ad-tiger.gif" alt="" border="0" /></a></p>

	<p>Want to start using Ruby alongside your reading?  Split your attention and head off to <a href="expansion-pak-1.html">Expansion Pak I: The Tiger&#8217;s Vest</a>, a trite mini-chapter which will aid you in installing Ruby.  In addition, you&#8217;ll learn how to use Irb and Ri, two teaching aids that come with Ruby which will really speed you up in your learning.<br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>The <code>reverse</code> method is then used on the string that <code>gets</code> is giving back.  The <code>reverse</code> method is part of the <code>String</code> class.  Which means that <strong>anything which is a string has the <code>reverse</code> method available</strong>.  More on classes in the next chapter, for now just know that <strong>a lot of methods are only available with certain types of values</strong>.</p>

	<p>I don&#8217;t think <code>reverse</code> is going to cut it.  The authorities only need to put a mirror to &#8220;airegiN fo noissessop ekaT.&#8221;  Bust us when starmonkeys start to touch down in Lagos.</p>

	<p>The capital letters give it away.  Maybe if we uppercase all letters in the string before we reverse it.</p>

<pre>
  idea_backwards = gets.upcase.reverse
</pre>

	<h3>Your Repetitiveness Pays Off</h3>

	<p>You hand me a legal pad, doused in illegible shorthand.  Scanning over it, I start to notice patterns.  That you seem to use the same set of words repeatedly in your musings.   Words like <em>starmonkey</em>, <em>Nigeria</em>, <em>firebomb</em>.  Some phrases even.  <em>Put the kabosh on.</em> That gets said a lot.</p>

	<p>Let us disguise these foul terms, my brother.  Let us obscure them from itching eyes that cry to know our delicate schemes and to thwart us from having great pleasure and many go-carts. We will replace them with the most innocent language.  New words with secret meaning.</p>

	<p>I start up a word list, a Ruby <code>Hash</code>, which contains these oft seen and dangerous words of yours. In the Hash, each dangerous word is matched up against a code word (or phrase).  The code word will be swapped in for the real word.</p>

<pre>
  code_words = {
    'starmonkeys' =&gt; 'Phil and Pete, those prickly chancellors of the New Reich', 
    'catapult' =&gt; 'chucky go-go', 'firebomb' =&gt; 'Heat-Assisted Living', 
    'Nigeria' =&gt; "Ny and Jerry's Dry Cleaning (with Donuts)",
    'Put the kabosh on' =&gt; 'Put the cable box on'
  }
</pre>

	<p>The words which are placed before the arrow are called <strong>keys</strong>.  The words after the arrows, the definitions, are often just called <strong>values</strong>.</p>

	<p>Notice the double quotes around <code>Ny and Jerry's Dry Cleaning (with Donuts)</code>.  Since a single quote is being used an apostrophe, we can&#8217;t use single quotes around the string.  (Although, you can use single quotes if you put a backslash before the apostrophe such as: <code>'Ny and Jerry\'s Dry Cleaning (with Donuts)'</code>.)</p>

	<p>Should you need to look up a specific word, you can do so by using the <strong>square brackets</strong> method.</p>

	<blockquote>
		<p><code>code_words['catapult']</code> will answer with the string <code>'chucky go-go'</code>.</p>
	</blockquote>

	<p>Look at the square brackets as if they are a wooden pallet the word is sitting upon. A forklift could slide its prongs into each side of the pallet and bring it down from a shelf back in the warehouse.  The word on the pallet is called the <em>index</em>. We are asking the forklift to find the index for us and bring back its corresponding value.</p>

	<p>If you&#8217;ve never been to a warehouse, you could also look at the brackets as handles. Imagine an industrious worker putting on his work gloves and hefting the index back to your custody.  If you&#8217;ve never used handles before, then I&#8217;m giving you about thirty seconds to find a handle and use it before I blow my lid.</p>

	<p>As with many of the other operators you&#8217;ve seen recently, the index brackets are simply a shortcut for a method.</p>

	<blockquote>
		<p><code>code_words.[]( 'catapult' )</code> will answer with the string <code>'chucky go-go'</code>.</p>
	</blockquote>

	<h3>Making the Swap</h3>

	<p>I went ahead and saved the Hash of code words to a file called <strong>wordlist.rb</strong>.</p>

<pre>
  require 'wordlist'

  # Get evil idea and swap in code words
  print "Enter your new idea: " 
  idea = gets
  code_words.each do |real, code| 
    idea.gsub!( real, code )
  end

  # Save the jibberish to a new file
  print "File encoded.  Please enter a name for this idea: " 
  idea_name = gets.strip
  File::open( "idea-" + idea_name + ".txt" ) do |f|
    f &lt;&lt; idea
  end
</pre>

	<p>Script starts by pulling in our word list.  Like <code>gets</code> and <code>print</code>, the <code>require</code> method is a kernel method, you can use it anywhere.  I give it the string <code>'wordlist'</code> and it will look for a file named <strong>wordlist.rb</strong>.</p>

	<p>After that, there are two sections.  I am marking these sections with comments, the lines that start with <strong>pound</strong> symbols.  Comments are <strong>ignored by Ruby</strong>, but are nice for jotting brief explanations.  </p>

	<p>As the comments tell us, the first section asks you for your evil idea and swaps in the new code words.  The second section saves the encoded idea into a new text file.</p>

<pre>
  code_words.each do |real, code| 
    idea.gsub!( real, code )
  end
</pre>

	<p>You see the <code>each</code> method?  The <code>each</code> method is all over in Ruby.   It&#8217;s available for Arrays, Hashes, even Strings.   Here, our <code>code_words</code> dictionary is kept in a Hash.  This <code>each</code> method will hurry through <strong>all the pairs of the Hash</strong>, one dangerous word matched with its code word, handing each pair to the <code>gsub!</code> method for the actual replacement.</p>

	<p>In Ruby, <code>gsub</code> is short for <em>global substitution</em>.  The method is used to search and replace. Here, we want to find all the occurences of a dangerous word and replace with its safe code word.  With <code>gsub</code>, you provide the <strong>word to find as the first argument</strong>, then the <strong>word to put in its place as the second argument</strong>.</p>

	<p>Why aren&#8217;t we hanging on to the answer from <code>gsub</code>?  Doesn&#8217;t <code>gsub</code> give us an answer back that we should keep?  You&#8217;d think the line would read:</p>

<pre>
  safe_idea = idea.gsub( real, code )
</pre>

	<p>Yes, with <code>gsub</code> we&#8217;d need to hang on to its answer.  We&#8217;re using a variation of <code>gsub</code> that is totally hyper.  Notice the <strong>exclamation mark</strong> on the <code>gsub!</code> used inside the <code>each</code> block.  The exclamation mark is a sign that <code>gsub!</code> is a bit of a zealot.  See, <code>gsub!</code> will go ahead and <strong>replace the words in <code>idea</code> directly</strong>.  When it&#8217;s done <code>idea</code> will contain the newly altered string and you won&#8217;t be able to find the old string.</p>

	<p>Call <code>gsub!</code> a <strong>destructive method</strong>.  It makes its changes to the value directly.  Whereas <code>gsub</code> will leave the value intact, answering back with a new string which contains the alterations. (Why must <code>gsub!</code> scream when he descends upon his prey?  Merciless assailant!)</p>

	<h3> Text Files of a Madman</h3>

	<p>Let us now save the encoded idea to a file.</p>

<pre>
  # Save the jibberish to a new file
  print "File encoded.  Please enter a name for this idea: " 
  idea_name = gets.strip
  File::open( 'idea-' + idea_name + '.txt', 'w' ) do |f|
    f &lt;&lt; idea
  end
</pre>

	<p>This section starts by asking you for a name by which the idea can be called.  This name is used to build a file name when we save the idea.</p>

	<p>The <code>strip</code> method is for strings.  This method <strong>trims spaces and blank lines</strong> from the <strong>beginning and end</strong> of the string.  This will remove the <em>Enter</em> at the end of the string you typed. But it&#8217;ll also handle spaces if you accidentally left any.</p>

	<p>After we have the idea&#8217;s name, we open a new, blank text file.  The file name is built by adding strings together.  If you typed in <code>'mustard-plus-codeine'</code>, then our math will be: <code>'idea-' + 'mustard-plus-codeine' + '.txt'</code>.  Ruby presses these into a single string. <code>'idea-mustard-plus-codeine.txt'</code> is the file.</p>

	<p>We&#8217;re using the class method <code>File::open</code> to create the new file.  Up until now, we&#8217;ve used several kernel methods to do our work.  We hand the <code>print</code> method a string and it prints the string on your screen.  One secret about kernel methods like <code>print</code>: they are actually <strong>class methods</strong>.</p>

	<blockquote>
		<p><code>Kernel::print( "55,000 Starmonkey Salute!" )</code></p>
	</blockquote>

	<p>What does this mean?  Why does it matter?  It means <code>Kernel</code> is the center of Ruby&#8217;s universe. Wherever you are in your script, <code>Kernel</code> is right beside you.  You don&#8217;t even need to spell <code>Kernel</code> out for Ruby.  Ruby knows to check <code>Kernel</code>.</p>

	<p>Most methods are more specialized than <code>print</code> or <code>gets</code>.  Take the <code>File::open</code> for example.  The creator of Ruby, Matz, has given us many different methods which which read, rename, or delete files.  They are all organized inside the <code>File</code> class.</p>

	<blockquote>
		<p><code>File::read( "idea-mustard-plus-codeine.txt" )</code> will answer back with a string containing all of the text from your idea file.</p>
	</blockquote>

	<blockquote>
		<p><code>File::rename( "old_file.txt", "new_file.txt" )</code> will rename <code>old_file.txt</code>.</p>
	</blockquote>

	<blockquote>
		<p><code>File::delete( "new_file.txt" )</code> will nuke the new file.</p>
	</blockquote>

	<p>These File methods are all <strong>built right into Ruby</strong>.  They are all just stored in a container called the <code>File</code> class.  So, while you can safely call kernel methods without needing to type <code>Kernel</code>, Ruby doesn&#8217;t automatically check the <code>File</code> class. You&#8217;ll need to give the full method name.</p>

<pre>
  File::open( 'idea-' + idea_name + '.txt', 'w' ) do |f|
    f &lt;&lt; idea
  end
</pre>

	<p>We pass two arguments into <code>File::open</code>.  The first is the <strong>file name to open</strong>.  The second is a string containing our <strong>file mode</strong>.  We use <code>'w'</code>, which means to write to a brand-new file.  (Other options are: <code>'r'</code> to read from the file or <code>'a'</code> to add to the end of the file.)</p>

	<p>The file is opened for writing and we are handed back the file in variable <code>f</code>, which can be seen <strong>sliding down the chute into our block</strong>.  Inside the block, we write to the file.  When the block closes with <code>end</code>, our file is closed as well.</p>

	<p>Notice we use the <strong>concatenator</strong> <code>&lt;&lt;</code> to write to the file.  We can do this because files have a method called <code>&lt;&lt;</code> just like strings do.</p>

	<h3>Settle Down, Your Ideas Aren&#8217;t Trapped</h3>

	<p>Here, let&#8217;s get your ideas back to their original verbage, so you can rumminate over their brilliance.</p>

<pre>
  require 'wordlist'

  # Print each idea out with the words fixed
  Dir['idea-*.txt'].each do |file_name|
    idea = File.read( file_name )
    code_words.each do |real, code| 
      idea.gsub!( code, real )
    end
    puts idea
  end
</pre>

	<p>By now, you should be up to snuff with most of this example.  I won&#8217;t bore you with all of the mundane details.  See if you can figure out how it works on your own.</p>

	<p>We have an interesting class method here, though.  The <code>Dir::[]</code> method searches a directory (some of you may call them &#8220;folders&#8221;).  Just as you&#8217;ve seen with Hashes, the index brackets can be class methods.  (Can you start to see the shiny, glinting gorgeousness of Ruby?)</p>

	<p>So we&#8217;re using the forklift to get those files in the directory which match <code>'idea-*.txt'</code>.  The <code>Dir::[]</code> method will use the asterisk as a wildcard.  We&#8217;re basically saying, &#8220;Match anything that starts with <em>idea-</em> and ends with <em>.txt</em>.&#8221;  The forklift shuffles off to the directory and comes back with a list of all matching files.</p>

	<p>That <strong>list of files</strong> will come in the form of <code>Array</code> the Caterpillar, with a <code>String</code> for each  file.  If you are curious and want to play with with <code>Dir::[]</code>, try this:</p>

	<blockquote>
		<p><code>p Dir['idea-*.txt']</code> will print:</p>
	</blockquote>

	<blockquote>
		<p><code>['idea-mustard-plus-codeine.txt']</code> (<em>an Array of file names!</em>)</p>
	</blockquote>

	<p>Yes, the <code>p</code> method works like <code>print</code>.  But where <code>print</code> is designed for displaying strings, <code>p</code> will print <em>anything</em>.  Check this out. </p>

	<blockquote>
		<p><code>p File::methods</code> will print:</p>
	</blockquote>

	<blockquote>
		<p><code>["send", "display", "name", "exist?", "split",</code> ... <em>a whole list of method names!</em> <code>]</code> <br />
</p>
	</blockquote>

    
    
        
        <a name="section4" />
        <h2>4. The Miracle of Blocks</h2>

        <p><img src="i/blix-2.gif" title="Flowerboyz?  Heard it before." alt="Flowerboyz?  Heard it before." /><br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Excerpt from The Scarf Eaters</h2>
        

        <p>(<em>from Chapter V: A Man in Uniform</em>.)</p>

	<p>In April, the callow lilies came back.  They stretched their baby angel wings out and reached for the world.  Gently, their tendrils caressed the sullen fence posts until even they lilted lovelier.</p>

	<p>From her bedroom window, Lara watched the lilies exude their staunch femininity. She slipped the tassels of a fresh, carpathian, embroidered scarf into her mouth and  ate slowly. The long cloth slid down her throat and tickled as it snaked along her esophagus.  She giggled and burped.</p>

	<p>Oh, how the flora drew her in.  Looking at flowers went so well with being a teenage girl.  She wanted to paint them, so she opened a new Flash template.  A blank movie this time.</p>

	<p>She set her cursor loose in the garden of her movie&#8217;s viewable area.  Vector white lines below shorter vector yellow lines.  She selected the white lines and grouped them together. She even moved them to a new layer entitled &#8220;Cry, Baby Angel, Cry.&#8221;  Then she converted them into a graphic object and moved them to the library.</p>

	<p>She felt a warm chill as she moved the long, white petals to her movie&#8217;s library.  It felt so official.  <em>I choose you.  I name you.  Dwell in the comfort of my palace forevermore.</em></p>

	<p>Heh.  She laughed.  Colorado Springs was hardly a &#8220;palace.&#8221; </p>

	<p>Since they had moved, Dad had only been home once.  He had barged through the front door in full uniform and had given quite a start to both Lara and her mother.  Her mother had even dropped a head of lettuce&#8212;which head she had just finished washing&#8212;in a pitcher of Lick-M-Aid.  </p>

	<p>The pitcher was just wide enough for the lettuce and it lodged in there pretty good. Dad came over and yanked at the moist head for sometime until declaring it <span class="caps">FUBAR</span>, in a voice both bemused and then crestfallen.  He tossed the clotted spout in the trash bin.</p>

	<p>It was only later that day that Lara&#8217;s mother realized that she could have simply halved the lettuce with an electric knife.  Dad laughed and slapped his forehead.  He then went around and slapped Lara&#8217;s forehead, and her mother&#8217;s too, affectionately.</p>

	<p>&#8220;We just weren&#8217;t thinking, were we?&#8221; is what he said.  &#8220;And who dares blame us?  We&#8217;re a real family today.  And we shouldn&#8217;t have to do anything else on the day we got our family back.&#8221; </p>

	<p>Lara&#8217;s smiled reflected across the glass of her monitor.  She chose the text tool and in 42 point serif typed: &#8220;Dad.&#8221;  She created a path for it and let it tween off the right side of the screen.  She cried long after it was gone.<br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>Since you and I are becoming closer friends as we share this time together, I should probably let you in on a bit of the history going on here.  It&#8217;s a good time for a break I say.</p>

	<p>First, you should know that Blix is my cat.  My second pet to Bigelow. Granted, we hardly see each other anymore.  He&#8217;s completely self-sufficient. I&#8217;m not exactly sure where he&#8217;s living these days, but he no longer lives in the antechamber to my quarters.  He emptied his savings account about seven months ago.</p>

	<p>He does have a set of keys for the house and the Seville.  Should he ever find himself stranded, I will gladly step away from our differences and entertain his antics around the house again.</p>

	<p>Make no mistake.  I miss having him around.  Can&#8217;t imagine he misses my company, but I miss his.</p>

	<h3>A Siren and A Prayer</h3>

	<p>I first saw Blix on television when I was a boy.  He had a starring role on a very gritty police drama called <em>A Siren and A Prayer</em>.  The show was about a god-fearing police squad that did their jobs, did them well, and saw their share of miracles out on the beat.  I mean the officers on this show were <em>great</em> guys, very religious, practically clergy.  But,  you know, even clergymen don&#8217;t have the good sense to kill a guy after he&#8217;s gone too far. These guys knew where to draw that line.  They walked that line every day.</p>

	<p>So, it was a pretty bloody show, but they always had a good moral at the end.  Most times the moral was something along the lines of, &#8220;Wow, we got out of that one quick.&#8221;  But there&#8217;s serious camaraderie in a statement like that.</p>

	<p>The show basically revolved around this one officer.  &#8220;Mad&#8221; Dick Robinson.  People called him Mad because he was basically insane.  I can&#8217;t remember if he was actually clinically insane, but people were always questioning his decisions.  Mad often blew his top and chewed out some of the other officers, most of whom had unquestionable moral character.  But we all know it&#8217;s a tough world, the stakes are high out there, and everyone who watched the show held Mad in great regard.  I think everyone on the squad grew quite a bit as people, thanks to Mad&#8217;s passion.</p>

	<p>The officers couldn&#8217;t do it all themselves though.  In every single episode, they plead with a greater force for assistance.  And, in every single episode, they got their tips from a cat named Terry (played by my cat Blix.)  He was just a kitten at the time and, as a young boy tuning into <em>A Siren and A Prayer</em>, I found myself longing for my own crime-sniffing cat. Terry took these guys down the subway tunnels, through the rotting stench of abandoned marinas, into backdoors of tall, industrial smokestacks.  </p>

	<p>Sometimes he was all over an episode, darting in and out, preparing traps and directing traffic. But other times you wouldn&#8217;t see him the whole episode.  Then you&#8217;d rewind through the whole show and look and look and look.  You&#8217;d give up.  He can&#8217;t be in that episode.  </p>

	<p>Still, you can&#8217;t bear to let it go, so you go comb through the whole episode with the jog on your remote, combing, pouring over each scene.  And there he is.  Way up behind the floodlight that was turned up too high.  The one that left Mad with permanent eye damage.  Why?  Why burn out the retinas of your own colleague, Terry?</p>

	<p>But the question never got answered because the series was cancelled.  They started to do special effects with the cat and it all fell apart.  In the last episode of the show, there is a moment where Terry is trapped at the top of a crane, about to fall into the searing slag in the furnace of an iron smelt.  He looks back.  No going back.  He looks down.  Paws over eyes (<em>no joke!</em>), he leaps from the crane and, mid-flight, snags a rope and swings to safety, coming down on a soft antelope hide that one of the workers had presumably been tanning that afternoon.</p>

	<p>People switched off the television set the very moment the scene aired.  They tried changing the name. First it was <em>God Gave Us a Squad</em>.  <em>Kiss of Pain</em>.  Then, <em>Kiss of Pain in Maine</em>, since the entire precinct ended up relocating there.  But the magic was gone.  I went back to summer school that year to make up some classes and all the kids had pretty much moved on to football pencils.</p>

	<h3>Blocks</h3>

	<p>A couple years ago, I started teaching Blix about Ruby.  When we got to this part in his lessons, the part that covers blocks, he said to me, &#8220;Blocks remind me of Mad Dick Robinson.&#8221; </p>

	<p>&#8220;Oh?&#8221;  I hadn&#8217;t heard that name in awhile.  &#8220;I can&#8217;t see how that could be.&#8221; </p>

	<p>&#8220;Well, you say blocks can be difficult to understand.&#8221; </p>

	<p>&#8220;They&#8217;re not difficult,&#8221; I said.  &#8220;A <strong>block</strong> is just <strong>code that&#8217;s grouped together</strong>.&#8221; </p>

	<p>&#8220;And Mad was just an officer, sworn to uphold his duty,&#8221; he said.  &#8220;But he was a real miracle to watch out in the field.  Now, this first example you&#8217;ve shown me&#8230;&#8221;  He pointed to an example I&#8217;d written down for him.</p>

<pre>
  kitty_toys =
    [:shape =&gt; 'sock', :fabric =&gt; 'cashmere'] +
    [:shape =&gt; 'mouse', :fabric =&gt; 'calico'] +
    [:shape =&gt; 'eggroll', :fabric =&gt; 'chenille']
  kitty_toys.sort_by { |toy| toy[:fabric] }
</pre>

	<p>&#8220;This is a small miracle,&#8221; he said. &#8220;I can&#8217;t deny its beauty.  Look, there are my kitty toys, laid out with their characteristics.  Below them, the block, sorting them by fabric.&#8221; </p>

	<p>&#8220;I apologize if your list of toys looks a bit tricky,&#8221; I said.  Like you, he had learned about the Array, the caterpillar stapled into the code, with square brackets on each side and each item separated by commas.  (Ah, here is one: <code>['sock', 'mouse', 'eggroll']</code>.)  He had also been taught the Hash, which is like a dictionary, with curly braces on each end which look like small, open books.  Commas in the Hash between each pair.  Each word in the dictionary matched up with its definition by an arrow.  (Be beholden: <code>{'blix' =&gt; 'cat', 'why' =&gt; 'human'}</code>.)</p>

	<p>&#8220;Yes, vexing,&#8221; he said.  &#8220;It has square brackets like it&#8217;s an Array, but with the arrows like it&#8217;s a Hash. I don&#8217;t think you&#8217;re going to get away with that.&#8221; </p>

	<p>&#8220;It does seem a bit subversive, doesn&#8217;t it?&#8221;  I said, tease-nudging him with a spoon.  &#8220;I&#8217;ve done your kitty toy list in a mix of the two.  I&#8217;m using a shortcut.  Which is: <strong>If you use arrows inside of an Array,  you&#8217;ll end up with a Hash inside of that Array.</strong>&#8221; </p>

	<p>&#8220;Oh, I see,&#8221; he said.  &#8220;You criss-crossed &#8216;em.  How neat!&#8221; </p>

	<p>&#8220;Yes, yes, you&#8217;re on it,&#8221; I said.  He was also very good with a protractor.  &#8220;I have three Arrays, each with a Hash inside.  Notice the plus signs?  I&#8217;m adding them into one big Array.  Here&#8217;s another way of writing it&#8230;&#8221;  I jotted down.</p>

<pre>
  kitty_toys = [
    {:shape =&gt; 'sock', :fabric =&gt; 'cashmere'},
    {:shape =&gt; 'mouse', :fabric =&gt; 'calico'},
    {:shape =&gt; 'eggroll', :fabric =&gt; 'chenille'}
  ]
</pre>

	<p>One Array, which acts as our list of chew toys.  Three Hashes in the Array to describe each toy.</p>

	<h3>Sorting and Iterating to Save Lives</h3>

	<p>&#8220;Let&#8217;s sort your toys by shape now,&#8221; I said.  &#8220;Then, we&#8217;ll print them out in that order.&#8221; </p>

<pre>
  kitty_toys.sort_by { |toy| toy[:shape] }.each do |toy|
    puts "Blixy has a #{ toy[:shape] } made of #{ toy[:fabric] }" 
  end
</pre>

	<p>&#8220;How does <code>sort_by</code> work?&#8221; asked Blix.  &#8220;I can tell it&#8217;s a method you can use with Arrays.  Because <code>kitty_toys</code> is an Array.  But what is <code>toy</code>?&#8221; </p>

	<p>&#8220;Okay, <code>toy</code> is a <strong>block argument</strong>,&#8221; I said.  &#8220;Remember: the skinny pipes on each side of <code>toy</code> make it a <strong>chute</strong>.&#8221; </p>

	<p>&#8220;Sure, but it looks like you&#8217;re using it like a Hash.  Inside the block you have <code>toy[:shape]</code>. That looks like a Hash.&#8221; </p>

	<p>&#8220;The <code>sort_by</code> method is an <strong>iterator</strong>, Blix.  It <strong>iterates</strong>, or <strong>cycles</strong>, through <strong>a list of things</strong>.  You remember that episode when Mad&#8230;&#8221; </p>

	<p>&#8220;Episode?&#8221; he said.  Yeah, he can&#8217;t understand the concept of TV dramas.   Yeah, I&#8217;ve tried explaining.</p>

	<p>&#8220;Or, yeah, remember that one <em>eyewitness account</em> we watched where Mad was trying to talk down that crazy spelling bee contestant from the ledge of an college library?&#8221; </p>

	<p>&#8220;I remember it better than you because I was riding in a remote control plane.&#8221;  Yep, it was one of those episodes.</p>

	<p>&#8220;Do you remember how Mad got the guy to come down?&#8221; I asked.</p>

	<p>&#8220;People in spelling bees love letters,&#8221; said Blix.  &#8220;So what Mad did was a genius move on his part. He started with the letter A and gave reasons, for all the letters of the alphabet, why the guy should walk back down the building and be safe on the ground.&#8221; </p>

	<p>&#8221;&#8217;A is for the Architecture of buildings like this,&#8217;&#8221; I said, in a gruff Mad voice. &#8221;&#8217;Which give us hope in a crumbling world.&#8217;&#8221; </p>

	<p>&#8221;&#8217;B is for Big Guys, like your friend Mad the Cop,&#8217;&#8221; said Blix.  &#8221;&#8217;Guys who help people all the time and don&#8217;t know how to spell too great, but still help guys who spell really great.&#8217;&#8221; </p>

	<p>&#8220;See, he went through all the letters, one at a time.  He was <em>iterating</em> through them.&#8221; <em>It Err Ate Ing.</em></p>

	<p>&#8220;But the guy jumped anyway, Why.  He jumped off on letter Q or something.&#8221; </p>

	<p>&#8221;&#8217;Q is for Quiet Moments that help us calm down and think about all of life&#8217;s little pleasures, so we don&#8217;t get all uptight and starting goofing around on tiptoes at the very edge of a big, bad building.&#8217;&#8221; </p>

	<p>&#8220;And then he jumped,&#8221; said Blix.  He shook his head.  &#8220;You can&#8217;t blame Mad.  He did his best.&#8221; </p>

	<p>&#8220;He had a big heart, that&#8217;s for sure,&#8221; I said, patting Blix on the shoulder.</p>

<pre>
  kitty_toys.sort_by { |toy| toy[:shape] }.each do |toy|
    puts "Blixy has a #{ toy[:shape] } made of #{ toy[:fabric] }" 
  end
</pre>

	<p>&#8220;As for your <code>sort_by</code>, it <strong>starts at the top</strong> of the list and <strong>goes through each item</strong>, one at a time. So <code>toy</code> is one of those items.  With each item, <code>sort_by</code> stops and <strong>slides that item down the chute</strong>, under the <code>toy</code> name, and let&#8217;s you figure out what to do with it.&#8221; </p>

	<p>&#8220;Okay, so <code>toy</code> takes turns being each of the different toys I have.&#8221; </p>

	<p>&#8220;That&#8217;s right,&#8221; I said.  &#8220;You know how I&#8217;ve really been harping on <em>using the answers that methods give you</em>?  Here, we&#8217;re simply looking up the toy&#8217;s shape inside the block.  The block then answers to <code>sort_by</code> with the shape string, such as <code>"mouse"</code> or <code>"sock"</code>.  Once it&#8217;s done cycling through the whole list, <code>sort_by</code> will have alphabetically compared each of the shape strings and will give back a new sorted Array.&#8221; </p>

	<h3> An Unfinished Lesson</h3>

	<p>&#8220;That&#8217;s good enough for today,&#8221; said Blix.  &#8220;Can I have a fresh saucer of milk, please?&#8221; </p>

	<p>I filled his saucer to the brim and he guzzled from it for some time while I took a poker and jabbed at coals in the fireplace.  My mind wandered and I couldn&#8217;t help but think further of blocks.  I wondered what I would teach Blix next.</p>

	<p>I probably would have taught him about <code>next</code>.  When you are iterating through a list, you may use <code>next</code> to <strong>skip on to the next item</strong>.  Here we&#8217;re counting toys that have a non-eggroll shape by skipping those that do with <code>next</code>.</p>

<pre>
  non_eggroll = 0
  kitty_toys.each do |toy|
    next if toy[:shape] == 'eggroll'
    non_eggroll = non_eggroll + 1
  end
</pre>

	<p>I could also have taught him about <code>break</code>, which <strong>kicks you out of an iterating loop</strong>. In the code below, we&#8217;ll print out (with <code>p</code>) each of the toy Hashes until we hit the toy whose fabric is chenille.  The <code>break</code> will cause the <code>each</code> to abruptly end.</p>

<pre>
  kitty_toys.each do |toy|
    break if toy[:fabric] == 'chenille'
    p toy
  end
</pre>

	<p>I never got to teach him such things.  I continued poking away at a particularly stubborn coal which was caught in the iron curtain of the fireplace and threatened to drop on my antelope skin rug.  </p>

	<p>As I hacked away ferociously at the black stone, Blix slipped away, presumably on the bus bound for Wixl, the very bustling metropolis of the animal economies.  Who knows, he may have first stopped in Ambrose or Riathna or any of the other villages along the way.  My instinct say that Wixl was his definitely his final stop. </p>

	<p>Without any student to instruct and coax along, I found myself quite lonely, holed up in the estate.  In the stillness of the dead corridors, I began to sketch out a biography in the  form of this guide.</p>

	<p>I worked on it whenever I found myself bored.  And when I wasn&#8217;t bored, I could always switch on <em>The Phantom Menace</em> to get me in the mood.</p>

	<p><img src="i/the.elf-7.jpg" title="Someone let them all out." alt="Someone let them all out." /><br />
</p>

    
    

        <p align="right">
        <a href="chapter-5.html">Turn page.</a>
        </p>

    </div>
</div>
</div>
<div id="footer">
   <div class="pager">
   &lt; <a href="chapter-3.html">prev</a> | <a href="chapter-5.html">next</a> &gt;
   </div>
   <div class="title">
   <h3>why's <span class="hilite">(poignant)</span> guide to ruby</h3>
   </div>
</div>
</body>
</html>
