<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Why's (Poignant) Guide to Ruby</title>
    <link rel="stylesheet" type="text/css" href="guide.css" />
</head>
<body>

<div align="center">
<div class="page" style="margin-top: 90pt;">
    <div class="pageTitle">
    <p style="margin-bottom: 180pt;"><img src="i/poignant.guide.gif" /></p>
    <p style="margin: 0px; padding: 0px;">tenderly written and illustrated by</p>
    <h3 style="margin: 0px; padding: 0px;">why the lucky stiff</h3>
    <p style="margin-top: 40pt;"><img src="i/cc-by.gif" /><img src="i/cc-sa.gif" /><br />
    Licensed under the Attribution-ShareAlike license.<br />
    See http://creativecommons.org/licenses/by-sa/2.0/ for details.</p>
    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>1.</h3>
        <h1>About this Book</h1>
        <p><img src="i/chapter.poignant.guide-1.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    

        <p><img src="i/about.the.poignant.guide-1.gif" title="What a fantastic voyage!" alt="What a fantastic voyage!" /></p>

	<p><img src="i/about.the.poignant.guide-2.jpg" title="Small infants can do it." alt="Small infants can do it." /></p>

	<p><img src="i/about.the.poignant.guide-3.gif" title="The thoughtful reader." alt="The thoughtful reader." /></p>

	<p><img src="i/about.the.poignant.guide-4.gif" title="Meep." alt="Meep." /><br />
</p>

    
    

    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>2.</h3>
        <h1>Kon'nichi wa, Ruby</h1>
        <p><img src="i/chapter.poignant.guide-2.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    
        
        <a name="section1" />
        <h2>1. Opening This Book</h2>

        <p>Pretend that you&#8217;ve opened this book (although you probably <em>have</em> opened this book), just to find a huge onion right in the middle crease of the book.  (The manufacturer of the book has included the onion at my request.)</p>

	<p>So you&#8217;re like, &#8220;Wow, this book comes with an onion!&#8221;  (Even if you don&#8217;t particularly like onions, I&#8217;m sure you can appreciate the logistics of shipping any sort of produce discreetly inside of an alleged programming manual.)</p>

	<p>Then you ask yourself, &#8220;Wait a minute.  I thought this was a book on Ruby, the incredible new programming language from Japan.  And although I can appreciate the logistics of shipping any sort of produce discreetly inside of an alleged programming manual: Why an onion? What am I supposed to do with it?&#8221; </p>

	<p>No.  Please don&#8217;t puzzle over it.  You don&#8217;t need to do anything with the onion.  Set the onion aside and let <em>it</em> do something with <em>you</em>.</p>

	<p>I&#8217;ll be straight with you.  I want you to cry.  To weep.  To whimper sweetly.  This book is a <strong>poignant</strong> guide to Ruby.  That means code so beautiful that tears are shed.  That means gallant tales and somber truths that have you waking up the next morning in the arms of this book.  Hugging it tightly to you all the day long. If necessary, fashion a makeshift hip holster for <em>Why&#8217;s (Poignant) Guide to Ruby</em>, so you can always have this book&#8217;s tender companionship.</p>

	<p>You really must sob once.  Or at least sniffle.  And if not, then the onion will make it all happen for you.<br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>What I'm Going to Do With the Massive Proceeds from this Book</h2>
        

        <p>Anyone who&#8217;s written a book can tell you how easily an author is distracted by visions of grandeur. In my experience, I stop twice for each paragraph, and four times for each panel of a comic, just to envision the wealth and prosperity that this book will procure for my lifestyle.  I fear that the writing of this book will halt altogether to make way for the armada of SUVs and luxury towne cars that are blazing away in my head.</p>

	<p>Rather than stop my production of the (Poignant) Guide, I&#8217;ve reserved this space as a safety zone for pouring my empty and vain wishes.</p>

	<p>Today I was at this Italian restaraunt, Granado&#8217;s, and I was paying my bill.  Happened to notice (under glass) a bottle of balsamic vinegar going for $150.  Fairly small.  I could conceal it in my palm.  Aged twenty-two years.</p>

	<p>I&#8217;ve spent a lot of time thinking about that bottle.  It is often an accessory in some of these obsessive fantasies.  In one fantasy, I walk into the restaraunt, toss a stack of greenery on the counter and earnestly say to the cashier, &#8220;Quick! I have an important salad to make!&#8221; </p>

	<p>In another, related fantasy, I am throwing away lettuce.  Such roughage isn&#8217;t befitting of my new vinegar.  No, I will have come to a point where the fame and the aristocracy will have corrupted me to my core.  I will use cash as my lettuce.  Cold, hard cash, Mrs. Price.</p>

	<p>Soon, I will be expending hundreds for a block of myzithra cheese.</p>

	<p>My imaginations have now gone beyond posessions, though.  Certainly, I have thought through my acquisition of grecian urns, motorcades, airlines, pyramids, dinosaur bones.  Occassionally I&#8217;ll see wind-tossed cities on the news and I&#8217;ll jot down on my shopping list: <em>Hurricane</em>.</p>

	<p>But, now I&#8217;m seeing a larger goal.  Simply put: what if I amassed such a fortune that the mints couldn&#8217;t print enough to keep up with my demand?  So, everyone else would be forced to use Monopoly money as actual currency.  And you would have to win in Monopoly to keep food on the table.  These would be some seriously tense games.  I mean you go to mortgage St. James Place and your kids start crying. In addition, I think you&#8217;ll begin to see the end of those who chose to use the Free Parking square as <a href="http://groups.yahoo.com/group/monopoly/message/37">the underground coffers</a> for city funds.</p>

	<p>You&#8217;ve got to hand it to fun money, though.  Fake money rules.  You can get your hands on it so quickly.  For a moment, it seems like you&#8217;re crazy rich.  When I was a kid, I got with some of the neighborhood kids and we built this little Tijuana on our street.  We made our own pesos and wore sombreros and everything!</p>

	<p>One kid was selling hot tamales for two pesos each.  <em>Two pesos!</em>  Did this kid know that the money was fake? Was he out of his mind?  Who invited this kid?  Didn&#8217;t he know this wasn&#8217;t really Tijuana?  Maybe he was really from Tijuana! Maybe these were <em>real</em> pesos!  Let&#8217;s go make more <em>real</em> pesos!</p>

	<p>I think we even had a tavern where you could get totally hammered off Kool-Aid.  There&#8217;s nothing like a bunch of kids stumbling around, mumbling incoherently with punchy red clown lips.<br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    
        
        <a name="section2" />
        <h2>2. The Dog Story</h2>

        <p>So try this first bit of poignancy on for size:</p>

	<p>One day I was walking down one of those busy roads covered with car dealerships (this was shortly after my wedding was called off) and I found an orphaned dog on the road.  A wooly, black dog with greenish red eyes.  I was kind of feeling like an orphan myself, so I took a couple balloons that were tied to a pole at the dealership and I relocated them to the dog&#8217;s collar.  Then, I decided he would be my dog.  I named him Bigelow.</p>

	<p>We set off to get some Milkbones for Bigelow and, afterwards, head over to my place, where we could sit in recliners and listen to Gorky&#8217;s Zygotic Mynci.  Oh, and we&#8217;d also need to stop by a thrift store and get Bigelow his own recliner.</p>

	<p>But Bigelow hadn&#8217;t accepted me as his master.  So five minutes later, the stupid dog took a different crosswalk than I did and I never caught up.  So whereas he had previously only been lost once, he was now lost twice.  I slowed my pace towards the life of Milkbones and an extra recliner.  I had a dog for five minutes.</p>

	<p>Stupid Benedict Arnold of a dog.  I sat on a city bench and threw pinecones at a statue of three sheep crossing a bridge.  After that, I wept for hours.  The tears just came.  Now there&#8217;s a little something poignant to get you started.</p>

	<p>I wonder where he went with all those balloons.  That crazy dog must have looked like a party with legs.</p>

	<p>It wasn&#8217;t much later that I pulled my own Bigelow.  I printed out a bunch of pages on Ruby.  Articles found around the Web.  I scanned through them on a train ride home one day.  I flipped through them for five minutes and then gave up.  Not impressed.</p>

	<p>I sat, staring out the window at the world, a life-sized blender mixing graffiti and iron  smelts before my eyes.  <em>This world&#8217;s too big for such a a little language</em>, I thought. <em>Poor little thing doesn&#8217;t stand a chance.  Doesn&#8217;t have legs to stand on.  Doesn&#8217;t have arms to swim.</em></p>

	<p>And yet, there I was.  One little man on a flimsy little train (and I even still had a baby tooth to lose at the time) out of billions of people living on a floating blue rock.  How can I knock Ruby?  Who&#8217;s to say that I&#8217;m not going to accidentally choke on my cell phone and die later that evening.  Why&#8217;s dead, Ruby lives on.</p>

	<p>The gravestone:</p>

	<blockquote>
		<p>What&#8217;s in his trachea?<br />
Oh, look, a Nokia!</p>
	</blockquote>

	<p>Just my luck.  Finally get to have a good, long sleep underground, only to be constantly disturbed by <em>Pachelbel&#8217;s Canon</em> going off in my stomach.<br />
</p>

    
    
        
        <a name="section3" />
        <h2>3. The Red Sun Rises</h2>

        <p>So, now you&#8217;re wondering why I changed my mind about Ruby.  The quick answer is: we clicked.</p>

	<p>Like when you meet Somebody in college and they look like somebody who used to hit you in the face with paintbrushes when you were a kid.  And so, impulsively, you conclude that this new Somebody is likely a non-friend.  You wince at their hair.  You hang up phones loudly during crucial moments in their anecdotes.  You use your pogo stick right there where they are trying to walk!</p>

	<p>Six months later, somehow, you and Somebody are sitting at a fountain having a perfectly good chat.  Their face doesn&#8217;t look so much like that childhood nemesis.  You&#8217;ve met the Good Twin.  You clicked.</p>

	<p>So whereas I should probably be pounding your teeth in with hype about Ruby and the tightly-knit cadre of pertinent ancronyms that accompany it everywhere  (whetting the collective whistles of your bosses and their bosses&#8217; bosses), instead I will just let you coast.  I&#8217;ll let you freefall through some code, interjecting occassionally with my own heartfelt experiences.  It&#8217;ll be quite easy, quite natural.</p>

	<p>I should offer you some sort of motivation, though.  So, Smotchkkiss, I&#8217;m going to give my three best reasons to learn Ruby and be done with it.</p>

	<ol>
	<li><strong>Brain health.</strong><br />
Vitamin R.  Goes straight to the head.  Ruby will teach you to <em>express</em> your ideas through a computer.  You will be writing stories for a machine.  Creative skills, people.  Deduction.  Reason.  Nodding intelligently. The language will become a tool for you to better connect your mind to the world. I&#8217;ve noticed that many experienced users of Ruby seem to be clear thinkers and objective.  (In contrast to: heavily biased and coarse.)</li>
		<li><strong>One man on one island.</strong>  <br />
Ruby was born in Japan.  Which is freaky.  Japan is not known for its software.  And since programming languages are largely written in English, who would suspect a language to come from Japan?  And yet, here we have Ruby.  Against the odds, Yukihiro Matsumoto created Ruby on February 24, 1993.  For the past ten years, he has steadily brought Ruby to a global audience.  It&#8217;s triumphant and noble and all that.  Support diversity. Help us tilt the earth just a bit.</li>
		<li><strong>Free.</strong>  <br />
Using Ruby costs nothing.  The code to Ruby itself is open for all of the world to inhale/exhale.  Heck, this book is free.  It&#8217;s all part of a great, big giveaway that should have some big hitch to it.  You&#8217;d think we&#8217;d make you buy vacuums or timeshare or fake Monets. You&#8217;d think there&#8217;d be a 90 minute presentation where the owner of the company comes out at the end and knuckles you into sealing the deal.  Nope, free.</li>
	</ol>

	<p>With that, it&#8217;s time for the book to begin.  You can now get out your highlighter and start dragging it along each captivating word from this sentence on.  I think I have enough hairspray and fun money on my person to keep me sustained until the final page.</p>

    
    
        
        <a name="section4" />
        <h2>4. How Books Start</h2>

        <p>Now, if you ever have read a book, you know that no book can properly start without an exorbitant amount of synergy.  Yes, synergy.  Maybe you didn&#8217;t know this.  Synergy means that you and I are supposed to cooperate to make this a great reading experience.  </p>

	<p>We start off the book by getting along well in the Introduction.  This togetherness, this <strong>synergy</strong>, propels us through the book, with me guiding you on your way.  You give me a reassuring nod or snicker to indicate your progress.</p>

	<p>I&#8217;m Peter Pan holding your hand.  Come on, Wendy!  Second star to the right and on till morning.</p>

	<p>One problem here.  I don&#8217;t get along well with people.  I don&#8217;t hold hands very well.  </p>

	<p>Any of my staff will tell you.  At the Opening Ceremonies of This Book (a catered event with stadium seating), I discovered that the cucumber sandwiches weren&#8217;t served in tea towels. As a result, the butter hadn&#8217;t set with the cucumbers right&#8230; Anyways, I made a big scene and  set fire to some of the advertising trucks outside.  I smashed this spotlight to pieces and so on.  I had this loud maniacal laughing thing going on deep into that night.  It was a real mess.</p>

	<p>But, since I don&#8217;t get along well with people, I hadn&#8217;t invited anyone but myself to the Opening Ceremonies of This Book.  So it wasn&#8217;t really that embarassing.   I kept it under wraps and no one found out about the whole ordeal.</p>

	<p>So you&#8217;ve got to know that <strong>synergy</strong> doesn&#8217;t actually mean <strong>synergy</strong> in this book.  I can&#8217;t do normal <strong>synergy</strong>. No, in this book, <strong>synergy</strong> means <strong>cartoon foxes</strong>.  What I&#8217;m saying is: this book will be starting off with an exorbitant amount of <strong>cartoon foxes</strong>.</p>

	<p>And I will be counting on you to turn them into <strong>synergy</strong>.<br />
</p>

    
    

    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>3.</h3>
        <h1>A Quick (and Hopefully Painless) Ride Through Ruby (with Cartoon Foxes)</h1>
        <p><img src="i/chapter.poignant.guide-3.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    

        <p><img src="i/the.foxes-1.gif" title="The foxes show up." alt="The foxes show up." /></p>

	<p>Yeah, these are the two.  My asthma&#8217;s kickin in so I&#8217;ve got to go take a puff of medicated air just now.  Be with you in a moment.</p>

	<p><img src="i/the.foxes-2.gif" title="Foxes in boxes." alt="Foxes in boxes." /></p>

	<p>I&#8217;m told that this chapter is best accompanied by a rag.  Something you can mop your face with as the sweat pours off your face.</p>

	<p>Indeed, we&#8217;ll be racing through the whole language.  Like striking every match in a box as quickly as can be done.<br />
</p>

    
    
        
        <a name="section1" />
        <h2>1. Language and I MEAN Language</h2>

        <p><img src="i/the.foxes-3.gif" title="Our friends, those two helpless foxies, finally realize the gravity of their predicament." alt="Our friends, those two helpless foxies, finally realize the gravity of their predicament." /></p>

	<p>My conscience won&#8217;t let me call Ruby a <em>computer</em> language.  That would imply that the language works primarily on the computer&#8217;s terms.  That the language is designed to accomodate the computer, first and foremost.  That therefore, we, the coders, are foreigners, seeking citizenship in the computer&#8217;s locale.  It&#8217;s the computer&#8217;s language and we are translators for the world.</p>

	<p>But what do you call the language when your brain begins to think in that language?  When you start to use the language&#8217;s own words and colloquialisms to express yourself.  Say, the computer can&#8217;t do that.  How can it be the computer&#8217;s language?  It is ours, we speak it natively!</p>

	<p>We can no longer truthfully call it a <em>computer</em> language.  It is <em>coderspeak</em>.  It is the language  of our thoughts.</p>

	<p><strong>Read the following aloud to yourself.</strong></p>

	<blockquote>
		<p><code>5.times { print "Odelay!" }</code></p>
	</blockquote>

	<p>In English sentences, punctuation (such as periods, exclamations, parentheses) are silent.  Punctuation adds meaning to words, helps give cues as to what the author intended by a sentence.  So let&#8217;s read the above as: <em>Five times print &#8220;Odelay!&#8221;.</em></p>

	<p>Which is exactly what this small Ruby program does.  Beck&#8217;s  <a href="http://www.whiskeyclone.net/ghost/L/lordonlyknows.html">mutated Spanish</a> exclamation will print five times on the computer screen.</p>

	<p><strong>Read the following aloud to yourself.</strong></p>

	<blockquote>
		<p><code>exit unless "restaurant".include? "aura"</code></p>
	</blockquote>

	<p>Here we&#8217;re doing a basic reality check.  Our program will <strong>exit</strong> (the program will end) <strong>unless</strong>  the word <strong>restaurant</strong> contains (or <strong>includes</strong>) the word <strong>aura</strong>.  Again, in English: <em>Exit unless the word restaurant includes the word aura.</em></p>

	<p>Ever seen a programming language use question marks so effectively?  Ruby uses some punctuation, such as exclamations and question marks, to enhance readability of the code.  We&#8217;re asking a question in the above code, so why not make that apparent?</p>

	<p><strong>Read the following aloud to yourself.</strong></p>

	<blockquote>
		<p><code>[toast, cheese, wine].each { |food| eat food }</code></p>
	</blockquote>

	<p>While this bit of code is less readable and sentence-like than the previous examples, I&#8217;d still encourage you to read it aloud.  While Ruby may sometimes read like English, it sometimes reads as a shorter English.  Fully translated into English, you might read the above as: <em>With toast, cheese, and wine, take each type of food and eat that food</em>.</p>

	<p>This program won&#8217;t actually work if you run it.  Ruby doesn&#8217;t know how to <strong>eat</strong>.  But the beautiful thing is that you can add your own words to Ruby.  Your own actions.  Your own objects.</p>

	<p>At this point, you&#8217;re probably wondering how these words actually fit together.  Smotchkkiss is wondering what the dots and brackets mean.  I&#8217;m going to discuss the various <em>parts of speech</em> next.</p>

	<p>All you need to know thus far is that Ruby is basically built from sentences.  They aren&#8217;t exactly English sentences.  They are short collections of words and punctuation which encompass a single thought.  These sentences can form books.  They can form pages.  They can form entire novels, when strung together. Novels that can be read by humans, but also by computers.<br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Concerning Commercial Uses of the (Poignant) Guide</h2>
        

        <p>This book is released under a Creative Commons license which allows unlimited commercial use of this text.  Basically, this means you can sell all these bootleg copies of my book and keep the revenues for yourself.  I trust my readers (and the world around them) to rip me off. To put out some crappy Xerox edition with that time-tested clipart of praying hands on the cover.</p>

	<p>Guys, the lawsuits just ain&#8217;t worth the headache.  So I&#8217;m just going to straight up endorse authorized piracy, folks.  Anybody who wants to read the book should be able to read it. Anybody who wants to market the book or come up with special editions, I&#8217;m flattered.</p>

	<p>Why would I want the $$$?  <span class="caps">IGNORE ALL OTHER SIDEBARS</span>: I&#8217;ve lost the will to be a rich slob.   Sounds inhuman, but I like my little black-and-white television.  Also my hanging plastic flower lamp. I don&#8217;t want to be a career writer.  Cash isn&#8217;t going inspire me.  Pointless.</p>

	<p>So, if money means nothing to the lucky stiff, why rip me off when you could co-opt shady business practices to literally crush my psyche and leave me wheezing in some sooty iron lung?   Oh, and the irony of using my own works against me!  Die, Poignant Boy!</p>

	<p>To give you an idea of what I mean, here are a few underhanded concepts that could seriously kill my willpower and force me to reconsider things like existence.</p>

	<p><strong><span class="caps">IDEA ONE</span>: BIG <span class="caps">TOBACCO</span></strong></p>

	<p>Buy a cigarette company.  Use my cartoon foxes to fuel an aggressive ad campaign.   Here&#8217;s a billboard for starters:</p>

	<p><img src="i/the.foxes-0a.gif" title="Addiction is like Pokemon!" alt="Addiction is like Pokemon!" /></p>

	<p>Make it obvious that you&#8217;re targeting children and the asthmatic.  Then, once you&#8217;ve got everyone going, have the <strong>truth</strong> people do an expose on me and my farm of inky foxes.</p>

	<blockquote>
		<p><strong>Sensible Hipster Standing on Curb in Urban Wilderness</strong>: He calls himself the lucky stiff.</p>
	</blockquote>

	<blockquote>
		<p>(Pulls aside curtain to reveal grey corpse on a gurney.)</p>
	</blockquote>

	<blockquote>
		<p><strong>Hipster</strong>: Some stiffs ain&#8217;t so lucky.</p>
	</blockquote>

	<blockquote>
		<p>(Erratic zoom in.  Superimposed cartoon foxes for subliminal Willy Wonka mind trip.)</p>
	</blockquote>

	<p>Yo.  Why you gotta dis Big Smokies like dat, Holmes?</p>

	<p><strong><span class="caps">IDEA TWO</span>: HEY, <span class="caps">FIRING SQUAD</span></strong></p>

	<p>Like I said, start selling copies of my book, but corrupt the text.  These altered copies would contain numerous blatant (and libelous) references to government agencies, such as the U.S. Marshals and the Pentagon.  You could make me look like a complete traitor.  Like I have all these plans to, you know, kill certain less desirable members of the U.S. Marshals or the Pentagon.</p>

	<p>Not that there are any less desirable members of the U.S. Marshals or the Pentagon.  Yeah, I didn&#8217;t mean it like that.</p>

	<p>Oh, crap.</p>

	<p>Oh, crap.  Oh, crap.  Oh, crap.</p>

	<p>Turn off the lights.  Get down.</p>

	<p><strong><span class="caps">IDEA THREE</span>: BILLBOARDS, <span class="caps">PART II</span></strong></p>

	<p>How about making fun of asthmatics directly?</p>

	<p><img src="i/the.foxes-0b.gif" title="Call it a puffer! ROFL!" alt="Call it a puffer! ROFL!" /></p>

	<p><strong><span class="caps">IDEA FOUR</span>: ALEC <span class="caps">BALDWIN</span></strong></p>

	<p>Adapt the book into a movie.  And since, you know, I&#8217;m a character in this book,  you could get someone like Alec Baldwin to play me.  Someone who&#8217;s at a real lowpoint in his career.</p>

	<p>You could make it seem like I did tons of drugs.  Like I was insane to work with. Like I kept firing people and locking them in the scooter room and making them wear outfits made of bread.  Yeah, like I could actually be <em>baking</em> people into the outfits.</p>

	<p>You could have this huge mold that I strap people into.  Then, I pour all the dough on them and actually bake them until the bread has risen and they&#8217;ve almost died. And when the television crews come and I&#8217;m on Good Morning America, they&#8217;ll ask, &#8220;So, how many people have you employed in the production of your book?&#8221;  And I&#8217;d respond, &#8220;A baker&#8217;s dozen!&#8221; and erupt into that loud maniacal laughing that would force audience members to cup their hands over their ears.</p>

	<p>Of course, in the throes of my insanity, I would declare war on the world.  The bread people would put up quite a fight.  Until the U.S. Marshals (or the Pentagon) engineer a giant robotic monkey brain (played by Burt Lancaster) to come after me.</p>

	<p>Here&#8217;s where you&#8217;ll make me look completely lame.  Not only will I sacrifice all of the bread people (the Starchtroopers) to save myself, not only will I surrender to the great monkey brain like a coward, but when I narrowly escape, I&#8217;ll yell at the audience.  Screaming insistently that it&#8217;s <em>MY</em> movie and no one should see it any more, I&#8217;ll rip the screen in half and the film projector will spin with its reel flapping in defeat.  And that will be the end of the movie.  People will be <em>so</em> pissed.</p>

	<p>Now, I&#8217;ve got to thinking.  See, and actually, Alec Baldwin did a decent voiceover in <em>The Royal Tenenbaums</em>.  His career might be okay.  You might not want to use him. He might not do it.</p>

	<p>Tell ya what.  I&#8217;ll play the part.  I&#8217;ve made a career out of lowpoints.<br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    
        
        <a name="section2" />
        <h2>2. The Parts of Speech</h2>

        <p>Just like the white stripe down a skunk&#8217;s back and the winding, white train of a bride, many of Ruby&#8217;s parts of speech have visual cues to help you identify them.  Punctuation and capitalization will help your brain to see bits of code and feel intense recognition. Your mind will frequently yell <em>Hey, I know that guy!</em>  You&#8217;ll also be able to name-drop in conversations with other Rubyists.</p>

	<p>Try to focus on the look of each of these parts of speech.  The rest of the book will detail the specifics.  I give short descriptions for each part of speech, but you don&#8217;t have to understand the explanation.  By the end of this chapter, you should be  able to recognize every part of a Ruby program.</p>

	<h3>Variables</h3>

	<p>Any plain, lowercase word is a variable in ruby.  Variables may consist of letters, digits and underscores.</p>

	<blockquote>
		<p><code>x</code>, <code>y</code>, <code>banana2</code> or <code>phone_a_quail</code> are examples.</p>
	</blockquote>

	<p>Variables are like nicknames.  Remember when everyone used to call you Stinky Pete? People would say, &#8220;Get over here, Stinky Pete!&#8221;  And everyone miraculously knew that  Stinky Pete was you.</p>

	<p>With variables, you give a nickname to something you use frequently.  For instance, let&#8217;s say you run an orphanage.  It&#8217;s a mean orphanage.  And whenever Daddy Warbucks comes to buy more kids, we insist that he pay us <strong>one-hundred twenty-one dollars and eight cents</strong> for the kid&#8217;s teddy bear, which the kid has become attached to over in the darker moments of living in such nightmarish custody.</p>

	<blockquote>
		<p><code>teddy_bear_fee = 121.08</code></p>
	</blockquote>

	<p>Later, when you ring him up at the cash register (a really souped-up cash register which runs Ruby!), you&#8217;ll need to add together all his charges into a <strong>total</strong>.</p>

	<blockquote>
		<p><code>total = orphan_fee + teddy_bear_fee + gratuity</code></p>
	</blockquote>

	<p>Those variable nicknames sure help.  And in the seedy underground of child sales, any help is appreciated I&#8217;m sure.</p>

	<p><img src="i/the.foxes-4a.gif" title="They mock my examples." alt="They mock my examples." /></p>

	<h3>Numbers</h3>

	<p>The most basic type of number is an <em>integer</em>, a <strong>series of digits</strong> which can start with a <strong>plus or minus sign</strong>.</p>

	<blockquote>
		<p><code>1</code>, <code>23</code>, and <code>-10000</code> are examples.</p>
	</blockquote>

	<p>Commas are not allowed in numbers, but underscores are.  So if you feel the need to mark your thousands so the numbers are more readable, use an underscore.</p>

	<blockquote>
		<p><code>population = 12_000_000_000</code></p>
	</blockquote>

	<p>Decimal numbers are called <em>floats</em> in Ruby.  Floats consist of numbers with <strong>a decimal place</strong> or <strong>scientific notation</strong>.</p>

	<blockquote>
		<p><code>3.14</code>, <code>-808.08</code> and <code>12.043e-04</code> are examples.</p>
	</blockquote>

	<h3>Strings</h3>

	<p>Strings are any sort of characters (letters, digits, punctuation) surrounded by quotes.  Both single and double <strong>quotes</strong> are used to create strings.</p>

	<blockquote>
		<p><code>"sealab"</code>, <code>'2021'</code>, or <code>"These cartoons are hilarious!"</code> are examples.</p>
	</blockquote>

	<p>When you enclose characters in quotes, they are stored together as a single string.</p>

	<p>Think of a reporter who is jotting down the mouthnoises of a rambling celebrity.  &#8220;I&#8217;m a lot wiser,&#8221; says Avril Lavigne.  &#8220;Now I know what the business is like&#8212;what you have to do and how to work it.&#8221; </p>

<pre>
  avril_quote = "I'm a lot wiser.  Now I know 
  what the business is like -- what you have 
  to do and how to work it." 
</pre>

	<p>So, just as we stored a number in the <strong>teddy_bear_fee</strong> variable, now we&#8217;re storing a collection of characters (a string) in the <strong>avril_quote</strong> variable.  The reporter sends this quote to the printers, who just happen to use Ruby to operate their printing press.</p>

	<blockquote>
		<p><code>Tabloid.print oprah_quote</code></p>
	</blockquote>

	<blockquote>
		<p><code>Tabloid.print avril_quote</code></p>
	</blockquote>

	<blockquote>
		<p><code>Tabloid.print justin_timberlake_pix</code></p>
	</blockquote>

	<p><img src="i/the.foxes-4b.gif" title="They desire to be in my examples." alt="They desire to be in my examples." /></p>

	<h3>Symbols</h3>

	<p>Symbols are words that look just like variables.  Again, they may contain letters, digits, or underscores.  But they <strong>start with a colon</strong>.</p>

	<blockquote>
		<p><code>:a</code>, <code>:b</code>, or <code>:ponce_de_leon</code> are examples.</p>
	</blockquote>

	<p>Symbols are lightweight strings.  Usually, symbols are used in situations where you need a string but you won&#8217;t be printing it to the screen.</p>

	<p>You could say a symbol is a bit easier on the computer.  It&#8217;s like an antacid.  The colon indicates the bubbles trickling up from your computer&#8217;s stomach as it digests the symbol.  Ah.  Sweet, sweet relief.</p>

	<p><img src="i/the.foxes-4c.gif" title="Chunky bacon!!" alt="Chunky bacon!!" /></p>

	<h3>Constants</h3>

	<p>Constants are words like variables, but constants are <strong>capitalized</strong>.  If variables are the nouns of Ruby, then think of constants as the proper nouns.</p>

	<blockquote>
		<p><code>Time</code>, <code>Array</code> or <code>Shake_It_Like_A_Polaroid_Picture</code> are examples.</p>
	</blockquote>

	<p>In English, proper nouns are capitalized.  The Empire State Building.  You can&#8217;t just move The Empire State Building.  You can&#8217;t just decide that the Empire State Building is something else. Proper nouns are like that.  They refer to something very specific and usually don&#8217;t change over time.</p>

	<p>In the same way, constants can&#8217;t be changed after they are set.</p>

	<blockquote>
		<p><code>EmpireStateBuilding = "350 5th Avenue, NYC, NY"</code></p>
	</blockquote>

	<p>If we try to change the constant, Ruby will complain to us.  Such things are frowned upon.</p>

	<p><img src="i/the.foxes-4d.gif" title="Come on, chunky bacon." alt="Come on, chunky bacon." /></p>

	<h3>Methods</h3>

	<p>If variables and constants are the nouns, then methods are the verbs. Methods are usually attached to the end of variables and constants by a <strong>dot</strong>.  You&#8217;ve already  seen methods at work.</p>

	<blockquote>
		<p><code>front_door.open</code></p>
	</blockquote>

	<p>In the above, <strong>open</strong> is the method.  It is the action, the verb. In some cases, you&#8217;ll see actions chained together.</p>

	<blockquote>
		<p><code>front_door.open.close</code></p>
	</blockquote>

	<p>We&#8217;ve instructed the computer to open the front door and then immediately close it.</p>

	<blockquote>
		<p><code>front_door.is_open?</code></p>
	</blockquote>

	<p>The above is an action as well.  We&#8217;re instructing the computer to test the door to see if it&#8217;s open. The method could be called <code>Door.test_to_see_if_its_open</code>, but the <code>is_open?</code> name is succinct and  just as correct.  Both exclamation marks and question marks may be used in method names.</p>

	<h3>Method arguments</h3>

	<p>A method may require more information in order to perform its action.  If we want the computer to paint the door, we should provide a color as well.</p>

	<p>Method arguments are attached to the end of a method.  The arguments are usually surrounded by <strong>parentheses</strong> and separated by <strong>commas</strong>.</p>

	<blockquote>
		<p><code>front_door.paint( 3, :red )</code></p>
	</blockquote>

	<p>The above paints the front door 3 coats of red.</p>

	<p>Think of it as an inner tube the method is pulling along, containing its extra instructions. The parentheses form the wet, round edges of the inner tube.  The commas are the feet of each argument, sticking over the edge.  The last argument has its feet tucked under so they don&#8217;t show.</p>

	<p>Like a boat pulling many inner tubes, methods with arguments can be chained.</p>

	<blockquote>
		<p><code>front_door.paint( 3, :red ).dry( 30 ).close()</code></p>
	</blockquote>

	<p>The above paints the front door 3 coats of red, dries for 30 minutes, and closes the door.  Even though the last method has no arguments, you can still put parentheses if you like.  There is no use dragging an empty inner tube, so the parentheses are normally dropped.</p>

	<p>Some methods (such as <code>print</code>) are kernel methods.  These methods are used throughout Ruby.  Since they are so common, you won&#8217;t use the dot.</p>

	<blockquote>
		<p><code>print "See, no dot."</code></p>
	</blockquote>

	<h3>Class methods</h3>

	<p>Like the methods described above (also called <em>instance</em> methods), class methods are usually attached after variables and constants.  Rather than a dot, a <strong>double colon</strong> is used.</p>

	<blockquote>
		<p><code>Door::new( :oak )</code></p>
	</blockquote>

	<p>As seen above, the <code>new</code> class method is most often used to create things.  In the above example, we&#8217;re asking Ruby to make a new oak door for us.  Of course, Ruby has to have an understanding of how to make a door&#8212;as well as a wealth of timber, lumberjacks, and those long, wiggily, two-man saws.</p>

	<p><img src="i/the.foxes-4e.gif" title="Plenty of chunky bacon to go around." alt="Plenty of chunky bacon to go around." /></p>

	<h3>Global variables</h3>

	<p>Variables which begin with a <strong>dollar sign</strong> are global.</p>

	<blockquote>
		<p><code>$x</code>, <code>$1</code>, <code>$chunky</code> and <code>$CHunKY_bACOn</code> are examples.</p>
	</blockquote>

	<p>Most variables are rather temporary in nature.  Some parts of your program are like little houses. You walk in and they have their own variables.  In one house, you may have a <code>dad</code> that represents Archie, a travelling salesman and skeleton collector.  In another house, <code>dad</code> could represent Peter, a lion tamer with a great love for flannel.  Each house has its own meaning for <code>dad</code>.</p>

	<p>With global variables, you can be guaranteed that the variable is the same in every little house. The dollar sign is very appropriate.  Every American home respects the value of the dollar.  We&#8217;re crazy for the stuff.  Try knocking on any door in America and hand them cash.  I can guarantee you won&#8217;t get the same reaction if you knock on a door and offer Peter, a lion tamer with a great love for flannel.</p>

	<p>Global variables can be used anywhere in your program.  They never go out of sight.</p>

	<h3>Instance variables</h3>

	<p>Variables which begin with an <strong>at</strong> symbol are instance variables.</p>

	<blockquote>
		<p><code>@x</code>, <code>@y</code>, and <code>@only_the_chunkiest_cut_of_bacon_I_have_ever_seen</code> are examples.</p>
	</blockquote>

	<p>These variables are often used to define the attributes of something.  For example, you might provide Ruby with the width of the <code>front_door</code> by setting the <code>@width</code> variable inside that <code>front_door</code>.  Instance variables are used to define characteristics of a single object in Ruby.</p>

	<p>Think of the <strong>at</strong> symbol as meaning <strong>attribute</strong>.</p>

	<h3>Class variables</h3>

	<p>Variables which begin with <strong>double at</strong> symbols are class variables.</p>

	<blockquote>
		<p><code>@@x</code>, <code>@@y</code>, and <code>@@i_will_take_your_chunky_bacon_and_raise_you_two</code> are examples.</p>
	</blockquote>

	<p>Class variables, too, are used to define attributes.  But rather than defining an attribute for a single object in Ruby, class variables give an attribute to many related objects in Ruby.  If instance variables set attributes for a single <code>front_door</code>, then class variables  set attributes for everything that is a <code>Door</code>.</p>

	<p>Think of the <strong>double at</strong> prefix as meaning <strong>attribute all</strong>.  Additionally, you can think of a swarm of <strong>AT-ATs</strong> from <em>Star Wars</em>, which are all commanded by Ruby.  You change a class variable and not just one changes, they all change.</p>

	<p><img src="i/the.foxes-4f.gif" title="Woohoo! Chunky bacon accomplished!" alt="Woohoo! Chunky bacon accomplished!" /></p>

	<h3>Blocks</h3>

	<p>Any code surrounded by <strong>curly braces</strong> is a block.</p>

	<blockquote>
		<p><code>{ print "Yes, I've used chunky bacon in my examples, but never again!" }</code> is an example.</p>
	</blockquote>

	<p>With blocks, you can group a set of instructions together so that they can be passed around your program.   The curly braces give the appearance of crab pincers that have snatched the code and are holding it together.  When you see these two pincers, remember that the code inside has been pressed into a single unit.</p>

	<p>It&#8217;s like one of those little Hello Kitty boxes they sell at the mall that&#8217;s stuffed with tiny pencils and microscopic paper, all crammed into a glittery transparent case that can be concealed in your palm for covert stationary operations.  Except that blocks don&#8217;t require so much squinting.</p>

	<p>The curly braces can also be traded for the words <strong>do</strong> and <strong>end</strong>, which is nice if your block is longer than one line.</p>

<pre>
  do
    print "Much better." 
    print "Ah.  More space!" 
    print "My back was killin' me in those crab pincers." 
  end
</pre>

	<h3>Block arguments</h3>

	<p>Block arguments are a set of variables surrounded by <strong>pipe</strong>  characters and separated by <strong>commas</strong>.</p>

	<blockquote>
		<p><code language="en">|x|</code>, <code>|x,y|</code>, and <code>|up, down, all_around|</code> are examples.</p>
	</blockquote>

	<p>Block arguments are used at the beginning of a block.</p>

	<blockquote>
		<p><code>{ |x,y| x + y }</code></p>
	</blockquote>

	<p>In the above example, <code>|x,y|</code> are the arguments.  After the arguments, we have a bit of code.  The expression <code>x + y</code> adds the two arguments together.</p>

	<p>I like to think of the pipe characters as representing a tunnel.  They give the appearance of a chute that the variables are sliding down.  (An <code>x</code> goes down spread eagle, while the <code>y</code> neatly crosses her legs.)  This chute acts as a passageway between blocks and the world around them.  </p>

	<p>Variables are passed through this chute (or tunnel) into the block.</p>

	<p><img src="i/the.foxes-4g.gif" title="And then, the dismal truth." alt="And then, the dismal truth." /></p>

	<h3>Ranges</h3>

	<p>A range is two values surrounded by <strong>parentheses</strong> and separated by <strong>an ellipsis</strong> (in the form of two or three dots).</p>

	<blockquote>
		<p><code>(1..3)</code> is a range, representing the numbers 1 through 3.</p>
	</blockquote>

	<blockquote>
		<p><code>('a'..'z')</code> is a range, representing a lowercase alphabet.</p>
	</blockquote>

	<p>Think of it as an accordion which has been squeezed down for carrying.  (Sure, you can build a great sense of self-worth by carrying around an unfolded accordion, but sometimes a person needs to wallow in self-doubt, carefully concealing the squeeze-box.)  The parentheses are the handles on the sides of a smaller, handheld accordion.  The dots are the chain, keeping the folds tightly closed.</p>

	<p>Normally, only two dots are used.  If a third dot is used, the last value in the range is excluded.</p>

	<blockquote>
		<p><code>(0...5)</code> represents the numbers 0 through 4.</p>
	</blockquote>

	<p>When you see that third dot, imagine opening the accordion slightly.  Just enough to let one note from its chamber.  The note is that end value.  We&#8217;ll let the sky eat it.</p>

	<h3>Arrays</h3>

	<p>An array is a list surrounded by <strong>square brackets</strong> and separated by <strong>commas</strong>.</p>

	<blockquote>
		<p><code>[1, 2, 3]</code> is an array of numbers.</p>
	</blockquote>

	<blockquote>
		<p><code>['coat', 'mittens', 'snowboard']</code> is an array of strings.</p>
	</blockquote>

	<p>Think of it as a caterpillar which has been stapled into your code.  The two square brackets are staples which keep the caterpillar from moving, so you can keep track of which end is the head and which is the tail.  The commas are the caterpillar&#8217;s legs, wiggling between each section of its body.</p>

	<p>Once there was a caterpillar who had commas for legs.  Which meant he had to allow a literary pause after each step.  The other caterpillars really respected him for it and he came to have  quite a commanding presence.  Oh, and talk about a philanthropist!  He was notorious for giving fresh leaves to those less-fortunate.</p>

	<p>Yes, an array is a collection of things, but it also keeps those things in a specific order.</p>

	<h3>Hashes</h3>

	<p>A hash is a dictionary surrounded by <strong>curly braces</strong>.  Dictionaries match words with their definitions.  Ruby does so with <strong>arrows</strong> made from an equals sign, followed by a greater-than sign.</p>

	<blockquote>
		<p><code>{'a' =&gt; 'aardvark', 'b' =&gt; 'badger'}</code> is an example.</p>
	</blockquote>

	<p>This time, the curly braces represent little book symbols.  See how they look like little, open books with creases down the middle?  They represent opening and closing our dictionary. </p>

	<p>Imagine our dictionary has a definition on each of its pages.  The commas represent the corner of each page, which we turn to see the next definition.  And on each page: a word followed by an arrow pointing to the definition.</p>

<pre>
  {
    'name' =&gt; 'Peter',
    'profession' =&gt; 'lion tamer',
    'great love' =&gt; 'flannel'
  }
</pre>

	<p>I&#8217;m not comparing hashes to dictionaries because you can only store definitions in a hash.  In the example above, I stored personal information for Peter, the lion tamer with a great love for flannel.  Hashes are like dictionaries because they can be very easy to search through.</p>

	<p>Unlike arrays, the items in a hash are not kept in a specific order.</p>

	<p><img src="i/the.foxes-5.gif" title="The foxes think silence will kill the comic." alt="The foxes think silence will kill the comic." /></p>

	<h3>Regular Expressions</h3>

	<p>A regular expression (or <em>regexp</em>) is a set of characters surrounded by <strong>slashes</strong>.</p>

	<blockquote>
		<p><code>/ruby/</code>, <code>/[0-9]+/</code> and <code>/^\d{3}-\d{3}-\d{4}/</code> are examples.</p>
	</blockquote>

	<p>Regular expressions are used to find words or patterns in text.  The slashes on each side of the expression are pins.  </p>

	<p>Imagine if you had a little word with pins on both side and you held it over a book.  You pass the word over the book and when it gets near a matching word, it starts blinking.  You pin the regular expression onto the book, right over the match and it glows with the letters of the matching word.</p>

	<p>Oh, and when you poke the pins into the book, the paper sneezes, <em>reg-exp!</em></p>

	<p>Regular expressions are much faster than passing your hand over pages of a book.  Ruby can use a regular expression to search volumes of books very quickly.</p>

	<h3>Operators</h3>

	<p>You&#8217;ll use the following list of operators to do math in Ruby or to compare things. Scan over the list, recognize a few.  You know, addition <code>+</code> and subtraction <code>-</code> and so on.</p>

<pre>
  ** !  ~  *  /  %  +  -  &#38;  
  &lt;&lt; &gt;&gt; |  ^  &gt;  &gt;= &lt;  &lt;= &lt;=&gt;
  || != =~ !~ &#38;&#38; += -=  =
  .. ... not and or          <br />
</pre>

	<h3>Keywords</h3>

	<p>Ruby has a number of built-in words, imbued with meaning.  These words cannot be used as variables or changed to suit your purposes.  Some of these we&#8217;ve already discussed.  They are in the safe house, my friend.  You touch these and you&#8217;ll be  served an official syntax error.</p>

<pre>
  alias   and     BEGIN   begin   break   case    class   def     defined 
  do      else    elsif   END     end     ensure  false   for     if 
  in      module  next    nil     not     or      redo    rescue  retry 
  return  self    super   then    true    undef   unless  until   when 
  while   yield 
</pre>

	<p>Good enough.  These are the illustrious members of the Ruby language.  We&#8217;ll be having quite the junket for the next three chapters, gluing these parts together into sly bits of (poignant) code.</p>

	<p>I&#8217;d recommend skimming all of the parts of speech once again.  Give yourself a broad view of them.  I&#8217;ll be testing your metal in the next section.</p>

	<p><img src="i/the.foxes-6.gif" title="Out in the pickup truck." alt="Out in the pickup truck." /><br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Seven Moments of Zen from My Life</h2>
        

        <ol>
	<li>8 years old.  Just laying in bed, thinking.  And I realize.   <em>There&#8217;s nothing stopping me from becoming a child dentist.</em></li>
		<li>21.  Found a pencil on the beach.  Embossed on it: <em>I cherish serenity.</em>  Tucked it away into the inside breast pocket of my suit jacket.  Watched the waves come and recede.</li>
		<li>22.  Found a beetle in my bathroom that was just about to fall into a heating vent. Swiped him up.  Tailored him a little backpack out of a leaf and a thread. In the backpack: a skittle and a <span class="caps">AAA</span> battery.  That should last him.  Set him loose out by the front gate.</li>
		<li>Three years of age.  Brushed aside the curtain.  Sunlight.</li>
		<li>14.  Riding my bike out on the pier with my coach who is jogging behind me as the sun goes down in the original Nintendo version of Mike Tyson&#8217;s Punch-Out.</li>
		<li>11.  Sick.  Watching Heathcliff on television.  For hours, it was Heathcliff. And he was able to come right up close to my face.  His head spun toward me. His face pulsed back and forth, up close, then off millions of miles away. Sound was gone.  In fractions of a second, Heathcliff filled the universe, then blipped off to the end of infinity.  I heard my mother&#8217;s voice trying to cut through the cartoon.  Heathclose, Heathaway, Heathclose, Heathaway. It was a religious rave with a cat strobe and muffled bass of mother&#8217;s voice. (I ran a fever of 105 that day.)</li>
		<li>18.  Bought myself a gigapet.  A duck.  Fed it for awhile.  Gave it a bath. Forgot about it for almost a couple months.  One day, while cleaning, I found a chain and he was there on the end.  Hey, little duck.  Mad freaky, hoppin&#8217; around with his hair out, squawking diagonal lines.  In a tuxedo.</li>
	</ol>
        <h1>sidebar!</h1>
        </div>

    
    
        
        <a name="section3" />
        <h2>3. If I Haven't Treated You Like a Child Enough Already</h2>

        <p>I&#8217;m proud of you.   Anyone will tell you how much I brag about you.  How I go on and on about this great anonymous person out there who scrolls and reads and scrolls and reads.  &#8220;These kids,&#8221; I tell them.  &#8220;Man, these kids got heart.  I never&#8230;&#8221;  And I can&#8217;t even finish a sentence because I&#8217;m absolutely blubbering.</p>

	<p>And my heart glows bright red under my filmy, translucent skin and they have to administer 10cc  of JavaScript to get me to come back.  (I respond well to toxins in the blood.)  Man, that stuff will  kick the peaches right out your gills!</p>

	<p>So, yes.  You&#8217;ve kept up nicely.  But now I must begin to be a brutal schoolmaster. I need to start seeing good marks from you.  So far, you&#8217;ve done nothing but move your eyes around a lot.  Okay, sure, you did some exceptional reading aloud earlier.  Now we need some comprehension skills here, Smotchkkiss.</p>

	<p><strong>Say aloud each of the parts of speech used below.</strong></p>

	<blockquote>
		<p><code>5.times { print "Odelay!" }</code></p>
	</blockquote>

	<p>You might want to even cover this paragraph up while you read, because your eyes might want to sneak to the answer.  We have a <em>number</em> <code>5</code>, followed by a <em>method</em> <code>.times</code>.  Then, the first crab pincers of a <em>block</em>.  The kernel <em>method</em> <code>print</code> has no dot and is followed by a <em>string</em> <code>"Odelay!"</code>.  The final crab pincers close our <em>block</em>.</p>

	<p><strong>Say aloud each of the parts of speech used below.</strong></p>

	<blockquote>
		<p><code>exit unless "restaurant".include? "aura"</code></p>
	</blockquote>

	<p>Like the <code>print</code> method, <code>exit</code> is a kernel <em>method</em>.  If you were paying attention during the big list of keywords, you&#8217;ll know that <code>unless</code> is just such a <em>keyword</em>.  The <em>string</em> <code>"restaurant"</code> is clung to by the <em>method</em> <code>include?</code>.  And finally, the string <code>"aura"</code>.</p>

	<p><strong>Say aloud each of the parts of speech used below.</strong></p>

	<blockquote>
		<p><code>[toast, cheese, wine].each { |food| eat food }</code></p>
	</blockquote>

	<p>This caterpillar partakes of finer delicacies.  An <em>array</em> starts this example.  In the array, three <em>variables</em> <code>toast</code>, <code>cheese</code>, and <code>wine</code>.  The whole array is trailed by a <em>method</em> <code>each</code>.  </p>

	<p>Inside of a <em>block</em>, the <em>block argument</em> <code>food</code>, travelling down its little waterslide into the block.  The <em>method</em> <code>eat</code> then is able to use the block argument, which has become <em>variable</em> <code>food</code>.</p>

	<p>Look over these examples once again.  Be sure you recognize the parts of speech used.  They each have a distinct look, don&#8217;t they?  Take a deep breath, press firmly on your temples.  Now, let&#8217;s dissect a cow&#8217;s eye worth of code.<br />
</p>

    
    
        
        <a name="section4" />
        <h2>4. An Example to Help You Grow Up</h2>

        <p><img src="i/the.foxes-7.gif" title="Gettin' cabin fever." alt="Gettin' cabin fever." /></p>

	<p><strong>Say aloud each of the parts of speech used below.</strong></p>

<pre>
  require 'net/http'
  Net::HTTP.start( 'www.ruby-lang.org', 80 ) do |http|
      print( http.get( '/en/LICENSE.txt' ).body )
  end
</pre>

	<p>The first line is a method call.  The <em>method</em> called <code>require</code> is used.  A <em>string</em> is passed to the method containing <code>'net/http'</code>.  Think of this first line of code as a sentence.  We have told Ruby to load some helper code, the <code>Net::HTTP</code> library.</p>

	<p>The next three lines all go together.  The <em>constant</em> <code>Net::HTTP</code> refers to the library we loaded above. We are using the <em>method</em> <code>start</code> from the library.  Into the method, we&#8217;re sending a <em>string</em> <code>'www.ruby-lang.org'</code> and the <em>number</em> <code>80</code>.</p>

	<p>The word <code>do</code> opens a <em>block</em>.  The block has one <em>block variable</em> <code>http</code>.  Inside the block, the <em>method</em> <code>print</code> is called.  What is being printed?</p>

	<p>From the <em>variable</em> <code>http</code>, the <em>method</em> <code>get</code> is called.  Into <code>get</code>, we pass a <em>string</em> containing the path <code>'/en/LICENSE.txt'</code>.  Now, notice that another method is chained onto <code>get</code>.  The <em>method</em> <code>body</code>.  Then, the block closes with <code>end</code>.</p>

	<p>Doing okay?  Just out of curiousity, can you guess what this example does?  Hopefully, you&#8217;re seeing  some patterns in Ruby.  If not, just shake your head vigorously while you&#8217;ve got these examples in  your mind.  The code should break apart into manageable pieces.</p>

	<p>For example, this pattern is used a number of times:</p>

	<blockquote>
		<p><em>variable</em> . <em>method</em> ( <em>method arguments</em> )</p>
	</blockquote>

	<p>You see it inside the block:</p>

	<blockquote>
		<p><code>http.get( '/en/LICENSE.txt' )</code></p>
	</blockquote>

	<p>We&#8217;re using Ruby to get a web page.  You&#8217;ve probably used <span class="caps">HTTP</span> with your web browser.  <span class="caps">HTTP</span> is the Hypertext Transfer Protocol.  <span class="caps">HTTP</span> is used to transfer web pages across the internet.  Conceptualize a bus driver that can drive across the internet and bring back web pages for us.  On his hat are stitched the letters <span class="caps">HTTP</span>.</p>

	<p>The variable <code>http</code> is that bus driver.  The <em>method</em> is a message to the bus driver.  Go <code>get</code> the web page called <code>/en/LICENSE.txt</code>.</p>

	<p>So where you see the chain of methods:</p>

	<blockquote>
		<p><code>http.get( '/en/LICENSE.txt' ).body</code></p>
	</blockquote>

	<p>Since we&#8217;ll be getting back a web page from the <code>http</code> bus driver, you can read this in your brain as:</p>

	<blockquote>
		<p><em>web page</em> .body</p>
	</blockquote>

	<p>And this bit of code:</p>

	<blockquote>
		<p><code>print( http.get( '/en/LICENSE.txt' ).body )</code></p>
	</blockquote>

	<p>This code gets the web page.  We send a <code>body</code> message to the web page, which gives us all the <span class="caps">HTML</span> in a <em>string</em>.  We then <code>print</code> that string.  See how the basic dot-method pattern happens in a chain.  The next chapter will explore all these sorts of patterns in Ruby.  It&#8217;ll be good fun.</p>

	<p>So, what does this code do?  It prints the <span class="caps">HTML</span> for the Ruby home page to the screen.  Using  an web-enabled bus driver.<br />
</p>

    
    
        
        <a name="section5" />
        <h2>5. And So, The Quick Trip Came To An Eased, Cushioned Halt</h2>

        <p><img src="i/the.foxes-8.gif" title="Running after the truck." alt="Running after the truck." /></p>

	<p>So now we have a problem.  I get the feeling that you are enjoying this way too much. And you haven&#8217;t even hit the chapter where I use jump-roping songs to help you learn how to parse <span class="caps">XML</span>!</p>

	<p>If you&#8217;re already enjoying this, then things are really going bad.  Two chapters from now you&#8217;ll be writing your own Ruby programs.  In fact, it&#8217;s right about there that I&#8217;ll have you start writing your own blogging software, your own file-sharing network (a la BitTorrent), as well as a program that will instant-message you when you get e-mail.  And then, the mother of all scripts: a program that will spider the entire internet for <span class="caps">MIDI</span> files!</p>

	<p><img src="i/graph-1.gif" align="right" title="Proof has been extracted from the pudding." alt="Proof has been extracted from the pudding." /></p>

	<p>And you know (you&#8217;ve got to know!) that this is going to turn into an obsession.  First, you&#8217;ll completely forget to take the dog out.  It&#8217;ll be standing by the screen door, darting its head about, as your eyes devour the code, as your fingers slip messages to the computer.</p>

	<p>Thanks to your neglect, things will start to break.  Your mounds of printed  sheets of code will cover up your air vents.  Your furnace will choke.  The trash will pile-up: take-out boxes you hurriedly ordered in, junk mail you couldn&#8217;t care to dispose of.  Your own uncleanliness will pollute the air.  Moss will infest the rafters, the water will clog, animals will let themselves in, trees will come up through the foundations.</p>

	<p>But your computer will be well-cared for.  And you, Smotchkkiss, will have nourished it with your knowledge. In the eons you will have spent with your machine, you will have become part-CPU.  And it will have become part-flesh.  Your arms will flow directly into its ports.  Your eyes will accept the video directly from <span class="caps">DVI</span>-24 pin.  Your lungs will sit just above the processor, cooling it.</p>

	<p>And just as the room is ready to force itself shut upon you, just as all the overgrowth swallows you and your machine, you will finish your script.  You and the machine together will run this latest Ruby script, the product of your obsession.  And the script will fire up chainsaws to trim the trees, hearths to warm and regulate the house.  Builder nanites will rush from your script, reconstructing your quarters, retiling, renovating, chroming, polishing, disinfecting.  Mighty androids will force your crumbling house into firm, rigid architecture.  Great pillars will rise, statues chiseled.  You will have dominion over this palatial estate and over the encompassing mountains and islands of your stronghold.</p>

	<p>So I guess you&#8217;re going to be okay.  Whatdya say?  Let&#8217;s get moving on this script of yours?<br />
</p>

    
    

    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>4.</h3>
        <h1>Floating Little Leaves of Code</h1>
        <p><img src="i/chapter.poignant.guide-4.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    

        <p><img src="i/the.elf-1.gif" title="Impossibly deep in the caverns of Ambrose... the Elf with a pet ham!" alt="Impossibly deep in the caverns of Ambrose... the Elf with a pet ham!" /><br />
<img src="i/the.elf-2.gif" title="...and the cat Trady Blix." alt="...and the cat Trady Blix." /></p>

	<p>I&#8217;ve never seen the ham do anything but leak juice.  Today, our business in Ambrose Caverns is with the elf.  He is a crucial part of the next lessons. Let&#8217;s all make him feel welcome. Go start warming up your listening hats!   (And please change out of those ridiculous stirrup pants.)</p>

	<p>A prompt warning: this lesson is much slower.  Stay with it.  This will be a long, deep breath. The most crucial stage of your instruction.  It may seem like you&#8217;re not learning much code at first.  You will be learning concepts.  By the end of this chapter, you will know Ruby&#8217;s beauty.  The coziness of the code will become a down sleeping bag for your own solace.<br />
</p>

    
    
        
        <a name="section1" />
        <h2>1. The Leaf as a Status Symbol in Ambrose</h2>

        <p>Alright, Elf.  Give us a quick rundown of the currency issues you&#8217;ve faced there in your kingdom.</p>

	<p><img src="i/the.elf-3.gif" title="Blue Crystals got the shaft." alt="Blue Crystals got the shaft." /></p>

	<p>Yeah, that&#8217;s not the way I remember it.  This Elf was paging me constantly.  When I refused to call him back, he somehow left a message on my pager.  Meaning: it beeped a couple times and then printed out a small slip of paper.  The slip said something to the effect of, &#8220;Get down here quick!&#8221; and also, &#8220;We&#8217;ve got to rid the earth of this scourge of enterpreneurial caterpillars, these twisted insect vikings are suffocating my blue crystals!&#8221; </p>

	<p>Lately, the exchange rate has settled down between leaves and crystals.  One treegrown note is worth five crystals.  So the basic money situation looks like this:</p>

<pre>
  blue_crystal = 1
  leaf_tender = 5
</pre>

	<p>This example is, like, <em>totally</em> last chapter.  Still.  It&#8217;s a start.  We&#8217;re setting two <em>variables</em>. The <strong>equals sign</strong> is used for <em>assignment</em>.</p>

	<p>Now <code>leaf_tender</code> represents the number <code>5</code> (as in: five blue crystals.)  This concept right here is <strong>half of Ruby</strong>.  We&#8217;re <em>defining</em>.  We&#8217;re <em>creating</em>.  This is half of the work.   Assignment is the most basic form of defining.</p>

	<p>You can&#8217;t complain though, can you Elf?  You&#8217;ve built an empire from cashing your blue crystals into the new free market among the forest creatures.  (And even though he&#8217;s an elf to us, he&#8217;s a tall monster to them.)</p>

	<p><img src="i/the.elf-4.jpg" title="Animal Perfect, LLC" alt="Animal Perfect, LLC" /><br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>The Scarf Eaters</h2>
        

        <p>I hate to intrude upon your instruction, but I&#8217;ve already walked all over it enough to  warrant some further disregard.  Can I go over my next project with you?</p>

	<p>I&#8217;ve pledged to write another book.  (<em>Trombones</em>.)  The good news is that I won&#8217;t actually be writing any of it.  You won&#8217;t have to endure any more of this inane blathering.</p>

	<p>It&#8217;s over between me and words.  I&#8217;d love to stick around and exploit them each, one after another, but it&#8217;s all becoming quite predictable, wouldn&#8217;t you say?  Eventually, they will all be used and I&#8217;d have to come up with fake words and that would be way too cnoofy.</p>

	<p>Now.  The deal isn&#8217;t cut yet, but I&#8217;m in negotiations with Anna Quindlen to do my ghost writing. We&#8217;re tag-teaming on a book that&#8217;s going to blow the (Poignant) Guide right out of your hands.  To put it bluntly, the Guide will be worthless.  You won&#8217;t be able to pile enough  pomegranates on top of the thing.</p>

	<p>So this new book.  The Scarf Eaters.  It&#8217;s a coming-of-age novel.  But it&#8217;s also a beginner&#8217;s guide to Macromedia Flash.  It&#8217;s like Judy Blume crossed Praystation.  It&#8217;s like 0sil8 starring Hillary Duff.</p>

	<p>I don&#8217;t want to give away the plot at all, but to tug your appetite I&#8217;ll just say this: one kid talks to his dead brother in ActionScript.  More to come.<br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>Nonono.  Hang on a sec.  You&#8217;re not ready for what the Elf here is doing in his caves. You&#8217;ll think it&#8217;s all positively inhumane, naughty, sick, tweeested, yada yada.</p>

	<h3> Now You&#8217;re Going to Hear the Animal Perfect Mission Statement Because This Is A Book And We Have Time And No Rush, Right?</h3>

	<p>Back, back, way back before speedboats, I owned a prize race horse who took a stumble on  the track.  She did ten front flips and crashed into a guy who was carrying a full jar  of mayonnaisse.  We had blood and mayonnaisse up and down the track.  Needless to say,  she was a disaster.</p>

	<p>The vet took one look at her and swore she&#8217;d never walk again.  Her legs were gone and the vet wouldn&#8217;t allow a legless horse to just sit around.  We&#8217;d need to put her down.   He swore his life and career on it, insisting we divide into two parallel lines.  The people  who could not refute the doctor&#8217;s claims on one side; those too stubborn to accept his  infallable medical reasoning on the other.  The Elf, his pet ham, and I were the only  ones in that second line.</p>

	<p>So while the others heaped up trophies and great wreaths around the horse, bidding it a  fond farewell before the bullet came to take him home, the Elf and I frantically pawed the Internet for  answers.  We took matter into our own hands, cauterizing her leg wounds with live crawdads.   It worked great!  We now had a horse again.   Or at least: a horse body with a crustaceous abdominal frosting.  </p>

	<p>She scurried everywhere after that and lived for years in pleasantly moist underground cavities.</p>

	<p>Animal Perfect is now the future of animal enhancement.  They build new animals and salvage  old-style animals for parts.  Of course, they&#8217;ve come a long ways. When Animal Perfect started, you&#8217;d see a full-grown bear walk into Animal Perfect and you&#8217;d see a full-grown bear with sunglasses walk out.  Completely cheesy.</p>

	<p>Stick around and you&#8217;ll see a crab with <em>his own jet pack</em>.  That&#8217;s a new 2004 model jetcrab.</p>

	<p>But now, the whole operation is up and running.  And the cleanliness of the place is astonishing. All the equipment is so shiny.  Everything is in chrome.  Oh, and all the staff have concealed weapons.  They&#8217;re trained to kill anyone who enters unannounced.  Or, if they run out of bullets, they&#8217;re trained to pistol whip anyone who enters unannounced.</p>

	<p>Elf, make me a starmonkey.</p>

	<p><img src="i/the.elf-5a.jpg" title="First, the star is caught." alt="First, the star is caught." /></p>

	<p>Some imaginary Ruby for you:</p>

	<blockquote>
		<p><code>pipe.catch_a_star</code></p>
	</blockquote>

	<p>Variable <code>pipe</code>.  Method <code>catch_a_star</code>.  A lot of Rubyists like to think of methods as a message. Whatever comes before the dot is handed the message.  The above code tells the <code>pipe</code> to <code>catch_a_star</code>.</p>

	<p>This is the <strong>second half</strong> of Ruby.  Putting things in motion.  These things you define and create in the first half start to <em>act</em> in the second half.</p>

	<ol>
	<li>Defining things.</li>
		<li>Putting those things into action.</li>
	</ol>

	<p>So what if the star catching code works?  Where does the star go?</p>

	<blockquote>
		<p><code>captive_star = pipe.catch_a_star</code></p>
	</blockquote>

	<p>See, it&#8217;s up to you to collect the miserable, little star.  If you don&#8217;t, it&#8217;ll simply vanish. Whenever you use a method, you&#8217;ll always be given something back.  You can ignore it or use it.</p>

	<p><em>If you can learn to use the answers that methods give you back, then you will <strong>dominate</strong>.</em></p>

	<p><img src="i/the.elf-5b.jpg" title="Star is ratcheted to the monkey's face." alt="Star is ratcheted to the monkey's face." /></p>

	<p>Quickly then.</p>

	<blockquote>
		<p><code>starmonkey = ratchet.attach( captive_monkey, captive_star )</code></p>
	</blockquote>

	<p>The <code>ratchet</code> gets an <code>attach</code> message.  What needs to be attached?  The <em>method arguments</em>: the <code>captive_monkey</code> and the <code>captive_star</code>.  We are given back a <code>starmonkey</code>, which we have decided to hang on to.</p>

	<p><img src="i/the.elf-5c.gif" title="Frog on the hand." alt="Frog on the hand." /></p>

	<p>This is turning out to be such a short, little proggie that I&#8217;m just going to put it all together as one statement.</p>

	<blockquote>
		<p><code>starmonkey = ratchet.attach( captive_monkey, pipe.catch_a_star ) + deco_hand_frog</code></p>
	</blockquote>

	<p>See how <code>pipe.catch_a_star</code> is right in the arguments for the method?  The caught  star will get passed right to the ratchet.  No need to find a place to put it.  Just let it go.</p>

    
    
        
        <a name="section2" />
        <h2>2. Small and Nearly Worthless</h2>

        <p><img src="i/blix-1.gif" title="Law-va." alt="Law-va." /></p>

	<p>The hotel here in Ambrose is no good at all.  The beds are all lumpy. The elevator is tiny.  One guy put all his bags in the elevator and found out there wasn&#8217;t room for him.  He hit the button and chased up the stairs after it all.  But the stairwell turned out to be too narrow and his shoulders got wedged going up.  </p>

	<p>The soap mini-bars they give you are sized down for elves, so it&#8217;s impossible to work up a lather.  I hate it.  I keep mistaking them for contact lenses.</p>

	<p>I turned on the faucet and nothing came out.  Thing is: Ambrose is a place with magical properties, so I took a chance.  I put my hands under the spigot.  Invisible, warm wetness.  I felt the hurried sensation of running water, darting through my fingers.  When I took my hands away, they were dry and clean.</p>

	<p>It was an amazing nothingness to experience.  It was just like <code>nil</code>.</p>

	<h3>Nil</h3>

	<p>In Ruby, <code>nil</code> represents an emptiness.  It is <strong>without value</strong>.  It isn&#8217;t zero. Zero is a number.  </p>

	<p>It&#8217;s Ruby&#8217;s own walking dead, a flatlined keyword.  You can&#8217;t add to it, it doesn&#8217;t evolve.  But it&#8217;s terribly popular.  This skeleton&#8217;s smiling in all the pictures.</p>

	<blockquote>
		<p><code>plastic_cup = nil</code></p>
	</blockquote>

	<p>The above <code>plastic_cup</code> is <strong>empty</strong>.  You could argue that the <code>plastic_cup</code> contains something, a <code>nil</code>.  The <code>nil</code> represents the emptiness, though, so go ahead and call it empty.</p>

	<p>Some of you who have programmed before will be tempted to say the <code>plastic_cup</code> is <strong>undefined</strong>.  How about let&#8217;s not.  When you say a variable is undefined, you&#8217;re saying that Ruby simply has no recollection of the variable, it doesn&#8217;t know the var, it&#8217;s absolutely non-existent.</p>

	<p>But Ruby is aware of the <code>plastic_cup</code>.  Ruby can easily look in the <code>plastic_cup</code>. It&#8217;s <strong>empty</strong>, but not <strong>undefined</strong>.</p>

	<h3>False</h3>

	<p><img src="i/blix-neg.gif" align="left" title="Shape of a cat." alt="Shape of a cat." /></p>

	<p><em>The cat Trady Blix.  Frozen in emptiness.  Immaculate whiskers rigid.  Placid eyes of lake.  Tail of warm icicle.  Sponsored by a Very Powerful Pause Button.</em></p>

	<p>The darkness surrounding Blix can be called <strong>negative space</strong>.  Hang on to that phrase. Let it suggest that the emptiness has a negative connotation.  In a similar way, <code>nil</code> has a slightly sour note that it whistles.</p>

	<p>Generally speaking, <strong>everything in Ruby has a positive charge to it</strong>.  This spark flows through strings, numbers, regexps, all of it.  Only two keywords wear a shady cloak: <code>nil</code> and <code>false</code> draggin us down.</p>

	<p>You can <strong>test that charge</strong> with an <code>if</code> keyword.  It looks very much like the <code>do</code> blocks we saw in the last chapter, in that both end with an <code>end</code>.</p>

<pre>
  if plastic_cup
    print "Plastic cup is on the up 'n' up!" 
  end
</pre>

	<p>If <code>plastic_cup</code> contains either <code>nil</code> or <code>false</code>, you won&#8217;t see anything print to the screen.  They&#8217;re not on the <code>if</code> guest list.  So <code>if</code> isn&#8217;t going to run any of the code it&#8217;s protecting.</p>

	<p>But <code>nil</code> and <code>false</code> need not walk away in shame.  They may be of questionable character, but <code>unless</code> runs a smaller establishment that caters to the bedraggled. The <code>unless</code> keyword has a policy of <strong>only allowing those with a negative charge in</strong>. Who are: <code>nil</code> and <code>false</code>.</p>

<pre>
  unless plastic_cup
    print "Plastic cup is on the down low." 
  end
</pre>

	<p>You can also use <code>if</code> and <code>unless</code> at the <strong>end of a single line of code</strong>, if that&#8217;s all that is being protected.</p>

<pre>
  print "Yeah, plastic cup is up again!" if plastic_cup
  print "Hardly. It's down." unless plastic_cup
</pre>

	<p>And another nice trick: stack the <code>if</code> and <code>unless</code>.</p>

<pre>
  print "We're using plastic 'cause we don't have glass." if plastic_cup unless glass_cup
</pre>

	<p>This trick is a gorgeous way of expressing, <em>Do this only if <strong>a</strong> is true and <strong>b</strong> isn&#8217;t true</em>.</p>

	<p>Now that you&#8217;ve met <code>false</code>, I&#8217;m sure you can see what&#8217;s on next.<br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Make Your Own Starmonkey!</h2>
        

        <p>1.  Turn a mug upside-down.<br />
<img src="i/starmonkeycrafts-1.jpg" alt="" /><br />
2. Attach an apple with a rubber band.<br />
<img src="i/starmonkeycrafts-2.jpg" alt="" /><br />
3. Shove car keys into the sides of the apple.<br />
<img src="i/starmonkeycrafts-3.jpg" alt="" /><br />
4. Glue star face.<br />
<img src="i/starmonkeycrafts-4.jpg" alt="" /></p>

	<p>You have two complementary star faces waiting in your account.</p>

	<p style="text-align:center;"><img src="i/starmonkeycrafts-5.gif" alt="" /><br />
Standard, placid.</p>

	<p style="text-align:center;"><img src="i/starmonkeycrafts-6.gif" alt="" /><br />
Eating chalk.<br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <h3>True</h3>

	<blockquote>
		<p><code>approaching_guy = true</code></p>
	</blockquote>

	<p>I saw <code>true</code> at the hotel buffet tables today.  I cannot stand that guy. His stance is way too wide.  And you&#8217;ve never met anyone who planted his feet so hard in the ground.  He wears this corny necklace made out of shells.  His face exudes this brash confidence.  (You can tell he&#8217;s exerting all of his restraint just to keep from bursting into Neo flight.)</p>

	<p>To be honest, I can&#8217;t be around someone who always has to be right. This <code>true</code> is always saying, &#8220;A-OK.&#8221;  Flashing hang ten.  And seriously,  he loves that necklace.  Wears it constantly.</p>

	<p>As you&#8217;d suspect, he&#8217;s backstage at everything on the <code>if</code> event schedule.</p>

	<blockquote>
		<p><code>print "Hugo Boss" if true</code> acts like <code>print "Hugo Boss"</code>.</p>
	</blockquote>

	<p>Occassionally, <code>if</code> will haul out the velvet ropes to exercise some crowd control.   The <strong>double equals</strong> gives the appearance of a short link of ropes, right along the sides of a red carpet where only <code>true</code> can be admitted.</p>

<pre>
  if approaching_guy == true
    print "That necklace is classic." 
  end
</pre>

	<p>The double equals is simply <strong>an ID check</strong>.  Do the gentleman at both ends of this rope appear to match?</p>

	<p>In this way, you control who <code>if</code> lets in.  If you have a hard time getting along with <code>true</code> as I do, you can heartily welcome <code>false</code>.</p>

<pre>
  if approaching_guy == false
    print "Get in here, you conniving devil." 
  end
</pre>

	<p>Same goes for <code>unless</code>.  The gateway is yours.  Take possession of it.</p>

	<h3>Again, I Want You to Dominate</h3>

	<p>Now, you want a head trip?  <strong>The double equals sign is a method.</strong>  Can you guess how it works?  Here, check it out with the dot and parens:</p>

	<blockquote>
		<p><code>approaching_guy.==( true )</code></p>
	</blockquote>

	<p>Ruby allows the shortcut, though.  You can drop the dot and back away slowly.</p>

	<p>Now, do you remember what you need to do to <strong>dominate</strong> in Ruby?  <em>Use the answers the methods give you.</em></p>

<pre>
  if nil.==( true )
    print "This will never see realization." 
  end
</pre>

	<p>In the above, how is the method&#8217;s answer being used?</p>

	<p>Let&#8217;s take the statement <code>nil == true</code>.  This will fail every time.  No match.   When there&#8217;s no match, the double equals method answers with <code>false</code>.  A shake of the head. That answer is given to <code>if</code>, who can&#8217;t accept a <code>false</code>.  The <code>print</code> never sees realization.</p>

<pre>
  at_hotel = true
  email = if at_hotel
            "why@hotelambrose.com" 
          else
            "why@drnhowardcham.com" 
          end
</pre>

	<p>Even though <code>if</code> isn&#8217;t a method, <code>if</code> does give a return answer.  Look at the above and wonder over what happens when <code>at_hotel</code> is <code>true</code>.</p>

	<p>The <code>if</code> will return the answer given by the code it chooses to run.  In the case of  <code>at_hotel</code> being true, the first string, my e-mail address at Hotel Ambrose, will be returned.  The <code>else</code> keyword marks code which will run, should <code>if</code> fail.  If <code>at_hotel</code> is false, the <code>if</code> will answer with my e-mail address at Dr. N. Howard Clay&#8217;s office,  where I take my apprenticeship.</p>

	<p>Should you have several lines of code in an <code>if</code> or <code>unless</code>, <strong>only the answer from the last full statement will be used</strong>.</p>

<pre>
   email = if at_hotel
             address = "why" 
             address &lt;&lt; "@hotelambrose" 
             address &lt;&lt; ".com" 
           end
</pre>

	<p>Three lines of code inside the <code>if</code>.  The first line assigns a string with my name in it to a variable. The second and third lines add the rest of my e-mail address on to the end.  The <strong>double less-than <code>&lt;&lt;</code> is the concatenation operator</strong>.  To concatenate is to <strong>append</strong>, or <strong>add to the end</strong>.</p>

	<p>Just as we saw with the equality checker <code>==</code>, the concatenator is a method.  After adding to the end of the string, the concatenator also <strong>answers with that very string</strong>.  So, the third line, which could be read as <code>address.&lt;&lt;( ".com" )</code>, gives back <code>address</code>, which the <code>if</code> then hands back for <code>email</code>&#8217;s assignment.</p>

	<p>Here&#8217;s a question: what if the <code>if</code> fails?  What if <code>at_hotel</code> is false in the above example? Is anything returned?  Nothing is assigned to <code>email</code>, right?</p>

	<p>Yes, nothing is returned.  By which I mean: <code>nil</code> is returned.  And often <code>nil</code> is a very useful answer.</p>

<pre>
  print( if at_hotel.nil?
           "No clue if he's in the hotel." 
         elsif at_hotel == true
           "Definitely in." 
         elsif at_hotel == false
           "He's out." 
         else
           "The system is on the freee-itz." 
         end )
</pre>

	<p>You can use the <code>nil?</code> method on any value in Ruby.  Again, think of it as a message. To the value: &#8220;Are you nil?  Are you empty?&#8221; </p>

	<p>If <code>at_hotel</code> is empty, Ruby doesn&#8217;t have any idea if I&#8217;m in the hotel or not.  So <code>if</code> answers with the &#8220;No clue&#8221; string.  In order to handle the <code>true</code> or <code>false</code> possibilities, the <code>elsif</code> keyword is used.  While you can have only one <code>if</code> and one <code>else</code>, you can fill the inbetween with an exorbitant number of <code>elsif</code> keywords.  Each <code>elsif</code> acts as <strong>a further <code>if</code> test</strong>.  Checking for a positive charge.</p>

	<p>If you&#8217;re doing okay at this point, then you&#8217;re in tip-top shape for the rest of the book.  You have seen some pretty tough code in the last few examples.  You strong fellow.<br />
</p>

    
    
        
        <a name="section3" />
        <h2>3. Chaining Delusions Together</h2>

        <p><img src="i/the.elf-6.jpg" title="55,000 starmonkeys and one spirited Olympic hopeful." alt="55,000 starmonkeys and one spirited Olympic hopeful." /></p>

	<p>You finish reading the above comic and retire to your daybed for reflection. It&#8217;s one of those canopy affairs which is always logjammed with pillows.  You sit atop the pile, gazing out upon the world.  You see the tall smokestacks belching wide spools of fume and haze.  The tangled concourses of freeways smattered with swift, shimmering traffic is but a gently pulsing eye muscle from your vantage point.</p>

	<p>It is all so fantastic.  How the colors of the horizon spread across the landscape as a great mix of butter and grease with a tablespoon of vanilla extract.</p>

	<p>Yet, for all of the beauty which beckons for your attention, the images of the Elf and  his Olympic Hopeful return.  And more especially, that order for <strong>55,000</strong> starmonkeys.   <em>55,000 starmonkeys</em>, you think.  <em>Fifty-five Thousand</em>.</p>

	<p>You think of just the number itself.  <em>55,000</em>.  It&#8217;s walking down a road.  It might be in a forest, you don&#8217;t know for sure as your eyes are fixed right on the number itself.  It&#8217;s stopping and talking to people.  To tennis players, to a men&#8217;s choral group.  There is merriment and good  feeling.  When it laughs, its lower zeros quiver with glee.</p>

	<p>You want to talk to it.  You want to skip along that forest trail with it.  You want to climb aboard a jet bound to Brazil with it.  And after five days and four nights at the leisureful Costa do Sauipe Marriott Resort &#38; Spa, to marry it, to bear a family of 55,000 starmonkeys with it. To take possession of Nigeria with it.</p>

	<p>With a flying leap, you dismount your pillow tower of isolation.  Scrambling with the key, you unlock your roll top desk and pull out a sheet of paper, holding it firmly upon the desk.  You begin scribbling.</p>

	<blockquote>
		<p><em>Take possession of Nigeria with my new 55,000 starmonkeys</em>... <br />
<em>Over it, build Nigeria-sized <strong>vegetarians only</strong> casino and go-cart arena</em>...<br />
<em>Wings&#8230; we could have our own special sauce on the wings that&#8217;s different</em>...<br />
<em>Mustard + codeine = Smotchkkiss&#8217; Starry Starmonkey Glow Sauce</em>...<br />
<em>Franchise, franchise&#8230; logos</em>... <br />
<em>Employee instructional videos</em>... <br />
<em>When you give the customer change, let them reach inside the frog on your hand to get it</em>...  <br />
<em>If they have no change, at least put their reciept some place where they have to touch the frog</em>...  <br />
<em>We&#8217;re leveling the playing field here</em>...<br />
<em>Advertise cheap pizza, let&#8217;s make our money off soda</em>...<br />
<em>Collect all 4 frosted glasses</em>...</p>
	</blockquote>

	<p>Wow, the ideas are really coming out.  You literally had to smack yourself to stop.  We need to put these in a safe place.  Actually, we should store them on your computer and mangle the words.  You look out the window and watch for <span class="caps">FBI</span>.  I&#8217;m going to start this script.</p>

	<h3>The Flipping Script</h3>

<pre>
  print "Type and be diabolical: " 
  idea_backwards = gets.reverse
</pre>

	<p>Let this script be your confidante.  It will ask for evil plans and turn their letters backwards. The <code>gets</code> method is <strong>built into Ruby</strong>.  It&#8217;s a <strong>kernel method</strong> like <code>print</code>.  This method <code>gets</code> will pause Ruby to let you type.  When you hit <em>Enter</em>, <code>gets</code> will then stop paying attention to your keyboard punchings and answer back to Ruby with a string that contains everything you typed.<br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Get Ahead with The Tiger's Vest</h2>
        

        <p><a href="expansion-pak-1.html"><img src="i/ad-tiger.gif" alt="" border="0" /></a></p>

	<p>Want to start using Ruby alongside your reading?  Split your attention and head off to <a href="expansion-pak-1.html">Expansion Pak I: The Tiger&#8217;s Vest</a>, a trite mini-chapter which will aid you in installing Ruby.  In addition, you&#8217;ll learn how to use Irb and Ri, two teaching aids that come with Ruby which will really speed you up in your learning.<br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>The <code>reverse</code> method is then used on the string that <code>gets</code> is giving back.  The <code>reverse</code> method is part of the <code>String</code> class.  Which means that <strong>anything which is a string has the <code>reverse</code> method available</strong>.  More on classes in the next chapter, for now just know that <strong>a lot of methods are only available with certain types of values</strong>.</p>

	<p>I don&#8217;t think <code>reverse</code> is going to cut it.  The authorities only need to put a mirror to &#8220;airegiN fo noissessop ekaT.&#8221;  Bust us when starmonkeys start to touch down in Lagos.</p>

	<p>The capital letters give it away.  Maybe if we uppercase all letters in the string before we reverse it.</p>

<pre>
  idea_backwards = gets.upcase.reverse
</pre>

	<h3>Your Repetitiveness Pays Off</h3>

	<p>You hand me a legal pad, doused in illegible shorthand.  Scanning over it, I start to notice patterns.  That you seem to use the same set of words repeatedly in your musings.   Words like <em>starmonkey</em>, <em>Nigeria</em>, <em>firebomb</em>.  Some phrases even.  <em>Put the kabosh on.</em> That gets said a lot.</p>

	<p>Let us disguise these foul terms, my brother.  Let us obscure them from itching eyes that cry to know our delicate schemes and to thwart us from having great pleasure and many go-carts. We will replace them with the most innocent language.  New words with secret meaning.</p>

	<p>I start up a word list, a Ruby <code>Hash</code>, which contains these oft seen and dangerous words of yours. In the Hash, each dangerous word is matched up against a code word (or phrase).  The code word will be swapped in for the real word.</p>

<pre>
  code_words = {
    'starmonkeys' =&gt; 'Phil and Pete, those prickly chancellors of the New Reich', 
    'catapult' =&gt; 'chucky go-go', 'firebomb' =&gt; 'Heat-Assisted Living', 
    'Nigeria' =&gt; "Ny and Jerry's Dry Cleaning (with Donuts)",
    'Put the kabosh on' =&gt; 'Put the cable box on'
  }
</pre>

	<p>The words which are placed before the arrow are called <strong>keys</strong>.  The words after the arrows, the definitions, are often just called <strong>values</strong>.</p>

	<p>Notice the double quotes around <code>Ny and Jerry's Dry Cleaning (with Donuts)</code>.  Since a single quote is being used an apostrophe, we can&#8217;t use single quotes around the string.  (Although, you can use single quotes if you put a backslash before the apostrophe such as: <code>'Ny and Jerry\'s Dry Cleaning (with Donuts)'</code>.)</p>

	<p>Should you need to look up a specific word, you can do so by using the <strong>square brackets</strong> method.</p>

	<blockquote>
		<p><code>code_words['catapult']</code> will answer with the string <code>'chucky go-go'</code>.</p>
	</blockquote>

	<p>Look at the square brackets as if they are a wooden pallet the word is sitting upon. A forklift could slide its prongs into each side of the pallet and bring it down from a shelf back in the warehouse.  The word on the pallet is called the <em>index</em>. We are asking the forklift to find the index for us and bring back its corresponding value.</p>

	<p>If you&#8217;ve never been to a warehouse, you could also look at the brackets as handles. Imagine an industrious worker putting on his work gloves and hefting the index back to your custody.  If you&#8217;ve never used handles before, then I&#8217;m giving you about thirty seconds to find a handle and use it before I blow my lid.</p>

	<p>As with many of the other operators you&#8217;ve seen recently, the index brackets are simply a shortcut for a method.</p>

	<blockquote>
		<p><code>code_words.[]( 'catapult' )</code> will answer with the string <code>'chucky go-go'</code>.</p>
	</blockquote>

	<h3>Making the Swap</h3>

	<p>I went ahead and saved the Hash of code words to a file called <strong>wordlist.rb</strong>.</p>

<pre>
  require 'wordlist'

  # Get evil idea and swap in code words
  print "Enter your new idea: " 
  idea = gets
  code_words.each do |real, code| 
    idea.gsub!( real, code )
  end

  # Save the jibberish to a new file
  print "File encoded.  Please enter a name for this idea: " 
  idea_name = gets.strip
  File::open( "idea-" + idea_name + ".txt" ) do |f|
    f &lt;&lt; idea
  end
</pre>

	<p>Script starts by pulling in our word list.  Like <code>gets</code> and <code>print</code>, the <code>require</code> method is a kernel method, you can use it anywhere.  I give it the string <code>'wordlist'</code> and it will look for a file named <strong>wordlist.rb</strong>.</p>

	<p>After that, there are two sections.  I am marking these sections with comments, the lines that start with <strong>pound</strong> symbols.  Comments are <strong>ignored by Ruby</strong>, but are nice for jotting brief explanations.  </p>

	<p>As the comments tell us, the first section asks you for your evil idea and swaps in the new code words.  The second section saves the encoded idea into a new text file.</p>

<pre>
  code_words.each do |real, code| 
    idea.gsub!( real, code )
  end
</pre>

	<p>You see the <code>each</code> method?  The <code>each</code> method is all over in Ruby.   It&#8217;s available for Arrays, Hashes, even Strings.   Here, our <code>code_words</code> dictionary is kept in a Hash.  This <code>each</code> method will hurry through <strong>all the pairs of the Hash</strong>, one dangerous word matched with its code word, handing each pair to the <code>gsub!</code> method for the actual replacement.</p>

	<p>In Ruby, <code>gsub</code> is short for <em>global substitution</em>.  The method is used to search and replace. Here, we want to find all the occurences of a dangerous word and replace with its safe code word.  With <code>gsub</code>, you provide the <strong>word to find as the first argument</strong>, then the <strong>word to put in its place as the second argument</strong>.</p>

	<p>Why aren&#8217;t we hanging on to the answer from <code>gsub</code>?  Doesn&#8217;t <code>gsub</code> give us an answer back that we should keep?  You&#8217;d think the line would read:</p>

<pre>
  safe_idea = idea.gsub( real, code )
</pre>

	<p>Yes, with <code>gsub</code> we&#8217;d need to hang on to its answer.  We&#8217;re using a variation of <code>gsub</code> that is totally hyper.  Notice the <strong>exclamation mark</strong> on the <code>gsub!</code> used inside the <code>each</code> block.  The exclamation mark is a sign that <code>gsub!</code> is a bit of a zealot.  See, <code>gsub!</code> will go ahead and <strong>replace the words in <code>idea</code> directly</strong>.  When it&#8217;s done <code>idea</code> will contain the newly altered string and you won&#8217;t be able to find the old string.</p>

	<p>Call <code>gsub!</code> a <strong>destructive method</strong>.  It makes its changes to the value directly.  Whereas <code>gsub</code> will leave the value intact, answering back with a new string which contains the alterations. (Why must <code>gsub!</code> scream when he descends upon his prey?  Merciless assailant!)</p>

	<h3> Text Files of a Madman</h3>

	<p>Let us now save the encoded idea to a file.</p>

<pre>
  # Save the jibberish to a new file
  print "File encoded.  Please enter a name for this idea: " 
  idea_name = gets.strip
  File::open( 'idea-' + idea_name + '.txt', 'w' ) do |f|
    f &lt;&lt; idea
  end
</pre>

	<p>This section starts by asking you for a name by which the idea can be called.  This name is used to build a file name when we save the idea.</p>

	<p>The <code>strip</code> method is for strings.  This method <strong>trims spaces and blank lines</strong> from the <strong>beginning and end</strong> of the string.  This will remove the <em>Enter</em> at the end of the string you typed. But it&#8217;ll also handle spaces if you accidentally left any.</p>

	<p>After we have the idea&#8217;s name, we open a new, blank text file.  The file name is built by adding strings together.  If you typed in <code>'mustard-plus-codeine'</code>, then our math will be: <code>'idea-' + 'mustard-plus-codeine' + '.txt'</code>.  Ruby presses these into a single string. <code>'idea-mustard-plus-codeine.txt'</code> is the file.</p>

	<p>We&#8217;re using the class method <code>File::open</code> to create the new file.  Up until now, we&#8217;ve used several kernel methods to do our work.  We hand the <code>print</code> method a string and it prints the string on your screen.  One secret about kernel methods like <code>print</code>: they are actually <strong>class methods</strong>.</p>

	<blockquote>
		<p><code>Kernel::print( "55,000 Starmonkey Salute!" )</code></p>
	</blockquote>

	<p>What does this mean?  Why does it matter?  It means <code>Kernel</code> is the center of Ruby&#8217;s universe. Wherever you are in your script, <code>Kernel</code> is right beside you.  You don&#8217;t even need to spell <code>Kernel</code> out for Ruby.  Ruby knows to check <code>Kernel</code>.</p>

	<p>Most methods are more specialized than <code>print</code> or <code>gets</code>.  Take the <code>File::open</code> for example.  The creator of Ruby, Matz, has given us many different methods which which read, rename, or delete files.  They are all organized inside the <code>File</code> class.</p>

	<blockquote>
		<p><code>File::read( "idea-mustard-plus-codeine.txt" )</code> will answer back with a string containing all of the text from your idea file.</p>
	</blockquote>

	<blockquote>
		<p><code>File::rename( "old_file.txt", "new_file.txt" )</code> will rename <code>old_file.txt</code>.</p>
	</blockquote>

	<blockquote>
		<p><code>File::delete( "new_file.txt" )</code> will nuke the new file.</p>
	</blockquote>

	<p>These File methods are all <strong>built right into Ruby</strong>.  They are all just stored in a container called the <code>File</code> class.  So, while you can safely call kernel methods without needing to type <code>Kernel</code>, Ruby doesn&#8217;t automatically check the <code>File</code> class. You&#8217;ll need to give the full method name.</p>

<pre>
  File::open( 'idea-' + idea_name + '.txt', 'w' ) do |f|
    f &lt;&lt; idea
  end
</pre>

	<p>We pass two arguments into <code>File::open</code>.  The first is the <strong>file name to open</strong>.  The second is a string containing our <strong>file mode</strong>.  We use <code>'w'</code>, which means to write to a brand-new file.  (Other options are: <code>'r'</code> to read from the file or <code>'a'</code> to add to the end of the file.)</p>

	<p>The file is opened for writing and we are handed back the file in variable <code>f</code>, which can be seen <strong>sliding down the chute into our block</strong>.  Inside the block, we write to the file.  When the block closes with <code>end</code>, our file is closed as well.</p>

	<p>Notice we use the <strong>concatenator</strong> <code>&lt;&lt;</code> to write to the file.  We can do this because files have a method called <code>&lt;&lt;</code> just like strings do.</p>

	<h3>Settle Down, Your Ideas Aren&#8217;t Trapped</h3>

	<p>Here, let&#8217;s get your ideas back to their original verbage, so you can rumminate over their brilliance.</p>

<pre>
  require 'wordlist'

  # Print each idea out with the words fixed
  Dir['idea-*.txt'].each do |file_name|
    idea = File.read( file_name )
    code_words.each do |real, code| 
      idea.gsub!( code, real )
    end
    puts idea
  end
</pre>

	<p>By now, you should be up to snuff with most of this example.  I won&#8217;t bore you with all of the mundane details.  See if you can figure out how it works on your own.</p>

	<p>We have an interesting class method here, though.  The <code>Dir::[]</code> method searches a directory (some of you may call them &#8220;folders&#8221;).  Just as you&#8217;ve seen with Hashes, the index brackets can be class methods.  (Can you start to see the shiny, glinting gorgeousness of Ruby?)</p>

	<p>So we&#8217;re using the forklift to get those files in the directory which match <code>'idea-*.txt'</code>.  The <code>Dir::[]</code> method will use the asterisk as a wildcard.  We&#8217;re basically saying, &#8220;Match anything that starts with <em>idea-</em> and ends with <em>.txt</em>.&#8221;  The forklift shuffles off to the directory and comes back with a list of all matching files.</p>

	<p>That <strong>list of files</strong> will come in the form of <code>Array</code> the Caterpillar, with a <code>String</code> for each  file.  If you are curious and want to play with with <code>Dir::[]</code>, try this:</p>

	<blockquote>
		<p><code>p Dir['idea-*.txt']</code> will print:</p>
	</blockquote>

	<blockquote>
		<p><code>['idea-mustard-plus-codeine.txt']</code> (<em>an Array of file names!</em>)</p>
	</blockquote>

	<p>Yes, the <code>p</code> method works like <code>print</code>.  But where <code>print</code> is designed for displaying strings, <code>p</code> will print <em>anything</em>.  Check this out. </p>

	<blockquote>
		<p><code>p File::methods</code> will print:</p>
	</blockquote>

	<blockquote>
		<p><code>["send", "display", "name", "exist?", "split",</code> ... <em>a whole list of method names!</em> <code>]</code> <br />
</p>
	</blockquote>

    
    
        
        <a name="section4" />
        <h2>4. The Miracle of Blocks</h2>

        <p><img src="i/blix-2.gif" title="Flowerboyz?  Heard it before." alt="Flowerboyz?  Heard it before." /><br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Excerpt from The Scarf Eaters</h2>
        

        <p>(<em>from Chapter V: A Man in Uniform</em>.)</p>

	<p>In April, the callow lilies came back.  They stretched their baby angel wings out and reached for the world.  Gently, their tendrils caressed the sullen fence posts until even they lilted lovelier.</p>

	<p>From her bedroom window, Lara watched the lilies exude their staunch femininity. She slipped the tassels of a fresh, carpathian, embroidered scarf into her mouth and  ate slowly. The long cloth slid down her throat and tickled as it snaked along her esophagus.  She giggled and burped.</p>

	<p>Oh, how the flora drew her in.  Looking at flowers went so well with being a teenage girl.  She wanted to paint them, so she opened a new Flash template.  A blank movie this time.</p>

	<p>She set her cursor loose in the garden of her movie&#8217;s viewable area.  Vector white lines below shorter vector yellow lines.  She selected the white lines and grouped them together. She even moved them to a new layer entitled &#8220;Cry, Baby Angel, Cry.&#8221;  Then she converted them into a graphic object and moved them to the library.</p>

	<p>She felt a warm chill as she moved the long, white petals to her movie&#8217;s library.  It felt so official.  <em>I choose you.  I name you.  Dwell in the comfort of my palace forevermore.</em></p>

	<p>Heh.  She laughed.  Colorado Springs was hardly a &#8220;palace.&#8221; </p>

	<p>Since they had moved, Dad had only been home once.  He had barged through the front door in full uniform and had given quite a start to both Lara and her mother.  Her mother had even dropped a head of lettuce&#8212;which head she had just finished washing&#8212;in a pitcher of Lick-M-Aid.  </p>

	<p>The pitcher was just wide enough for the lettuce and it lodged in there pretty good. Dad came over and yanked at the moist head for sometime until declaring it <span class="caps">FUBAR</span>, in a voice both bemused and then crestfallen.  He tossed the clotted spout in the trash bin.</p>

	<p>It was only later that day that Lara&#8217;s mother realized that she could have simply halved the lettuce with an electric knife.  Dad laughed and slapped his forehead.  He then went around and slapped Lara&#8217;s forehead, and her mother&#8217;s too, affectionately.</p>

	<p>&#8220;We just weren&#8217;t thinking, were we?&#8221; is what he said.  &#8220;And who dares blame us?  We&#8217;re a real family today.  And we shouldn&#8217;t have to do anything else on the day we got our family back.&#8221; </p>

	<p>Lara&#8217;s smiled reflected across the glass of her monitor.  She chose the text tool and in 42 point serif typed: &#8220;Dad.&#8221;  She created a path for it and let it tween off the right side of the screen.  She cried long after it was gone.<br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>Since you and I are becoming closer friends as we share this time together, I should probably let you in on a bit of the history going on here.  It&#8217;s a good time for a break I say.</p>

	<p>First, you should know that Blix is my cat.  My second pet to Bigelow. Granted, we hardly see each other anymore.  He&#8217;s completely self-sufficient. I&#8217;m not exactly sure where he&#8217;s living these days, but he no longer lives in the antechamber to my quarters.  He emptied his savings account about seven months ago.</p>

	<p>He does have a set of keys for the house and the Seville.  Should he ever find himself stranded, I will gladly step away from our differences and entertain his antics around the house again.</p>

	<p>Make no mistake.  I miss having him around.  Can&#8217;t imagine he misses my company, but I miss his.</p>

	<h3>A Siren and A Prayer</h3>

	<p>I first saw Blix on television when I was a boy.  He had a starring role on a very gritty police drama called <em>A Siren and A Prayer</em>.  The show was about a god-fearing police squad that did their jobs, did them well, and saw their share of miracles out on the beat.  I mean the officers on this show were <em>great</em> guys, very religious, practically clergy.  But,  you know, even clergymen don&#8217;t have the good sense to kill a guy after he&#8217;s gone too far. These guys knew where to draw that line.  They walked that line every day.</p>

	<p>So, it was a pretty bloody show, but they always had a good moral at the end.  Most times the moral was something along the lines of, &#8220;Wow, we got out of that one quick.&#8221;  But there&#8217;s serious camaraderie in a statement like that.</p>

	<p>The show basically revolved around this one officer.  &#8220;Mad&#8221; Dick Robinson.  People called him Mad because he was basically insane.  I can&#8217;t remember if he was actually clinically insane, but people were always questioning his decisions.  Mad often blew his top and chewed out some of the other officers, most of whom had unquestionable moral character.  But we all know it&#8217;s a tough world, the stakes are high out there, and everyone who watched the show held Mad in great regard.  I think everyone on the squad grew quite a bit as people, thanks to Mad&#8217;s passion.</p>

	<p>The officers couldn&#8217;t do it all themselves though.  In every single episode, they plead with a greater force for assistance.  And, in every single episode, they got their tips from a cat named Terry (played by my cat Blix.)  He was just a kitten at the time and, as a young boy tuning into <em>A Siren and A Prayer</em>, I found myself longing for my own crime-sniffing cat. Terry took these guys down the subway tunnels, through the rotting stench of abandoned marinas, into backdoors of tall, industrial smokestacks.  </p>

	<p>Sometimes he was all over an episode, darting in and out, preparing traps and directing traffic. But other times you wouldn&#8217;t see him the whole episode.  Then you&#8217;d rewind through the whole show and look and look and look.  You&#8217;d give up.  He can&#8217;t be in that episode.  </p>

	<p>Still, you can&#8217;t bear to let it go, so you go comb through the whole episode with the jog on your remote, combing, pouring over each scene.  And there he is.  Way up behind the floodlight that was turned up too high.  The one that left Mad with permanent eye damage.  Why?  Why burn out the retinas of your own colleague, Terry?</p>

	<p>But the question never got answered because the series was cancelled.  They started to do special effects with the cat and it all fell apart.  In the last episode of the show, there is a moment where Terry is trapped at the top of a crane, about to fall into the searing slag in the furnace of an iron smelt.  He looks back.  No going back.  He looks down.  Paws over eyes (<em>no joke!</em>), he leaps from the crane and, mid-flight, snags a rope and swings to safety, coming down on a soft antelope hide that one of the workers had presumably been tanning that afternoon.</p>

	<p>People switched off the television set the very moment the scene aired.  They tried changing the name. First it was <em>God Gave Us a Squad</em>.  <em>Kiss of Pain</em>.  Then, <em>Kiss of Pain in Maine</em>, since the entire precinct ended up relocating there.  But the magic was gone.  I went back to summer school that year to make up some classes and all the kids had pretty much moved on to football pencils.</p>

	<h3>Blocks</h3>

	<p>A couple years ago, I started teaching Blix about Ruby.  When we got to this part in his lessons, the part that covers blocks, he said to me, &#8220;Blocks remind me of Mad Dick Robinson.&#8221; </p>

	<p>&#8220;Oh?&#8221;  I hadn&#8217;t heard that name in awhile.  &#8220;I can&#8217;t see how that could be.&#8221; </p>

	<p>&#8220;Well, you say blocks can be difficult to understand.&#8221; </p>

	<p>&#8220;They&#8217;re not difficult,&#8221; I said.  &#8220;A <strong>block</strong> is just <strong>code that&#8217;s grouped together</strong>.&#8221; </p>

	<p>&#8220;And Mad was just an officer, sworn to uphold his duty,&#8221; he said.  &#8220;But he was a real miracle to watch out in the field.  Now, this first example you&#8217;ve shown me&#8230;&#8221;  He pointed to an example I&#8217;d written down for him.</p>

<pre>
  kitty_toys =
    [:shape =&gt; 'sock', :fabric =&gt; 'cashmere'] +
    [:shape =&gt; 'mouse', :fabric =&gt; 'calico'] +
    [:shape =&gt; 'eggroll', :fabric =&gt; 'chenille']
  kitty_toys.sort_by { |toy| toy[:fabric] }
</pre>

	<p>&#8220;This is a small miracle,&#8221; he said. &#8220;I can&#8217;t deny its beauty.  Look, there are my kitty toys, laid out with their characteristics.  Below them, the block, sorting them by fabric.&#8221; </p>

	<p>&#8220;I apologize if your list of toys looks a bit tricky,&#8221; I said.  Like you, he had learned about the Array, the caterpillar stapled into the code, with square brackets on each side and each item separated by commas.  (Ah, here is one: <code>['sock', 'mouse', 'eggroll']</code>.)  He had also been taught the Hash, which is like a dictionary, with curly braces on each end which look like small, open books.  Commas in the Hash between each pair.  Each word in the dictionary matched up with its definition by an arrow.  (Be beholden: <code>{'blix' =&gt; 'cat', 'why' =&gt; 'human'}</code>.)</p>

	<p>&#8220;Yes, vexing,&#8221; he said.  &#8220;It has square brackets like it&#8217;s an Array, but with the arrows like it&#8217;s a Hash. I don&#8217;t think you&#8217;re going to get away with that.&#8221; </p>

	<p>&#8220;It does seem a bit subversive, doesn&#8217;t it?&#8221;  I said, tease-nudging him with a spoon.  &#8220;I&#8217;ve done your kitty toy list in a mix of the two.  I&#8217;m using a shortcut.  Which is: <strong>If you use arrows inside of an Array,  you&#8217;ll end up with a Hash inside of that Array.</strong>&#8221; </p>

	<p>&#8220;Oh, I see,&#8221; he said.  &#8220;You criss-crossed &#8216;em.  How neat!&#8221; </p>

	<p>&#8220;Yes, yes, you&#8217;re on it,&#8221; I said.  He was also very good with a protractor.  &#8220;I have three Arrays, each with a Hash inside.  Notice the plus signs?  I&#8217;m adding them into one big Array.  Here&#8217;s another way of writing it&#8230;&#8221;  I jotted down.</p>

<pre>
  kitty_toys = [
    {:shape =&gt; 'sock', :fabric =&gt; 'cashmere'},
    {:shape =&gt; 'mouse', :fabric =&gt; 'calico'},
    {:shape =&gt; 'eggroll', :fabric =&gt; 'chenille'}
  ]
</pre>

	<p>One Array, which acts as our list of chew toys.  Three Hashes in the Array to describe each toy.</p>

	<h3>Sorting and Iterating to Save Lives</h3>

	<p>&#8220;Let&#8217;s sort your toys by shape now,&#8221; I said.  &#8220;Then, we&#8217;ll print them out in that order.&#8221; </p>

<pre>
  kitty_toys.sort_by { |toy| toy[:shape] }.each do |toy|
    puts "Blixy has a #{ toy[:shape] } made of #{ toy[:fabric] }" 
  end
</pre>

	<p>&#8220;How does <code>sort_by</code> work?&#8221; asked Blix.  &#8220;I can tell it&#8217;s a method you can use with Arrays.  Because <code>kitty_toys</code> is an Array.  But what is <code>toy</code>?&#8221; </p>

	<p>&#8220;Okay, <code>toy</code> is a <strong>block argument</strong>,&#8221; I said.  &#8220;Remember: the skinny pipes on each side of <code>toy</code> make it a <strong>chute</strong>.&#8221; </p>

	<p>&#8220;Sure, but it looks like you&#8217;re using it like a Hash.  Inside the block you have <code>toy[:shape]</code>. That looks like a Hash.&#8221; </p>

	<p>&#8220;The <code>sort_by</code> method is an <strong>iterator</strong>, Blix.  It <strong>iterates</strong>, or <strong>cycles</strong>, through <strong>a list of things</strong>.  You remember that episode when Mad&#8230;&#8221; </p>

	<p>&#8220;Episode?&#8221; he said.  Yeah, he can&#8217;t understand the concept of TV dramas.   Yeah, I&#8217;ve tried explaining.</p>

	<p>&#8220;Or, yeah, remember that one <em>eyewitness account</em> we watched where Mad was trying to talk down that crazy spelling bee contestant from the ledge of an college library?&#8221; </p>

	<p>&#8220;I remember it better than you because I was riding in a remote control plane.&#8221;  Yep, it was one of those episodes.</p>

	<p>&#8220;Do you remember how Mad got the guy to come down?&#8221; I asked.</p>

	<p>&#8220;People in spelling bees love letters,&#8221; said Blix.  &#8220;So what Mad did was a genius move on his part. He started with the letter A and gave reasons, for all the letters of the alphabet, why the guy should walk back down the building and be safe on the ground.&#8221; </p>

	<p>&#8221;&#8217;A is for the Architecture of buildings like this,&#8217;&#8221; I said, in a gruff Mad voice. &#8221;&#8217;Which give us hope in a crumbling world.&#8217;&#8221; </p>

	<p>&#8221;&#8217;B is for Big Guys, like your friend Mad the Cop,&#8217;&#8221; said Blix.  &#8221;&#8217;Guys who help people all the time and don&#8217;t know how to spell too great, but still help guys who spell really great.&#8217;&#8221; </p>

	<p>&#8220;See, he went through all the letters, one at a time.  He was <em>iterating</em> through them.&#8221; <em>It Err Ate Ing.</em></p>

	<p>&#8220;But the guy jumped anyway, Why.  He jumped off on letter Q or something.&#8221; </p>

	<p>&#8221;&#8217;Q is for Quiet Moments that help us calm down and think about all of life&#8217;s little pleasures, so we don&#8217;t get all uptight and starting goofing around on tiptoes at the very edge of a big, bad building.&#8217;&#8221; </p>

	<p>&#8220;And then he jumped,&#8221; said Blix.  He shook his head.  &#8220;You can&#8217;t blame Mad.  He did his best.&#8221; </p>

	<p>&#8220;He had a big heart, that&#8217;s for sure,&#8221; I said, patting Blix on the shoulder.</p>

<pre>
  kitty_toys.sort_by { |toy| toy[:shape] }.each do |toy|
    puts "Blixy has a #{ toy[:shape] } made of #{ toy[:fabric] }" 
  end
</pre>

	<p>&#8220;As for your <code>sort_by</code>, it <strong>starts at the top</strong> of the list and <strong>goes through each item</strong>, one at a time. So <code>toy</code> is one of those items.  With each item, <code>sort_by</code> stops and <strong>slides that item down the chute</strong>, under the <code>toy</code> name, and let&#8217;s you figure out what to do with it.&#8221; </p>

	<p>&#8220;Okay, so <code>toy</code> takes turns being each of the different toys I have.&#8221; </p>

	<p>&#8220;That&#8217;s right,&#8221; I said.  &#8220;You know how I&#8217;ve really been harping on <em>using the answers that methods give you</em>?  Here, we&#8217;re simply looking up the toy&#8217;s shape inside the block.  The block then answers to <code>sort_by</code> with the shape string, such as <code>"mouse"</code> or <code>"sock"</code>.  Once it&#8217;s done cycling through the whole list, <code>sort_by</code> will have alphabetically compared each of the shape strings and will give back a new sorted Array.&#8221; </p>

	<h3> An Unfinished Lesson</h3>

	<p>&#8220;That&#8217;s good enough for today,&#8221; said Blix.  &#8220;Can I have a fresh saucer of milk, please?&#8221; </p>

	<p>I filled his saucer to the brim and he guzzled from it for some time while I took a poker and jabbed at coals in the fireplace.  My mind wandered and I couldn&#8217;t help but think further of blocks.  I wondered what I would teach Blix next.</p>

	<p>I probably would have taught him about <code>next</code>.  When you are iterating through a list, you may use <code>next</code> to <strong>skip on to the next item</strong>.  Here we&#8217;re counting toys that have a non-eggroll shape by skipping those that do with <code>next</code>.</p>

<pre>
  non_eggroll = 0
  kitty_toys.each do |toy|
    next if toy[:shape] == 'eggroll'
    non_eggroll = non_eggroll + 1
  end
</pre>

	<p>I could also have taught him about <code>break</code>, which <strong>kicks you out of an iterating loop</strong>. In the code below, we&#8217;ll print out (with <code>p</code>) each of the toy Hashes until we hit the toy whose fabric is chenille.  The <code>break</code> will cause the <code>each</code> to abruptly end.</p>

<pre>
  kitty_toys.each do |toy|
    break if toy[:fabric] == 'chenille'
    p toy
  end
</pre>

	<p>I never got to teach him such things.  I continued poking away at a particularly stubborn coal which was caught in the iron curtain of the fireplace and threatened to drop on my antelope skin rug.  </p>

	<p>As I hacked away ferociously at the black stone, Blix slipped away, presumably on the bus bound for Wixl, the very bustling metropolis of the animal economies.  Who knows, he may have first stopped in Ambrose or Riathna or any of the other villages along the way.  My instinct say that Wixl was his definitely his final stop. </p>

	<p>Without any student to instruct and coax along, I found myself quite lonely, holed up in the estate.  In the stillness of the dead corridors, I began to sketch out a biography in the  form of this guide.</p>

	<p>I worked on it whenever I found myself bored.  And when I wasn&#8217;t bored, I could always switch on <em>The Phantom Menace</em> to get me in the mood.</p>

	<p><img src="i/the.elf-7.jpg" title="Someone let them all out." alt="Someone let them all out." /><br />
</p>

    
    

    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>5.</h3>
        <h1>Them What Make the Rules and Them What Live the Dream</h1>
        <p><img src="i/chapter.poignant.guide-5.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    

        <p><img src="i/dr.cham-1.gif" title="Through space and time... in his bell jar... on a mission to find himself..." alt="Through space and time... in his bell jar... on a mission to find himself..." /></p>

	<p>Frankly, I&#8217;m sick and tired of hearing that Dr. Cham was a madman.  Yes, he tried to bury himself alive.  Yes, he electrocuted his niece.  Yes, in fact, he did dynamite a retirement home.  But this was all with good cause and, in each case, I believe he took the correct course of action.</p>

	<p>I&#8217;m sure you&#8217;d like to side with popular opinion, but you&#8217;re bound to feel some small trickle of admiration for him once he&#8217;s taken time to teach you all  about Ruby&#8217;s class definitions. And moreso when you learn about mixins.  And perhaps, by the end of the chapter, we can all start to look beyond the Doctor&#8217;s grievous past and stop calling him a madman.</p>

	<p>So if you need to call him a madman, I&#8217;d start heading down to the train tracks to smash up some long flourescent light bulbs.  Get it out of your system right now,  before we dig in.<br />
</p>

    
    
        
        <a name="section1" />
        <h2>1. This One's For the Disenfranchised</h2>

        <p><img src="i/elderly-1.gif" title="Some people still can't get past what he did." alt="Some people still can't get past what he did." /></p>

	<p>If you give me a number, which is any year from Dr. Cham&#8217;s life, I&#8217;ll give you a synopsis of that time period.  And I&#8217;ll do it as a Ruby method, so it&#8217;s an independent piece, an isolated chunk of code which can be hooked up to the voice of a robotic volcano, when such a thing becomes the apex of authoritative voice talents.</p>

	<p>Okay, so I need you to notice <code>def</code> and <code>case</code> and <code>when</code>.  You&#8217;ve seen the Ranges, the closed accordions of <code>1895..1913</code>, back in chapter 3.  They contain both ends and in between.  And the backslashes at the end of each line simply ignore the <em>Enter</em> key at the end of each line, assuring Ruby that there is <em>more of this line to come</em>.</p>

	<p>So, please: <code>def</code> and <code>case</code> and <code>when</code>.</p>

<pre>
  def dr_chams_timeline( year )
    case year
    when 1894
      "Born." 
    when 1895..1913
      "Childhood in Lousville, Winston Co., Mississippi." 
    when 1914..1919
      "Worked at a pecan nursery; punched a Quaker." 
    when 1920..1928
      "Sailed in the Brotherhood of River Wisdomming, which journeyed \
       the Mississippi River and engaged in thoughtful self-improvement, \
       where he finished 140 credit hours from their Oarniversity." 
    when 1929
      "Returned to Louisville to pen a novel about time-travelling pheasant hunters." 
    when 1930..1933
      "Took up a respectable career insuring pecan nurseries.  Financially stable, he \
       spent time in Brazil and New Mexico, buying up rare paper-shell pecan trees.  Just \
       as his notariety came to a crescendo: gosh, he tried to buried himself alive." 
    when 1934
      "Went back to writing his novel.  Changed the hunters to insurance tycoons and the \
       pheasants to Quakers." 
    when 1935..1940
      "Took Arthur Cone, the Headmaster of the Brotherhood of River Wisdomming, as a \
       houseguest.  Together for five years, engineering and inventing." 
    when 1941
      "And this is where things got interesting." 
    end
  end
</pre>

	<p>The <code>def</code> keyword.  Here is our first <strong>method definition</strong>.  A plain kernel method, which can be used anywhere in Ruby.  And how do we run it?</p>

<pre>
  puts dr_chams_timeline( 1941 )
</pre>

	<p>Which answers with &#8220;And this is where things got interesting.&#8221;  It&#8217;s the same story again and again: <em>use your answers.</em>  I&#8217;ve set things up above so that the <code>case</code> statement always answers with a string. And since the case statement is the final (and only) statement in the method, then the method answers with that string.  Trickling water spilling down from ledge to ledge.</p>

	<p>Let me be clear about the <code>case</code> statement.  Actually, I should call it a <code>case..when</code> statement, since they cannot be used separately.  The <code>case</code> keyword is followed by a value, which is compared against each of the values which follow <code>when</code> keywords.  The first value to qualify as a match is the one the case uses and the rest are ignored.  You can do the same thing with a bunch of <code>if..elsif</code> statements, but it&#8217;s wordier.</p>

<pre>
  case year
  when 1894
    "Born." 
  when 1895..1913
    "Childhood in Lousville, Winston Co., Mississippi." 
  else
    "No information about this year." 
  end
</pre>

	<p>Is identical to:</p>

<pre>
  if 1894 === year
    "Born." 
  elsif 1895..1913 === year
    "Childhood in Lousville, Winston Co., Mississippi." 
  else
    "No information about this year." 
  end
</pre>

	<p>The <strong>triple equals</strong> is a length of velvet rope, checking values much like the double equals.  It&#8217;s just: the triple equals is a longer rope and it sags a bit in the middle.  It&#8217;s not as strict, it&#8217;s a bit more flexible.</p>

	<p>Take the Ranges above.  <code>(1895..1913)</code> isn&#8217;t at all <strong>equal</strong> to <code>1905</code>.  No, the Range <code>(1895..1913)</code> is only truly <strong>equal</strong> to any other Range <code>(1895..1913)</code>.  In the case of a Range, the triple equals cuts you a break and lets the Integer <code>1905</code> in, because even though it&#8217;s not <strong>equal</strong> to the Range, it&#8217;s <strong>included</strong> in the set of Integers represented by the Range.  Which is good enough in some cases, such as the timeline I put together earlier.</p>

	<p>Which actually looked like a timeline, didn&#8217;t it?  I mean, sure, <code>dr_chams_timeline</code> method is code, but it does read like a timeline, clean and lovely.</p>

	<p><img src="i/elderly-2.gif" title="What research revealed." alt="What research revealed." /><br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Caring For You.  And Your Wellness.</h2>
        

        <p>I need you to be in a good mental state for the latter half of this book. Now is the time to begin conditioning you.</p>

	<p>Let&#8217;s start with some deep breathing.  Give me a good deep breath and count to four with me.  </p>

	<p>Here we go.  1.  2.  3.  4.   Now exhale.  You can feel your eyes.  Good, that&#8217;s exactly it.</p>

	<p>Now let&#8217;s take a deep breath and, in your mind, draw a hippopotamus as fast as you can.  Quick quick.  His legs, his folds, his marshmallow teeth.  Okay, done.  Now exhale.</p>

	<p>Take another deep breath and hold it tight.  As you hold it tightly in your chest, imagine the tightness is shrinking you down into a bug. You&#8217;ve held your breath so hard that you&#8217;re an insect.  And all the other bugs saw you shrink and they loved the stunt.  They&#8217;re clapping and rubbing their feelers together madly.   But you had an apple in your hand when you were big and it just caught up with you, crushed the whole crowd.  You&#8217;re dead, too.  Now exhale.</p>

	<p>Give me a solid deep breath and imagine you live in a town where everything is made of telephone cords.  The houses are all telephone cords, the shingles, the rafters.  The doorways are a thick mass of telephone cords which you simply thrust yourself through.  When you go to bed, the bedspread is telephone cords.  And the mattress and box springs are telephone cords, too.  Like I said, everything is made out of telephone cords.  The telephone itself is made of telephone cords.  But the telephone cord going to the telephone is made out of bread and a couple sticks.  Now exhale.</p>

	<p>Breathe in.  1.  2.  3.  4.  Breathe out.</p>

	<p>Breath in.  1.  2.  Another short breath in.  3.  4.  Imagine both of your hands snapping off at the wrists and flying into your computer screen and programming it from the inside.  Exhale.</p>

	<p>Big, big deep breath.  Deep down inside you there is a submarine. It has a tongue.  Exhale.</p>

	<p>Breathe through your nostrils.  Deep breath.  Filter the air through your nostrils.  Breathing through the nostrils gives you quality air. Your nostrils flare, you are taking breaths of nature&#8217;s air, the way God intended.  Imagine a floppy disk drive clogged up with orphans. And while it chokes on orphans, you have good, wholesome God&#8217;s  breath in your lungs.  But that pleasurable, life-giving air will become a powerful toxin if held too long.  <em>Hurry, exhale God and nature&#8217;s air!</em></p>

	<p>Now, you will wake up, smoothing out the creases of this page in your web browser.  You will have full recollection of your whole life and not forgetting any one of the many  adventures you have had in your life.  You will feel rich and renewed and expert.  You will have no remembrance of this short exercise, you will instead remember teaching a rabbit to use scissors from a great distance.</p>

	<p>And as you will wake up with your eyes directed to the top of this exercise, you will begin again.  But this time, try to imagine that even <em>your shadow</em> is a telephone cord.<br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <h3>But Was He Sick??</h3>

	<p>You know, he had such bad timing.  He was scattered as a novelist, but his ventures into alchemy were very promising.  He had an elixir of goat&#8217;s milk and sea salt that got rid of leg aches. One guy even grew an inch on a thumb he&#8217;d lost.  He had an organic health smoke that smelled like foot but gave you night vision.  He was working on something called Liquid Ladder, but I&#8217;ve never seen or read anything else about it.  It can&#8217;t have been for climbing.  Who knows.</p>

	<p>One local newspaper actually visited Dr. Cham.  Their book reviewer gave him four stars. Really.  She did an article on him.  Gave him a rating.</p>

	<p>Just know that Dr. N. Harold Cham felt terrible about his niece.  He felt the shock treatment would work.  The polio probably would have killed her anyway, but he took the chance.</p>

	<p>On Sept. 9, 1941, after sedating her with a dose of phenacetin in his private operating room, he attached the conducting clips to Hannah&#8217;s nose, tongue, toes, and elbows.  Assisted by his apprentice, a bespeckled undergraduate named Marvin Holyoake, they sprinkled the girl with the flakes of a substance the doctor called <em>opus magnum</em>.  A white powder gold which would carry the current and blatantly energize the girl, forcing her blood to bloom and fight and vanquish.</p>

	<p>But how it failed, oh, and how, when the lever was tossed, she arched and kicked&#8212;and  <strong><span class="caps">KABLAM</span>!</strong>&#8212;and <strong><span class="caps">BLOY</span>-OY-OY-KKPOY!</strong>  Ringlets of hair and a wall of light, and the  bell of death rang.  The experiment collapsed in a dire plume of smoke and her innocence (<em>for weeks, everyone started out with, &#8220;And she will never have the chance&#8230;&#8221;</em>) was a great pit in the floor and in their lungs.</p>

	<p>To Hannah, I code.</p>

<pre>
  opus_magnum = true
  def save_hannah
    success = opus_magnum
  end
</pre>

	<p>A method is its own island.  And what goes on inside is unaffected by the simple variables around it. Dr. Cham couldn&#8217;t breach the illness of his niece, no more than an <code>opus_magnum</code> variable can penetrate the steely exterior of a method.</p>

	<p>Should we run the <code>save_hannah</code> method, Ruby will squawk at us, claiming it sees no <code>opus_magnum</code>.</p>

	<p>I&#8217;m talking about <strong>scope</strong>.  Microscopes narrow and magnify your vision.  Telescopes extend the range of your vision.  In Ruby, <strong>scope</strong> refers to a field of vision inside methods and blocks.</p>

	<p>A method&#8217;s <code>def</code> statement opens its vision.  Variable names introduced there will be seen by the method and kept meaningful until its <code>end</code> closes its eyes.  You can pass data into a method by using arguments and data can be returned from the method, but the names used inside the method are only good for its scope.</p>

	<p>Some variables have wider scope.  Global variables like <code>$LOAD_PATH</code>, which start with a <strong>cash</strong> symbol, are available in any scope.  Instance variables like <code>@names</code>, which start with an <strong>at</strong> are available anywhere inside a class scope.  Same goes for class variables like <code>@@tickets</code>. Class and instance variables will be explored in a moment.</p>

	<p>Blocks have scope, but it&#8217;s a bit fuzzier.  More flexible.</p>

<pre>
  verb = 'rescued'
  ['sedated', 'powdered', 'electrocuted'].
  each do |verb|
    puts "Dr. Cham " + verb + " his niece Hannah." 
  end
  puts "Yes, Dr. Cham " + verb + " his niece Hannah." 
</pre>

	<p>The block <em>iterates</em> (spins, cycles) through each of the Doctor&#8217;s actions.  The <code>verb</code> variable changes with each pass.  In one pass, he&#8217;s sedating.  In the next, he&#8217;s powdering.  Then, he&#8217;s electrocuting.</p>

	<p>So, the question is: after the block&#8217;s over, will he have rescued Hannah?</p>

<pre>
  Dr. Cham sedated his niece Hannah.
  Dr. Cham powdered his niece Hannah.
  Dr. Cham electrocuted his niece Hannah.
  Yes, Dr. Cham electrocuted his niece Hannah.
</pre>

	<p>Blocks are allowed to see variables in the vicinity.  The block noticed that the <code>verb</code> variable existed and it overwrote its contents as it went along.  When the block completed and its tiny life  ended, the <code>verb</code> variable came out a changed creature.</p>

	<p>If a block uses a variable which hasn&#8217;t been used previously, though, then that variable vanishes at the end of the block.  The block&#8217;s <strong>scope</strong> closes and the variable goes with it.  Say that <code>verb</code> wasn&#8217;t used before the block.</p>

<pre>
  ['sedated', 'powdered', 'electrocuted'].
  each do |verb|
    puts "Dr. Cham " + verb + " his niece Hannah." 
  end
  puts "Yes, Dr. Cham " + verb + " his niece Hannah." 
</pre>

	<p>Pulls an error: <code>undefined local variable or method `verb'</code>.  Poof.</p>

	<p>It must be something difficult, even for a great scientist, to carry away the corpse of a young girl whose dress is still starched and embroidered, but whose mouth is darkly clotted purple at the corners.   In Dr. Cham&#8217;s journal, he writes that he was tormented by her ghost, which glistened gold and scorched lace.  His delusions grew and he ran from hellhounds and massive vengeful, angelic hands.</p>

	<p>Only weeks later, he was gone, propelled from these regrets, vanishing in the explosion  that lifted him from the planet.</p>

	<p>And even as you are reading this now, sometime in these moments, the bell jar craft of our lone Dr. Cham touched down upon a distant planet after a sixty year burn.   As the new world came into view, as the curvature of the planet widened,  as the bell jar whisked through the upset heavens, tearing through sheets of aurora and solar wind, Dr. Cham&#8217;s eyes were shaken open.</p>

	<p><img src="i/dr.cham-2.gif" title="Safe landing.  Amazement." alt="Safe landing.  Amazement." /></p>

	<p>What you are witnessing is the landing of Dr. Cham on the planet Endertromb.  From what I can gather, he landed during the cusp of the Desolate Season, a time when there really isn&#8217;t much happening on the planet.  Most of the inhabitants find their minds locked into a listless hum which causes them to disintegrate into just vapid ghosts of one-part-wisdom and three-parts-steam for a time.</p>

	<p>My modest grasp of the history and climate of Endertromb has been assembled from hanging around my daughter&#8217;s organ instructor, who grew up on the planet.</p>

	<p><img src="i/elderly-3.gif" title="Dead husbands could destroy the Doctor." alt="Dead husbands could destroy the Doctor." /></p>

	<p>I frequently drill my daughter&#8217;s organ instructor in order to ensure that he can keep appointments adequately.  That he can take house calls at odd hours and promptly answer emergency calls. When he finally revealed to me that he was an alien whose waking day consisted of five-hundred and forty waking hours, I was incredibly elated and opened a contractual relationship with him which will last into 2060.</p>

	<p>For three days (by his pocket watch&#8217;s account), Dr. Cham travelled the dark shafts of air, sucking the dusty wind of the barren planet. But on the third day, he found the Desolate Season ending and he awoke to a brilliant vista,  decorated with spontaneous apple blossoms and dewy castle tiers.<br />
</p>

    
    
        
        <a name="section2" />
        <h2>2. A Castle Has Its Computers</h2>

        <p><img src="i/dr.cham-3.jpg" title="The panoramic vales of Sedna on Endertromb." alt="The panoramic vales of Sedna on Endertromb." /></p>

	<p>Our intrepid Doctor set off for the alien castle, dashing through the flowers.  The ground belted past his heels.  The castle inched up the horizon.  He desired a stallion, but no stallion appeared.  And that&#8217;s how he discovered that the planet wouldn&#8217;t read his mind and answer his wishes.</p>

	<p>As my daughter&#8217;s organ instructor explained it, however, the planet <strong>could read minds</strong> and it <strong>could grant wishes</strong>.  Just not both at the same time.</p>

	<p>One day as I quizzed the organ maestro, he sketched out the following Ruby code on a pad of cheese-colored paper.  (And queer cheese smells were coming from somewhere, I can&#8217;t say where.)</p>

<pre>
  require 'endertromb'
  class WishMaker
    def initialize
      @energy = rand( 6 )
    end
    def grant( wish )
      if wish.length &gt; 10 or wish.include? ' '
        raise ArgumentError, "Bad wish." 
      end
      if @energy.zero?
        raise Exception, "No energy left." 
      end
      @energy -= 1
      Endertromb::make( wish )
    end
  end
</pre>

	<p>This is the wish maker.  </p>

	<p>Actually, no, this is a <strong>definition for a wish maker.</strong>  To Ruby, it&#8217;s a <strong>class definition</strong>. The code describes how a certain <strong>object</strong> will work.</p>

	<p>Each morning, the wish maker starts out with up to five wishes available for granting. A new <code>WishMaker</code> is created at sun up.</p>

<pre>
  todays_wishes = WishMaker.new
</pre>

	<p>The <code>new</code> method is a class method which creates a new, blank object.  It also calls the object&#8217;s <code>initialize</code> method automatically.  In the <code>WishMaker</code> definition, you&#8217;ll see the <code>initalize</code> method, which contains a single line of code: <code>@energy = rand( 6 )</code>.</p>

	<p>The <code>rand( 6 )</code> picks a number between 0 and 5.  This number will represent the number of wishes left in the day.  So, occassionally there are no wishes available from the wish maker.</p>

	<p>The random number is assigned to an <strong>instance variable</strong> which is named <code>@energy</code>. This instance variable will be available any time throughout the class.  The variable can&#8217;t be used outside the <strong>scope</strong> of the class.</p>

	<p>In chapter three, we briefly looked at instance variables and decided to respect them as <strong>attributes</strong>.  (The <strong>at symbol</strong> could mean <strong>attribute</strong>.)  Instance variables can used to store any kind of information, but they&#8217;re most often use to store bits of information about the object represented by the class.</p>

	<p>In the above case, each wish maker for the day has it&#8217;s own energy level.  If the wish maker were a machine, you might see a gauge on it that&#8217;s points to the energy left inside. The <code>@energy</code> instance variable is going to act as that gauge.</p>

<pre>
  todays_wishes = WishMaker.new
  todays_wishes.grant( "antlers" )
</pre>

	<p>Okay, step back and ensure you understand the example here.  The <code>WishMaker</code> class is an outline we&#8217;ve laid out for how the whole magic wish program works.  It&#8217;s not the <em>actual</em> genie in the bottle, it&#8217;s the paperwork behind the scenes.  It&#8217;s the rules and obligations the genie has to live by.</p>

	<p>It&#8217;s <code>todays_wishes</code> that&#8217;s the genie in the bottle.  And here we&#8217;re giving it a wish to grant. Give us antlers, genie.  (If you really get antlers from this example, I don&#8217;t want to hear about it.  Go leap in meadows with your own kind now.)</p>

	<p>In the last chapter, the drill was: Ruby has two halves.</p>

	<ol>
	<li>Defining things.</li>
		<li>Putting those things into action.</li>
	</ol>

	<p>What are the actions in Ruby?  Methods.  And now, you&#8217;re having a lick of the definition language built-in to Ruby.  Method definitions using <code>def</code>.  Class definitions using <code>class</code>.</p>

	<p>At this point in your instruction, it&#8217;s easier to understand that <strong>everything in Ruby is an object.</strong></p>

<pre>
  number = 5
  print number.next                  # prints '6'

  phrase = 'wishing for antlers'
  print phrase.length                # prints '19'

  todays_wishes = WishMaker.new
  todays_wishes.grant( "antlers" )
</pre>

	<p>And, consequently, each object has a class behind the scenes.</p>

<pre>
  print 5.class                       # prints 'Integer'
  print 'wishing for antlers'.class   # prints 'String'
  print WishMaker.new.class           # prints 'WishMaker'
</pre>

	<p>Dr. Cham never saw the wish maker as he hustled across the landspace. It lay far beyond his landing in the valley of Sedna.  Down sheer cliffs stuffed with layers of thicket, where you might toss your wish (written on a small 1&#8221; x 6&#8221; slip), down into the gaping void.  Hopefully it will land on a lizard&#8217;s back, sticking to its spindly little horn.</p>

	<p>And let&#8217;s say your wish makes it that far.  Well, then, <em>down the twisted wood</em> goes the skinny salamander, scurrying through the decaying churches which had been <strong>pushed</strong> over that steep canyon ledge once and for all.  And the expired priest inside, <em>who weathered the fall</em> as well, will kill the little amphibian&#8212;strangle it to death with a blessed gold chain&#8212;and save it for the annual <em>Getting To Know You</em> breakfast.  He&#8217;ll step on your precious little wish and, when the <strong>thieves come</strong>, that slip will still be there, stuck on his sole.  Of course, the thieves&#8217; <strong>preferred method of torture</strong> is to cut a priest in thin deli-shaved slices <em>from top to bottom</em>.  Who can cull evidence from that?  And when they chop that last thin slice of shoe sole, they&#8217;ll have that <strong>rubber scalp</strong> in hand for <em>good luck</em> and <em>good times</em>. But they <strong>canoe</strong> much too hard, these thieves.  They slap their paddles swiftly in the current to get that great <em>outboard motor mist</em> going.  But the shoe sole is <em>on a weak chain</em>, tied to one man&#8217;s belt.  And a <strong>hairy old carp</strong> <em>leaps, latches</em> on to that minute fraction of footwear.  And the thieves <em>can try</em>, but they don&#8217;t see <em>underwater</em>.  If they could, they&#8217;d see that <strong>mighty cable</strong>, packed with millions of <em>needly</em> fiber optics.  Indeed, <strong>that fish is a peripheral plugged</strong> right into the <em>core workings</em> of the planet Endertromb.  <strong>All it takes is one swallow</strong> from that fish <strong>and your wish is home free!</strong></p>

	<p>And that&#8217;s how wishes come true for children in this place.</p>

	<p>Once my daughter&#8217;s organ instructor had drawn up the class for the wish maker, he then followed with a class for the planet&#8217;s mind reader.</p>

<pre>
  require 'endertromb'
  class MindReader
    def initialize
      @minds = Endertromb::scan_for_sentience
    end
    def read
      @minds.collect do |mind|
         mind.read
      end
    end
  end
</pre>

	<p>Much as you&#8217;ve seen before, the <code>initalize</code> happens when a new <code>MindReader</code> object is created. This <code>initialize</code> gathers scans the planet for mindshare.  It looks like these minds are stored in an array, since they are later iterated over using the <code>collect</code> method.</p>

	<p>Both the wish maker and the mind reader refer to a class named <code>Endertromb</code>.  This class is stored in a file <code>endertromb.rb</code>, which is loaded with the code: <code>require 'endertromb'</code>. Often you&#8217;ll use other classes to accomplish part of your task.  Most of the latter half of this book will explore the wide variety of helpful classes that can be loaded in Ruby.</p>

	<h3>Dr. Cham Ventures Inside</h3>

	<p>But as Dr. Cham neared the castle, although the planet was aware of his thoughts, sensing his wonderment and anticipation, all Dr. Cham felt was deadness.  He tromped up the steps of its open gate and through the entrance of the most beautiful architecture and was almost certain it was deserted.</p>

	<p>For a while he knocked.  Which paid off.</p>

	<p><img src="i/castle-1.jpg" title="Blocky whale greeting." alt="Blocky whale greeting." /></p>

	<p>He watched the baby whale rise like a determined balloon.  He marvelled at his first alien introduction and felt some concern that it had passed so quickly.  Well, he would wait inside.</p>

	<p>As he stepped through the castle door, he felt fortunate that the door hadn&#8217;t been answered by  a huge eagle with greedy talons, eager to play.  Or a giant mouse head.  Or even a man-sized hurricane.   Just a tubby little choo-choo whale.</p>

	<p>&#8220;Not a place to sit down in this castle,&#8221; he said.</p>

	<p>At first, he had thought he had just entered a very dim hallway, but as his eyes adjusted, he saw the entrance extended into a tunnel.  The castle door had opened right into a passage made of  long, flat slabs of rock.  Some parts were congruous and resembled a corridor.  Other parts  narrowed, and even tilted, then finally tipped away out of view.</p>

	<p>The passage was lit by small doorless refrigerators, big enough to hold an armful of cabbage,  down by his feet.  He peered inside one, which was hollow, illuminated along all sides, and turning out ice shards methodically.</p>

	<p>He pawed the ice chips, which clung dryly to his fingertips, and he scrubbed his hands in the ice.  Which left some muddy streaks on his hands, but satisfied a small part of his longing to bathe. How long had it been?  Ten years?  Thirty?</p>

	<p>Along the passage, long tubes of cloth cluttered some sections.  Later, bright pixel matter in porcelain scoops and buckets.</p>

	<p>He happened upon a room which had been burrowed out of the tunnel which had a few empty turtle shells on the ground and a large illuminated wall.  He stared into the room, bewildered.  What could this be?  In one state of mind, he thought of having a seat on a shell.  This could be the entrace at last, some kind of receiving room.  On the other hand, spiders could pour out of the shell&#8217;s hollow when he sat.  He moved on.</p>

	<h3>Meal in a Castle&#8217;s Pocket</h3>

	<p>As he journeyed along the passageways (for the central tunnel forked and joined larger, vacuous caverns), he picked up themes in some locations.  Groups of rooms infested with pumping machinery.  Cloth and vats of glue dominated another area.  He followed voices down a plush, pillowed cavity, which led him to a dead end: a curved wall with a small room carved at eye-level.</p>

	<p>He approached the wall and, right in the cubby hole, were two aardvarks eating at a table.</p>

	<p>They gazed at him serenely, both munching on some excavated beetle twice their size, cracked  open and frozen on its back on the table.</p>

	<p>&#8220;Hello, little puppets,&#8221; he said, and they finished their bites and kept looking with their forks held aloof.</p>

	<p>&#8220;I wish my niece Hannah were here to meet you,&#8221; he told the attentive miniature aardvarks.  &#8220;She&#8217;d think you were an intricate puppet show.&#8221;  He peered in at the dining area, shelves with sets of plates, hand towels.  Half of a tiny rabbit was jutting out from the top a machine, creamy red noodles were spilling out underneath it.  A door at the back of the room hung ajar.  Dr. Cham could see a flickering room with chairs and whirring motors through the door.</p>

	<p>&#8220;Any child would want this dollhouse,&#8221; he said.  &#8220;Hannah, my niece, as I mentioned, she has a wind-up doll that sits at a spindle and spins yarn.  It&#8217;s an illusion, of course.   The doll produces no yarn at all.&#8221; </p>

	<p>One of the aardvarks opened a trapdoor in the floor and pressed a button down inside, which lit. Then, a small film projector slowly came up on a rod.  The other aardvark sat and watched Dr. Cham.</p>

	<p>&#8220;But Hannah still reaches down into the dollhouse and collects all the imaginary yarn into a bundle.  Which she takes to her mother, my sister, who is very good at humoring Hannah. She sews a dress to the doll&#8217;s dimensions, which Hannah takes back to the doll.</p>

	<p>&#8220;And she tells the doll, &#8216;Here, look, your hard work and perserverance has resulted in this beautiful dress. You can now accept the Chief of Police&#8217;s invitation to join him tonight at the Governor&#8217;s Mansion.&#8217;  And she has a doll in a policeman&#8217;s uniform who plays the part of the Chief.  He&#8217;s too scrawny to be an actual Chief, that would require quite a bit of plastic.&#8221; </p>

	<p>The aardvark responsible for the film projector loaded a reel and aimed the projector at the back wall.  The film spun to life and the aardvark took a seat.  A green square appeared on the wall.  The attentive aardvark stared at Dr. Cham still.</p>

	<p>&#8220;Your films are coloured,&#8221; said Dr. Cham.  &#8220;What a lovely, little life.&#8221; </p>

	<p>The film played on: a blue square.  Then, a red circle.  Then, an orange square.  The attentive aardvark turned away, watched the screen change to a pink triangle, and both aardvarks resumed eating.</p>

	<p>A purple star.  A red square.  With quietness settling, Dr. Cham could hear notes droning from the projector.  Like a slow, plodding music box trying to roll its gears along the train tracks.</p>

	<p>&#8220;Yes, enjoy your supper,&#8221; said Dr. Cham and he politely tipped his head away, marching back up the path he&#8217;d taken.</p>

	<h3>Another Dead End Where Things Began</h3>

	<p>He found himself lost in the castle&#8217;s tunnels.  Nothing looked familiar.  He wasn&#8217;t worried much, though.  He was on another planet.  He would be lost regardless.</p>

	<p>He wound through the tunnels, attempting to recall his paths, but far too interested in exploring to keep track of his steps.  He followed a single tunnel deep, down, down, which slanted so steeply that he had to leap across ledges and carefully watch his footholds. The gravity here seemed no different than Earth.  His legs were pulled into slides just as easily.</p>

	<p>Although he had no absolute way of knowing where he was, he felt certain that he had left the castle&#8217;s boundaries.  This deep, this long of a walk.  It had been an hour since he&#8217;d entered through the door.  And, as the tunnel wound back up, he was sure that he would emerge into a new dwelling, perhaps even a manhole which he could peek out from and see the castle.  Perhaps he shouldn&#8217;t have come so far down this route.  He hoped nothing was hibernating down here.</p>

	<p>The tunnel came to a stop.   A dark, dead end.</p>

	<p><img src="i/dr.cham-4.gif" title="At the end of the tunnels: a computer and a book." alt="At the end of the tunnels: a computer and a book." /></p>

	<p>He had time.  So he read the book.  He read of the foxes and their pursuit of the porcupine who stole their pickup truck.  He read of the elf and the ham.  He saw the pictographs of himself and found he could really relate to his own struggles.  He even learned Ruby.  He saw how it all ended.</p>

	<p>Were I him, I couldn&#8217;t have stomached it.  But he did.  And he pledged in his bosom to see things out just as they happened.</p>

	<p>On the computer monitor, Dr. Cham saw the flashing <code>irb</code> prompt.  Like Dr. Cham, you might recognize the <code>irb</code> prompt from <a href="expansion-pak-1.html">The Tiger&#8217;s Vest</a> (the first expansion pak to this book, which includes a basic introduction to Interactive Ruby.)</p>

	<p>Whereas he had just been exploring tunnels by foot, he now explored the machine&#8217;s setup with the prompt.  He set the book back where he had found it.  He didn&#8217;t need it anymore.  This was all going to happen whether he used it or not.</p>

	<p>He started with:</p>

<pre>
  irb&gt; Object::constants
    =&gt; ["Marshal", "String", "Dir", "LoadError", "Float", ... and so on ]
</pre>

	<p>This command lists all the top-level constants.  Classes are also listed as constants, so this list can be great to see what&#8217;s loaded into Ruby at any time.</p>

	<p>He scanned the list for anything unfamiliar.  Any classes which didn&#8217;t come with Ruby. <code>Marshal</code>, <code>String</code>, <code>Dir</code>, <code>LoadError</code>, <code>Float</code>.  Each of those came with Ruby.</p>

	<p>But further down the list:</p>

<pre>
  ... "Struct", "Values", "Time", "Elevator", "Range" ...
</pre>

	<p><em>Elevator?</em>  Exactly the kind of class to poke around with.  He had a go.</p>

<pre>
  irb&gt; Elevator::methods
    =&gt; ["method", "freeze", "allocate", ... another long list ... ]
  irb&gt; Elevator::class_variables
    =&gt; ['@@diagnostic_report', '@@power_circuit_active', '@@maintenance_password']
  irb&gt; Elevator::constants
    =&gt; []
</pre>

	<p>Looks like the <code>Elevator</code> class had plenty of methods.  Most of these looked like they were the same methods every object has in Ruby.  For example, <code>method</code>, <code>freeze</code> and <code>allocate</code> come with every class in Ruby.  (<code>Elevator::freeze</code> would keep the <code>Elevator</code> class from being changed.  <code>Elevator::allocate</code> would make a new <code>Elevator</code> object without calling the <code>initialize</code> method.)</p>

	<p>The <code>class_variables</code> were interesting to Dr. Cham.  This elevator appeared genuine. But no available <code>constants</code>.  This tells us there are no classes nested inside the <code>Elevator</code> class.</p>

	<p>He tried to create an <code>Elevator</code> object.</p>

<pre>
  irb&gt; e = Elevator::new
  ArgumentError: wrong number of arguments (0 for 1), requires a password
          from (irb):2:in `initialize'
          from (irb):2:in `new'
          from (irb):2
          from :0
</pre>

	<p>He tried a few passwords.</p>

<pre>
  irb&gt; e = Elevator::new( "going up" )
  AccessDeniedError: bad password
  irb&gt; e = Elevator::new( "going_up" )
  AccessDeniedError: bad password
  irb&gt; e = Elevator::new( "stairs_are_bad" )
  AccessDeniedError: bad password
  irb&gt; e = Elevator::new( "StairsAreBad" )
  AccessDeniedError: bad password
</pre>

	<p>That was useless.  <em>Oh, wait!</em>  The maintenance password.  Listed in the <code>class_variables</code>.</p>

<pre>
  irb&gt; Elevator::maintenance_password
  NoMethodError: undefined method `maintenance_password' for Elevator:Class
          from (irb):1
          from :0
</pre>

	<p>Hmm.  Instance variables are only available inside an object.  And class variables are only available inside a class.  How to get at that password?</p>

<pre>
  irb&gt; class Elevator
  irb&gt;   def Elevator.maintenance_password
  irb&gt;     @@maintenance_password
  irb&gt;   end
  irb&gt; end
    =&gt; nil
  irb&gt; Elevator::maintenance_password
    =&gt; "stairs_are_history!" 
</pre>

	<p>Alright!  He got the password.  Did you see that?</p>

	<p>He added a class method to the <code>Elevator</code> class.  Isn&#8217;t that great how you can start a new class definition for <code>Elevator</code> and Ruby just adds your changes to the existing class definition?</p>

	<p>Class methods are usually called with the <strong>double colon</strong>.  But, a period is fine as well. Since <code>Elevator</code> is a class itself, Ruby will figure that if you call <code>Elevator.maintenance_password</code>, you&#8217;re calling a class method.  The double colon simply helps make class methods obvious to the reader.</p>

	<p>And justly so.  Class methods are a bit unusual.  Normally you won&#8217;t want to store information directly inside of a class.  However, if you have a bit of information that you need to share among all objects of a class, then you have a good reason to use the class for storage. It&#8217;s understandable that the <code>@@maintenance_password</code> would be stored in the class, instead of in each separate object.  This way, the objects can simply reach up into the class and see the shared password.</p>

	<p>Here&#8217;s probably how the password protection works.</p>

<pre>
  class Elevator
    def initialize( pass )
      raise AccessDeniedError, "bad password" \
        unless pass.equals? @@maintenance_password
    end
  end
</pre>

	<p>Passwording a class like this is pointless, since anything in Ruby can be altered and  overwritten and remolded.  Dr. Cham had the password and ownership of the elevator is his.</p>

<pre>
  irb&gt; e = Elevator.new( "stairs_are_history!" )
  #&lt;Elevator:0x81f12f4 @level=4&gt;
  irb&gt; e.level = 1
</pre>

	<p>Dr. Cham was standing right there when the elevator doors, off behind the computer terminal, opened for him.  With an exasperated sense of accomplishment and a good deal of excitement surrounding all of the events that lie ahead, he stepped into the elevator and pressed 4.</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>An Evening of Unobstructed Voltage</h2>
        

        <p>I dug up this article from <em>The Consistent Reminder</em>, a Connecticut newspaper which ran the four star review of Dr. Cham.  Midgie Dare, the book reviewer who suddenly opened her critical eye to anything tangible, praised the Doctor for his manners and innovations in the very same daily edition that she defamed cantaloupe and docked Manitoba for having crackly telephone service.</p>

	<p>I got a kick out of the end of her article.  Here you go.</p>

	<blockquote>
		<p>He dismounted his horse with unquestionable care for anyone who might be in the vicinity.  Attentive of all sides, he lowered himself from the saddle gently, slowing to a pace which must be measured in micrometers per second to be appreciated.</p>
	</blockquote>

	<blockquote>
		<p>Those of us in his company found ourselves with maws agape, watching his boot touch down upon the ground.  So precise and clean a step that it seemed it would never meet the earth, only hover slight above it.  Then, before the landing had actually registered with any of us, we were off to the cuisine, whisked away in the shroud of gaiety that was always right in front of Harold Cham, always just behind him, and most especially concentrate directly in his own luminary self.</p>
	</blockquote>

	<blockquote>
		<p>He also carried loosely at his side a capitally ignorant statesman&#8217;s daughter, who spared us no leave from her constant criticisms of aetheists and railway routes.</p>
	</blockquote>

	<blockquote>
		<p>&#8220;At home, my efforts to light a candle were trounced upon by further train rumblings, which thrusted the match in my hand nearer the curtains!&#8221; She derided Dr. Cham for his waning grip on her forearm and became jealous when he was able to tune into a pleasurable woman&#8217;s voice on the radio once we returned to the residence.</p>
	</blockquote>

	<blockquote>
		<p>The dusk did settle, however, and we found ourselves in a communal daze beneath the thick particles of cotton drift that wafted through the polished piano room, quite entertained by the <em>Afternoon Nap Program</em>, which played their phonograph so quietly at the station that we could only hear the scratching of dead Napoleon&#8217;s sleeves across the bedsheets.  I felt a great shriek inside me at the thought! Still, on yonder chairs, the two lovers kept an abrupt distance between themselves and  I felt encompassed by Dr. Cham&#8217;s warm gaze and his playful tip of the sherry glass.<br />
</p>
	</blockquote>
        <h1>sidebar!</h1>
        </div>

    
    
        
        <a name="section3" />
        <h2>3. The Continued Story of My Daughter's Organ Instructor</h2>

        <p>I know you may be alarmed to hear that I have a daughter.  You think my writing is indicative of a palsied or infantile mind.  Well, please rest.  I don&#8217;t have a daughter. But I can&#8217;t let that stop me from sorting out her musical training.</p>

	<p>As I was related these elaborate histories of the planet Endertromb, I found myself wandering through hallways, running my fingertips along the tightly buttoned sofas and soaking myself in the saturated bellowings of the pipes, as played by my daughter&#8217;s organ instructor.  His notes resounded so deep and hollow in the walls of his manor that I began to casually mistake them for an ominous silence, and found it even easier to retreat into deep space with my thoughts.  To think upon the ancient planet and its darker philosophies: its flesh temples, tanned from the dermal remains of its martyrs; its whale cartels, ingesting their enemies and holding them within for decades, dragging them up and down the staircases of ribs; its poison fogs and its painful doorways; and, the atrocious dynasties of The Originals, the species which claims fathership to all of the intellegent beings across the universe.</p>

	<p>But, eventually, I&#8217;d hear those pipes of a higher octave sing and I&#8217;d be back in the very same breezy afternoon where I&#8217;d left.</p>

	<p>How interesting that even the breeze of our planet is quite a strange thing to some outsiders.  For he had also told me of the travellers from Rath-d, who ventured to Earth five centuries ago, but quickly dissipated in our air currents since they and their crafts and their armor were all composed of charcoal.</p>

	<p>I had sat at the organ, listening to his faint tales of his colony, while he punctuated his symphonies to greater volumes and the story would disappear for awhile, until the coda came back around. He spoke of he and his brothers piling into the hollow of his mother&#8217;s tail and tearing the waxy crescent tissue from the inner wall.  Juicy and spongy and syrupy soap which bleached their mouths and purged their esophagus as it went down.  They chewed and chomped the stuff and it foamed.  After they ate, they blew bubbles at each other, each bubble filled with a dense foam, which they slept upon.  And early in the morning, when mother opened her tail again, she watched serenely as her babies lay cradled in the stew of dark meatballs and sweet, sticky froth.</p>

	<p>He spelled out all the tastes of Endertromb.  Of their salmon&#8217;s starchy organs, which cooked into a pasta, and its eyes which melted into rich cream.  Of their buttermelon with tentacles. And he was just beginning to appreciate the delicacies as a child, only to be lifted from a schoolyard by a pair of upright pygmy elephants who reached at him, through the heavens, and snatched upon his collar with a vast length of crane.</p>

	<p>They transplanted him on Earth, led him from their craft, trumpeting their snouts loudly for the city of Grand Rapids to hear, then left weeping and embracing each other.</p>

	<p>&#8220;But, strangely (em-pithy-dah), I learned upon, played upon (pon-shoo) the organs on my home (oth-rea) planet,&#8221; he said.</p>

	<p>My daughter&#8217;s organ instructor speaks these extra words you see in parentheses.  Who knows if they are from his native tongue or if they are his own soundful hiccups.  He keeps another relic from Endertromb as well: he has twelve names.</p>

	<p>&#8220;No, (wen-is-wen),&#8221; he said.  &#8220;I have one name (im-apalla) which is said (iff) many-many different ways.&#8221; </p>

	<p>I call him Paij-ree in the morning and Paij-plo in the later evening. Since it is day as I write, I will call him Paij-ree here.</p>

	<h3>Mumble-Free Earplugs</h3>

	<p><img src="i/my.daughters.organ-1.gif" align="right" title="Alien at the keys." alt="Alien at the keys." /></p>

	<p>So I told Paij-ree, &#8220;Paij-ree, I am writing a book.  To teach the world Ruby.&#8221; </p>

	<p>&#8220;Oh, (pill-nog-pill-yacht) nice,&#8221; he said.  He&#8217;s known Ruby longer than I have, but still: <em>I</em> will be my daughter&#8217;s Ruby instructor.</p>

	<p>And I said, &#8220;Paij-ree, you are in the book.  And the stories of your planet.&#8221;  I talk to him like he&#8217;s E.T.  I don&#8217;t know why.  Just like how I said next, &#8220;And then maybe someday you can go home to your mom and dad!&#8221; </p>

	<p>To which he said, &#8220;(pon-shoo) (pon-shoo) (em-pithy-dah).&#8221;  Which is his way of speaking out loud his silence and awe.</p>

	<p>He wanted to see what I&#8217;d written, so I showed him this short method I&#8217;ve written for you.</p>

<pre>
  def wipe_mutterings_from( sentence )
    while sentence.include? '('
      open = sentence.index( '(' )
      close = sentence.index( ')', open )
      sentence[open..close] = '' if close
    end
  end
</pre>

	<p>&#8220;Can you see what this does, Paij-ree?  Any old Smotchkkiss can use this method to take all the incoherent babblings out of your speaking,&#8221; I said.</p>

	<p>And I fed something he said earlier into the method.</p>

<pre>
  what_he_said = "But, strangely (em-pithy-dah), 
    I learned upon, played upon (pon-shoo) the 
    organs on my home (oth-rea) planet." 
  wipe_mutterings_from( what_he_said )
  print what_he_said
</pre>

	<p>And it came out as a rather plain sentence.</p>

<pre>
  But, strangely , 
  I learned upon, played upon the
  organs on my home planet.
</pre>

	<p>&#8220;You shouldn&#8217;t use that (wary-to) while loop,&#8221; he said.  &#8220;There are lovelier, (thopt-er), gentler ways.&#8221; </p>

	<p>In the <code>wipe_mutterings_from</code> method, I&#8217;m basically searching for opening parentheses.  When I find one, I scan for a closing paren which follows it.  Once I&#8217;ve found both, I replace them and their contents with an empty string.  The <code>while</code> loop continues until all parentheses are gone. The mutterings are removed and the method ends.</p>

	<p>&#8220;Now that I look at this method,&#8221; I said.  &#8220;I see that there are some confusing aspects  and some ways I could do this better.&#8221;  Please don&#8217;t look down on me as your teacher for  writing some of this code.  I figure that it&#8217;s okay to show you some sloppy techniques  to help you work through them with me.  So let&#8217;s.</p>

	<p>Okay, <strong>Confusing Aspect No. 1</strong>: This method cleans a string.  But what if we accidentally give it a <code>File</code>?  Or a number?  What happens?  What if we run <code>wipe_mutterings_from( 1 )</code>?</p>

	<p>If we give <code>wipe_mutterings_from</code> the number 1, Ruby will print the following and exit.</p>

<pre> NoMethodError: undefined method `include?' for 1:Fixnum
        from (irb):2:in `wipe_mutterings_from'
        from (irb):8
</pre>

	<p>What you see here is a rather twisted and verbose (but at times very helpful) little fellow called the <strong>backtrace</strong>.  He&#8217;s a wound-up policeman who, at the slightest sign of trouble, immediately apprehends any and all suspects, pinning them against the wall and spelling out their rights so quickly that none can quite hear it all.  But it&#8217;s plain that there&#8217;s a problem.  And, of course, it&#8217;s all a big misunderstanding, right?</p>

	<p>When Ruby reads you these Miranda rights, listen hardest to the beginning.  The first line is often all you need.  In this first line is contained the essential message.  And in the above, the first line is telling us that there is no <code>include?</code> method for the number 1. Remember, when we were talking about the <code>reverse</code> method in the last chapter?  Back then, I said, &#8220;<strong>a lot of methods are only available with certain types of values</strong>.&#8221;  Both <code>reverse</code> and <code>include?</code> are methods which work with strings but are meaningless and unavailable for numbers.</p>

	<p>To be clear: the method tries to use to the number.  The method will start with <code>sentence</code> set to 1. Then, it hits the second line: <code>while sentence.include? '('</code>.  Numbers have no <code>include?</code> method.  Great, the backtrace has shown us where the problem is.  I didn&#8217;t expect anyone to pass in a number, so I&#8217;m using methods that don&#8217;t work with numbers.</p>

	<p><strong>See, this is just it.</strong>  Our method is its own little pocket tool, right?  It acts as its own widget independent of anything else.  To anyone out there using the <code>wipe_mutterings_from</code> method, should they accidentally pass in a number, they&#8217;ll be tossed this panic message that doesn&#8217;t make sense to them.  They&#8217;ll be asked to poke around inside the method, which really isn&#8217;t their business.  They don&#8217;t know their way around in there.</p>

	<p>Fortunately, we can throw our own errors, our own <strong>exceptions</strong>, which may make more sense to someone who inadvertantly hands the wrong object in for cleaning.</p>

<pre>
  def wipe_mutterings_from( sentence )
    unless sentence.respond_to? :include?
      raise ArgumentError, 
        "cannot wipe mutterings from a #{ sentence.class }" 
    end
    while sentence.include? '('
      open = sentence.index( '(' )
      close = sentence.index( ')', open )
      sentence[open..close] = '' if close
    end
  end
</pre>

	<p>This time, if we pass in a number (again, the number 1), we&#8217;ll get something more sensible.</p>

<pre>
  ArgumentError: cannot wipe mutterings from a Fixnum
          from (irb):3:in `wipe_mutterings_from'
          from (irb):12
</pre>

	<p>The <code>respond_to?</code> method is really nice and I plead that you never forget it&#8217;s there.  The <code>respond_to?</code> checks any object to be sure that it has a certain method.  It then gives back a <code>true</code> or <code>false</code>.  In the above case, the incoming <code>sentence</code> object is checked for an <code>include?</code> method.  If no <code>include?</code> method is found, then we raise the error.</p>

	<p>You might be wondering why I used a symbol with <code>respond_to?</code>.  I used a symbol <code>:include?</code> instead of a string <code>'include?'</code>.  Actually, either will work with <code>respond_to?</code>.</p>

	<p>Usually symbols are used when you are passing around the name of a method or any other Ruby construct. It&#8217;s more efficient, but it also catches the eye.  The <code>respond_to?</code> asks Ruby to look inside itself and see if a method is available.  We&#8217;re talking to Ruby, so the symbol helps denote that.  It&#8217;s not a big deal, Ruby just recognizes symbols quicker than strings.</p>

	<p>Now, <strong>Confusing Aspect No. 2</strong>: Have you noticed how our method changes the sentence?</p>

<pre>
  something_said = "A (gith) spaceship." 
  wipe_mutterings_from( something_said )
  print something_said
</pre>

	<p>Did you notice this?  In the first line of the above code, the <code>something_said</code> variable contains the string <code>"A (gith) spaceship."</code>.  But, after the method invocation, on the third line, we print the <code>something_said</code> variable and by then it contains the cleaned string <code>"A  spaceship."</code>.</p>

	<p>How does this work?  How does the method change the string?  Shouldn&#8217;t it make a copy of the string before changing it?</p>

	<p>Yes, absolutely, it should!  <strong>It&#8217;s bad manners to change strings like that.</strong>  We&#8217;ve used <code>gsub</code> and <code>gsub!</code> in the last chapter.  Do you remember which of those two methods is a <strong>destructive method</strong>, which changes strings directly?</p>

	<p>Either we need to call this method <code>wipe_mutterings_from!</code> (as a courtesy to all the other good folks out there that might use this method) or change the method to work on a copy of the string rather than the real thing.  Which is an easy change!  We just need to <code>dup</code> the string.</p>

<pre>
  def wipe_mutterings_from( sentence )
    unless sentence.respond_to? :include?
      raise ArgumentError, 
        "cannot wipe mutterings from a #{ sentence.class }" 
    end
    sentence = sentence.dup
    while sentence.include? '('
      open = sentence.index( '(' )
      close = sentence.index( ')', open )
      sentence[open..close] = '' if close
    end
    sentence
  end
</pre>

	<p>The <code>dup</code> method makes a copy of any object.  Look at that line we added again on its own:</p>

<pre>
  sentence = sentence.dup
</pre>

	<p>What a peculiar line of code.  How does <code>sentence</code> become a copy of <code>sentence</code>? Does it erase itself?  What happens to the original <code>sentence</code>?  Does it disappear?</p>

	<p>Remember that variables are just nicknames.  When you see <code>sentence = "A (gith) spaceship."</code>, you see Ruby creating a string and then giving that string a nickname.</p>

	<p>Likewise, when you see <code>sentence = sentence.dup</code>, you see Ruby creating a new string and then giving that string a nickname.  This is handy inside your method because now <code>sentence</code> is a nickname for a new copy of the string that you can safely use <strong>without changing the string that was passed into the method</strong>.</p>

	<p>You&#8217;ll see plenty of examples of variable names being reused.</p>

<pre>
  x = 5
  x = x + 1
  # x now equals 6

  y = "Endertromb" 
  y = y.length
  # y now equals 10

  z = :include?
  z = "a string".respond_to? z
  # y now equals true
</pre>

	<p>And, yes, sometimes objects disappear.  <strong>If you can&#8217;t get to an object through a variable, then Ruby will figure you are done with it and will get rid of it.</strong>  Periodically, Ruby sends out its <strong>garbage collector</strong> to set these objects free.  Every object is kept in your computer&#8217;s memory until the garbage collector gets rid of it.<br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>An Excerpt from The Scarf Eaters</h2>
        

        <p>(<em>from Chapter <span class="caps">VII</span>: When Push Comes to Shove&#8212;or Love</em>.)</p>

	<p>&#8220;Never say my name again!&#8221; screamed Chester, and with the same gusto, he turned back to the <strong>File > Publish Settings&#8230;</strong> dialog to further optimize his movie down to a  measley 15k.<br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>Oh, and one more thing about <code>dup</code>.  Some things can&#8217;t be dup&#8217;d.  Numbers, for instance.   Symbols (which look like <code>:death</code>) are identical when spelled the same.  Like numbers.</p>

	<p>Also, some of the special variables: <code>nil</code>, <code>true</code>, <code>false</code>.  These are things that Ruby won&#8217;t let you alter, so there&#8217;s so point making a copy anyway.  I mean, imagine if you could change <code>false</code> to be <code>true</code>.  The whole thing becomes a lie.</p>

	<p>Perhaps <strong>Confusing Aspect No. 3</strong> is a simple one.  I&#8217;m using those square brackets on the  string.  I&#8217;m treating the string like it&#8217;s an Array or Hash.  I can do that.  Because strings have a <code>[]</code> method.</p>

	<p>When used on a string, the square brackets will extract part of the string.  Again, slots for a forklift&#8217;s prongs.  The string is a long shelf and the forklift is pulling out a slab of the string.</p>

	<p>Inside the brackets, we pass the <em>index</em>.  It&#8217;s the label we&#8217;ve placed right between the prongs where the worker can see it.  When it comes to strings, we can use a variety of objects as our  index.</p>

<pre>
  str = "A string is a long shelf of letters and spaces." 
  puts str[0]       # prints 'A'
  puts str[0..-1]   # prints 'A string is a long shelf of letters and spaces.'
  puts str[1..-2]   # prints ' string is a long shelf of letters and spaces'
  puts str[1, 3]    # prints 'A s'
  puts str['shelf'] # prints 'shelf'
</pre>

	<p>Alright, the last <strong>Confusing Aspect No. 4</strong>: this method can be sent into an endless loop. You can give this method a string which will cause the method to hang and never come back. Take a look at the method.  Can you throw in a muddy stick to clog the loop?</p>

<pre>
  def wipe_mutterings_from( sentence )
    unless sentence.respond_to? :include?
      raise ArgumentError, 
        "cannot wipe mutterings from a #{ sentence.class }" 
    end
    sentence = sentence.dup
    while sentence.include? '('
      open = sentence.index( '(' )
      close = sentence.index( ')', open )
      sentence[open..close] = '' if close
    end
    sentence
  end
</pre>

	<p>Here, give the muddy stick a curve before you jam it.</p>

<pre>
  muddy_stick = "Here's a ( curve." 
  wipe_mutterings_from( muddy_stick )
</pre>

	<p>Why does the method hang?  Well, the <code>while</code> loop waits until all the open parentheses are gone before it stops looping.  And it only replaces open parentheses that have a matching closing parentheses.  So, if no closing paren is found, the open paren won&#8217;t be replaced and the <code>while</code> will never be satisfied.</p>

	<p>How would you rewrite this method?  Me, I know my way around Ruby, so I&#8217;d use a regular expression.</p>

<pre>
  def wipe_mutterings_from( sentence )
    unless sentence.respond_to? :gsub
      raise ArgumentError, 
        "cannot wipe mutterings from a #{ sentence.class }" 
    end
    sentence.gsub( /\([-\w]+\)/, '' )
  end
</pre>

	<p>Do your best to think through your loops.  It&#8217;s especially easy for <code>while</code> and <code>until</code> loops to get out of hand.  Best to use an iterator.  And we&#8217;ll get to regular expressions in time.</p>

	<p>In summary, here&#8217;s what we&#8217;ve learned about writing methods:</p>

	<ol>
	<li>Don&#8217;t be surprised if people pass unexpected objects into your methods. If you absolutely can&#8217;t use what they give you, <code>raise</code> an error.</li>
		<li>It&#8217;s poor etiquette to change objects your method is given.  Use <code>dup</code> to make a copy.  Or find a method like <code>gsub</code> that automatically makes a copy as it does its job.</li>
		<li>The square brackets can be used to lookup parts inside any <code>Array</code>, <code>Hash</code> or <code>String</code> objects, as these objects provide a <code>[]</code> method.  Also, since these objects provide a <code>[]=</code> method, the square brackets can be used in assignment (on the left-hand side of the equals sign) to change the parts of those objects.</li>
		<li>Watch for runaway loops.  Avoid <code>while</code> and <code>until</code> if you can.</li>
	</ol>

	<h3>The Mechanisms of Name-Calling</h3>

	<p><img src="i/my.daughters.organ-2.gif" align="right" title="Cat salesmen from the sky." alt="Cat salesmen from the sky." /></p>

	<p>Forthwith there is a rustling in the trees behind Paij-ree&#8217;s house and it turns out to be a man falling from the sky.  His name is Doug and he sells cats.</p>

	<p>So, just as he comes into to view, when his shadow (and the shadows of the cats tied to his foot) obscures the bird on the lawn that we&#8217;re trying to hit with a racquetball,  as he&#8217;s squeezing a wisp of helium from his big balloon, we shout, &#8220;Hello, Doug!&#8221; </p>

	<p>And he says, &#8220;Hello, Gonk-ree!  Hello, Why!&#8221; </p>

	<p>Paij-ree checks his pockets to be sure he has the dollar-twenty-seven he&#8217;ll need in order to buy the three cats he&#8217;ll need to keep the furnace stoked and the satellite dish turning.  These cats generate gobs of static once Paij-ree tosses them in the generator, where they&#8217;ll be outnumbered by the giant glass rods, which caress the cats continually&#8212;But, wait!  Did you see how the cat broker called him Gonk-ree?</p>

	<p>And he calls him Gonk-ree in the morning and Gonk-plo at night.</p>

	<p>So the suffix is definitely subject to the sunlight.  As far as I can tell, the prefix indicates the namecaller&#8217;s relationship to Paij-ree.</p>

<pre>
  class String

    # The parts of my daughter's organ
    # instructor's name.
    @@syllables = [
      { 'Paij' =&gt; 'Personal',
        'Gonk' =&gt; 'Business',
        'Blon' =&gt; 'Slave',
        'Stro' =&gt; 'Master',
        'Wert' =&gt; 'Father',
        'Onnn' =&gt; 'Mother' },
      { 'ree'  =&gt; 'AM',
        'plo'  =&gt; 'PM' }
    ]

    # A method to determine what a
    # certain name of his means.
    def name_significance
      parts = self.split( '-' )
      syllables = @@syllables.dup
      signif = parts.collect do |p|
        syllables.shift[p]
      end
      signif.join( ' ' )
    end

  end
</pre>

	<p>Now I&#8217;ve gone beyond just showing you sloppy code.  Here be a grave debauchery and a crime against nature.  A crime most languages won&#8217;t allow you to commit.  We&#8217;re changing the <code>String</code>, <strong>one of the core classes of Ruby</strong>!</p>

	<p>&#8220;I know this is a bit dangerous,&#8221; I said, when I passed this one under Paij-ree&#8217;s nose. &#8220;I hope nobody gets hurt.&#8221; </p>

	<p>&#8220;Every Smotchkkiss must taste what this (kep-yo-iko) danger does,&#8221; he said.  &#8220;Dogs and logs and swampy bogs (kul-ip), all must be tasted.&#8221;  And he took a swig of his Beagle Berry marsh drink.</p>

	<p>So what is it that I&#8217;m adding to the <code>String</code> class?  Two things: a class variable and a method.  A normal <strong>instance method</strong>.</p>

	<p>I like to look at the <strong>at</strong> symbol as a character meaning <strong>attribute</strong>.  The <strong>double at</strong> stands for <strong>attribute all</strong>.  A class variable.  All instances of a class can look at this variable and it is the same for all of them.  The <code>@@syllables</code> variable is an Array that can now be used inside the String class.</p>

	<p>The new method is <code>name_significance</code> and this new method can be used with any string.</p>

	<blockquote>
		<p><code>print "Paij-ree".name_significance</code> prints out <code>Personal AM</code>.</p>
	</blockquote>

	<p>As you can see, Paij-ree is a personal name.  A name friends use in the early hours.</p>

	<p>Make sure you see the line of code which uses <code>self</code>.  This is a special variable, a variable which represents the object whose method you are calling.  To simplify things a bit, let&#8217;s try making a method which breaks up a string on its dashes.</p>

<pre>
  class String
    def dash_split
      self.split( '-' )
    end
  end
</pre>

	<p>Again, here&#8217;s a method which can be used with any string.</p>

	<blockquote>
		<p><code>"Gonk-plo".dash_split</code> return the Array <code>['Gonk', 'plo']</code>.</p>
	</blockquote>

	<p>Using <code>self</code> marks the beginning of crossing over into many of the more advanced ideas in Ruby. This is definition language.  You&#8217;re defining a method, designing it before it gets used.  You&#8217;re preparing for the existence of an object which uses that method.  You&#8217;re saying, &#8220;When <code>dash_split</code>  gets used, there will be a string at that time which is the one we&#8217;re dash-splitting.  And <code>self</code> is a  special variable which refers to that string.&#8221; </p>

	<p>Ruby is a knockout definition language.  A succulent and brain-splitting discussion is coming your way deeper in this book.</p>

	<p>Most often you won&#8217;t need to use <code>self</code> explicitly, since you can call methods directly from inside other method definitions.</p>

<pre>
  class String
    def dash_split; split( '-' ); end
  end
</pre>

	<p>In the <code>name_significance</code> method, find the loop.  Learning about <code>Array#collect</code> is essential. Let&#8217;s look close.</p>

<pre>
  signif = parts.collect do |p|
    syllables.shift[p]
  end
</pre>

	<p>The <code>parts</code> Array contains the separated name.  <code>['Paij', 'plo']</code>, for instance.  We&#8217;re iterating through each item in that Array with <code>collect</code>.  But <code>collect</code> steps beyond what <code>each</code> does.  Like <code>each</code>, collect slides each item down the chute as a block variable.  And then, at the end of the block, <code>collect</code> <strong>keeps the answer the block gives back and adds it to a new Array</strong>.  The <code>collect</code> method is the perfect way of building a new Array which is based on the items in an existing Array.</p>

	<p>Doug has three cats for sale.  One is twelve cents, one is sixty-three cents, one is nine cents. Let&#8217;s see how much each cat would cost if we added a 20% tip.</p>

<pre>
  catsandtips = [0.12, 0.63, 0.09].collect { |catcost| catcost + ( catcost * 0.20 ) }
</pre>

	<p>I say Paij-ree&#8217;s property is a very charming section of woods when it&#8217;s not raining cats and Doug. For many days, Paij-ree and I camped in tents by the river behind his house, subsisting on smoked blackbird and whittling little sleeping indians by the dusklight.  On occassion he would loose a game of spades and I knew his mind was distracted, thinking of Endertromb.  All of this must have been stirring inside of him for sometime.  I was the first ear he&#8217;d ever had.</p>

	<p>&#8220;I just came from Ambrose,&#8221; I said.  &#8220;Sort of my own underground home, a place where elves strive to perfect animals.&#8221; </p>

	<p>He mumbled and nodded.  &#8220;You can&#8217;t be (poth-in-oin) part of (in) such things.&#8221; </p>

	<p>&#8220;You think we will fail?&#8221; </p>

	<p>&#8220;I (preep) have been there before,&#8221; he said.  And then, he spoke of the Lotteries.</p>

    
    
        
        <a name="section4" />
        <h2>4. The Goat Wants to Watch a Whole Film</h2>

        <p><img src="i/the.goat-1.gif" title="Blinky, winky, a goat... awakes..." alt="Blinky, winky, a goat... awakes..." /></p>

	<p>The elevator had opened into a green room full of shelves and file cabinets.  Reels of tape and film canisters and video tape everywhere.  Dr. Cham hadn&#8217;t a clue what most of it was.  All he saw was a big, futuristic mess.</p>

	<p>He called out again, stumbling through alleys of narrow shelves,  &#8220;Hello-o-o??  I&#8217;m looking for intellegent life!  I&#8217;m a space traveller!&#8221;  He tripped when his foot slid right into a <span class="caps">VCR</span> slot. &#8220;Any other beings I can communicate with?&#8221; </p>

	<p>Hand cupped around mouth, he yelled, &#8220;Hello-o-o?&#8221; </p>

	<p>&#8220;Crying out loud.&#8221;  The sleepy goat came tromping down the aisle.</p>

	<p><img src="i/dr.cham-5.gif" title="The goat already knows Dr. Cham." alt="The goat already knows Dr. Cham." /></p>

	<p>&#8220;I hate that book,&#8221; said the goat.  &#8220;I believe the author is disingenuous.&#8221; </p>

	<p>&#8220;Really?&#8221; asked Dr. Cham.</p>

	<p>&#8220;I&#8217;m sure it&#8217;s all true.  It&#8217;s just so heavily embellished.  I&#8217;m like:  Enough already.   I get it.  Cut it out.&#8221; </p>

	<p>&#8220;I&#8217;m not quite sure what to make of it,&#8221; said the Doctor.  &#8220;It seems like an honest effort. I actually wrote something in Ruby back there.&#8221; </p>

	<p>&#8220;It doesn&#8217;t give goats a very good name,&#8221; said the goat.</p>

	<p>&#8220;But you are the only goat in the book,&#8221; said the Doctor.</p>

	<p>&#8220;And I&#8217;m totally misquoted.&#8221; </p>

	<p><img src="i/dr.cham-6.gif" title="The mechanics behind devouring Dr. Cham." alt="The mechanics behind devouring Dr. Cham." /></p>

	<p>The goat closed his mouth and Dr. Cham held his heart.</p>

	<p>&#8220;I&#8217;m actually very literate,&#8221; said the goat.  &#8220;Albeit, more recently, I&#8217;ve switched to movies.  I love foreign films.  One of my relatives just brough back <em>Ishtar</em> from your planet.  Wow, that was excellent.&#8221; <br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        

        <pre>
   we want a tambourine!
            /
           |  we want all a tambourine!
           |      /
           \__  |
         /  o o \__/\__/\_
       /.           \ o o \____
        /'      ----/          \
 _____ /  '    / /.\\   #------/
        /     /        /     \\
              /       ///
       /so               \
            /\   \me time\\..
        /pp/  \s these pictur\\
       /es/   \don't w\ \ork out\
      ***      *** right but i
        think this time
           they did
             ooo o
              oo
             o
          o
       {o}
    ^
</pre>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>&#8220;I haven&#8217;t been to my planet in a long time.  It would be difficult to consider it my home at this stage.&#8221; </p>

	<p>&#8220;Well, Warren Beatty is delightful.  His character is basically socially crippled.  He actually tries to kill himself, but Dustin Hoffman sits in the window sill and starts crying and singing this totally hilarious heartbreak song.  I&#8217;ve got it here, you should see it.&#8221; </p>

	<p>&#8220;Can I get something to eat?&#8221; asked the Doctor.  And he still felt filthy.</p>

	<p>&#8220;How about we watch a film and you can have a buttermelon with tentacles?&#8221; said the goat.</p>

	<p>So, they worked their way back toward the goat&#8217;s projector.  Back by the freezer locker, they sat on a giant rug and broke off the appendages of frozen buttermelons.  The shell was solid, but once it cracked, rich fruit cream was in abundance.  Sweet to taste and a very pleasant scent.</p>

	<p>&#8220;First film, you&#8217;ve got to see,&#8221; said the goat.  &#8220;Locally filmed and produced.  I&#8217;m good friends with the lady who did casting.  Dated her for awhile.  Knew everyone who was going to play the different roles long before it was announced.&#8221; </p>

	<p>The goat set the projector by Dr. Cham.  &#8220;I&#8217;ve got the music on the surround sound. You can man the knob.&#8221; </p>

	<p><img src="i/filmstrip-1.gif" title="The Originals and their lonesome planet." alt="The Originals and their lonesome planet." /></p>

	<p>Dr. Cham&#8217;s mind wandered at this point in the presentation, just as the land war mounted between the two throngs of animal settlers.  The details of their wars and campaigns continued to consume the spool of transparent film that Dr. Cham was feeding through the projector.  </p>

	<p>War after war after war.  The Sieging of Elmer Lake.  The Last Stand of Newton P. Giraffe and Sons.  Dog Invasion of Little Abandoned Cloud.  No animals died in  these wars.  Most often an attack consisted of bopping another animal on the head.  And they philipped each other&#8217;s noses.  But, believe me, it was humiliating.</p>

	<p>Blasted crying shame.  Things could have worked out.</p>

	<p>&#8220;Don&#8217;t worry,&#8221; said the goat, anxious to sway Dr. Cham&#8217;s attention back to the film.  &#8220;Things <em>do</em> work out.&#8221; </p>

	<p>In Ruby, the Object is the very center of all things.  It is The Original.</p>

<pre>
  class ToastyBear &lt; Object; end
</pre>

	<p>The angle bracket indicates <strong>inheritance</strong>.  This means that the new <code>ToastyBear</code> class is a new class based on the <code>Object</code> class.  Every method that <code>Object</code> has will be available in <code>ToastyBear</code>.  Constants available in <code>Object</code> will be available in <code>ToastyBear</code>.</p>

	<p>But every object inherits from <code>Object</code>.  The code&#8230;</p>

<pre>
  class ToastyBear; end
</pre>

	<p>Is identical to&#8230;</p>

<pre>
  class ToastyBear &lt; Object; end
</pre>

	<p>Inheritance is handy.  You can create species of objects which relate to each other. Often, when you&#8217;re dissecting a problem, you&#8217;ll come across various objects which share attributes.  You can save yourself work by inheriting from classes which already solve part of that problem.</p>

	<p>You may have a <code>UnitedStatesAddress</code> class which stores the address, city, state, and zip code for someone living in the United States.  When you start storing addresses from England, you could add a <code>UnitedKingdomAddress</code> class.  If you then ensure that both addresses inherit from a parent <code>Address</code> class, you can design your mailing software to accept any kind of address.</p>

<pre>
  def mail_them_a_kit( address )
    unless address.is_a? Address
      raise ArgumentError, "No Address object found." 
    end
    print address.formatted
  end
</pre>

	<p>Also, inheritance is great if you want to overriding certain behaviours in a class. For example, perhaps you want to make your own slight variation to the <code>Array</code> class. You want to enhance the <code>join</code> method.  But if you change <code>Array#join</code> directly, you will affect other classes in Ruby that use Arrays.</p>

	<p>So you start your own class called <code>ArrayMine</code>, which is based on The Original <code>Array</code>.</p>

<pre>
  class ArrayMine &lt; Array
    # Build a string from this array, formatting each entry
    # then joining them together.
    def join( sep = $,, format = "%s" )
      collect do |item|
        sprintf( format, item )
      end.join( sep )
    end
  end
</pre>

<code>ArrayMine</code> is now a custom <code>Array</code> class with its own <code>join</code> method.  <code>Array</code> is the <strong>superclass</strong> of <code>ArrayMine</code>.  Every object has a <code>superclass</code> method where you can verify this relationship.

<pre>
  irb&gt; ArrayMine.superclass
    =&gt; Array
</pre>

	<p>Perfect.  We manage a hotel and we have an <code>Array</code> of our room sizes: <code>[3, 4, 6]</code>. Let&#8217;s turn it into a readable statement on a brochure.</p>

<pre>
  rooms = ArrayMine[3, 4, 6]
  print "We have " + rooms.join( ", ", "% bed" ) + " rooms available." 
</pre>

	<p>Which prints, &#8220;We have 3 bed, 4 bed, 6 bed rooms available.&#8221; </p>

	<p>You don&#8217;t need to be in a class definition to use inheritance.  You can use <code>Object#extend</code>, which will pull all the methods from a class into an object.</p>

<pre>
  rooms = [3, 4, 6]
  rooms.extend ArrayMine
  print "We have " + rooms.join( ", ", "% bed" ) + " rooms available." 
</pre>

	<p>Dr. Cham was looking around for a bathroom, but archival video tape was everywhere. He eventually found a place, it may have been a bathroom.  It had a metal bin. More importantly, it was dark and out of eyesight.</p>

	<p>While he&#8217;s in there, let me add that while The Originals slaughtered The Invaders to prove their rights as First Creatures, the Ruby Object doesn&#8217;t have any such dispute.  It is the absolute king Object the First.</p>

	<p>Watch.</p>

<pre>
  irb&gt; Class.superclass
    =&gt; Module
  irb&gt; Kernel.class
    =&gt; Module
  irb&gt; Module.superclass
    =&gt; Object
  irb&gt; Object.superclass
    =&gt; nil
</pre>

	<p>Even <code>Class</code> is an <code>Object</code>!  See, although classes are the definition language for objects, we still call class methods on them and treat them like objects occassionally.  It may seem like a dizzying circle, but it&#8217;s truly a very strict parentage.  And it ensures that when you alter the <code>Object</code>, you alter <strong>everything in Ruby</strong>.  Which is impossibly scary and all-powerful and cataclysmic and awesome!  <strong>Ruby does not restrict you, my sister, my brother!</strong> </p>

	<p>When Dr. Cham came out refreshed, the filmstrip was a bit behind.  But the goat hadn&#8217;t noticed, so the Doctor advanced frames until it made some sense.</p>

	<p><img src="i/filmstrip-2.gif" title="The goats that told a planet it was ugly." alt="The goats that told a planet it was ugly." /></p>

	<p>So the invaders left the planet.</p>

	<p>&#8220;This planet <em>is</em> decrepit,&#8221; said Dr. Cham.  &#8220;The castle is nice.  But inside it&#8217;s a disaster.&#8221; </p>

	<p>&#8220;The whole castle look is a projection,&#8221; said the goat.  &#8220;All the flowers and apple blossoms and the sky even.  It&#8217;s a low-resolution projection.&#8221; </p>

	<p>&#8220;Yes?  It is enchanting.&#8221; </p>

	<p>&#8220;I guess.&#8221; </p>

	<p><img src="i/filmstrip-3.gif" title="The spool ends." alt="The spool ends." /></p>

	<p>&#8220;That&#8217;s messed up!&#8221; said the goat.  &#8220;That&#8217;s not the way the film ends! There&#8217;s no blood!  What happened?  What happened?  Did you screw up the knob, idiot?&#8221; </p>

	<p>&#8220;Well, I don&#8217;t know,&#8221; said Dr. Cham.  He turned the knob reverse and forward. Tapped the lens.</p>

	<p>&#8220;Check the film!  Check the film!&#8221; </p>

	<p>Dr. Cham pulled out a length of film from the projection feed, melted and dripping from its end.</p>

	<p>&#8220;Curse that!  These projectors are quality!  I&#8217;ve never had this happen.  There&#8217;s no way.&#8221; </p>

	<p>&#8220;I don&#8217;t think it was the projector,&#8221; said Dr. Cham.  &#8220;Something flew across that screen and uttered a blistering moan.&#8221; </p>

	<p>&#8220;I don&#8217;t have any dupes of that movie,&#8221; said the goat somberly.  &#8220;And that girl.  That casting director.  I never see her anymore.&#8221; </p>

	<p>Dr. Cham stood up and looked over the dumpy aisles of magnetic carnage, searching.</p>

	<p>&#8220;Oh, hey, you should call that girl,&#8221; the goat went on. &#8220;You could talk to her, get an understanding. Tell her about me.  Don&#8217;t act like your my friend, just, you know, &#8216;Oh, that guy? Yeah, whatta maroon.&#8217;&#8221; </p>

	<p>Dr. Cham spotted the doorway and exited.</p>

	<p>The hallways were an entirely new world of mess.  In the goat&#8217;s archives, the shelves had been messy. In the hallway, shelves were completely tipped.  Sinks were falling through the ceiling.   The Doctor ventured under the debris, kicking through plywood when necessary.</p>

	<p>&#8220;You shouldn&#8217;t be out here,&#8221; said the goat.  &#8220;You&#8217;re on someone else&#8217;s property at this point. A couple of pygmy elephants own all this.  They&#8217;re nasty guys.  They&#8217;ll beat the crap outta you with their trunks.  They ball it up and just whack ya.&#8221; </p>

	<p>Dr. Cham pushed a file cabinet out of his way, which fell through a flimsy wall, then through the floor of the next room over.  And they heard it fall through several floors after that.</p>

	<p>&#8220;I&#8217;m trying to remember how it goes in the book,&#8221; said Dr. Cham, as he walked swiftly through the hall.  &#8220;That milky fog that swept across the projection.  We find that thing.&#8221;  He jiggled a door handle, broke it off.  Forged through the doorway and disappeared inside.</p>

	<p>&#8220;You really get a kick out of beating stuff up, don&#8217;t you?&#8221; said the goat.  &#8220;Walls, doors.&#8221; The goat headbutted a wall.  The wall shuddered and then laid still.</p>

	<p>Then, it was quiet.  And black.</p>

	<p>The goat stayed put in the bleak hallway, expecting Dr. Cham to flip over a few desks and emerge, ready to move on from the room he&#8217;d busted into.  But Dr. Cham didn&#8217;t return, and the goat opted to share a moment with the neglected wreckage left by his neighbors.  Not that he could see at all. He could only hear the occassional rustling of the piles of invoices and carbon copy masters and manila envelopes when he shifted his legs.</p>

	<p>The ground seemed to buckling right under the goat, as if the heaps of kipple around him were beginning to slide toward his weight.  He would be at the center of this whirlpool of elephant documentation.  Would he die of papercuts first?  Or would he suffocate under the solid burial by office supplies?</p>

	<p>A soft light, however, crept up to him.  A floating, silver fish.  No, it was a&#8212;was it scissors? The scissors grew into a shimmering cluster of intellegent bread, each slice choking on glitter. But, no, it was hands.  And an Easter hat.</p>

	<p><img src="i/hannah-1.gif" title="The goat alone in the hallway, meets an apparition." alt="The goat alone in the hallway, meets an apparition." /></p>

	<p>In another room, Dr. Cham stood under the clear glass silently.  The ceiling had abruptly gone transparent, then starlight washed over his pants and jacket.  He walked further to the room&#8217;s center in muted colors, lit as softly as an ancient manuscript in its own box at the museum.  More stars, more cotton clusters of fire, unveiled as he came across the floor. And it peeked into view soon enough, he expected it to be larger, but it wasn&#8217;t.</p>

	<p>Earth.  Like a painted egg, still fresh.  He felt long cello strings sing right up against his spine.  How could that be called Peoplemud?  Here was a vibrant and grassy lightbulb.  The one big ball that had something going for it.</p>

	<p>He thought of The Rockettes.  Actually, he missed The Rockettes.  What a bunch of great dancers.  He had yelled something to The Rockettes when he saw them.  Something very observant and flattering.</p>

	<p>Oh, yes, while The Rockettes were spinning, arm in arm, he had yelled, &#8220;Concentric circles!&#8221; Which no one else cared to observe. </p>

	<p>And this thought was enough to feed Dr. Cham&#8217;s superiority complex.  He wore a goofy smile as he retraced his footsteps.  He truthfully felt his genius coming through in such a statement.  To realize the simplicity of a circle was his.  He reflected on it all the way back to the hallway.</p>

	<p>Which I think is great.  Adore yourself when you have a second.</p>

	<p><img src="i/hannah-2.gif" title="The Doctor knows this ghost." alt="The Doctor knows this ghost." /></p>

	<p>&#8220;Oh, right,&#8221; said the goat.  &#8220;Your niece.  The niece you killed.  I&#8217;m with ya now.&#8221; </p>

	<p>For just a few moments, they all looked at each other.  Just enough time for both Dr. Cham and the goat to think: <em>Oh, yeah.  Hannah causes us a lot of trouble.  She&#8217;s already talking about maple donuts.</em></p>

	<p>&#8220;Does she start talking about maple donuts right away like that?&#8221; asked the goat.</p>

	<p>&#8220;Yes, she does,&#8221; said the Doctor.  &#8220;She brings it up to you, then she brings it up to me.  She sees a maple donut somewhere&#8212;I don&#8217;t quite remember where.&#8221; </p>

	<p>&#8220;Do I see a real maple donut?&#8221; Hannah said.  &#8220;I need a real one.&#8221; </p>

	<p>&#8220;Okay, okay,&#8221; said the goat.  &#8220;Yeah, I remember: here&#8217;s where she says that if she gets a real maple donut, she&#8217;ll become a real person again. Because her real destiny was to own a bakery and you ruined that destiny and now she&#8217;s trapped as a ghost.&#8221; </p>

	<p>&#8220;Hey, that&#8217;s the truth!&#8221; Hannah yelped.</p>

	<p>&#8220;It&#8217;s terrible that we must bear through this whole scene again,&#8221; said the Doctor.  &#8220;The donuts are immaterial.  They should be left out altogether.&#8221; </p>

	<p>&#8220;Man, I am having a <em>hard</em> time remembering all of this chapter,&#8221; said the goat.  &#8220;I don&#8217;t even remember how to get out of this hallway.  I must have read that book like thirty times.  Do we blast through a wall?   Do we scream until someone finds us?&#8221; </p>

	<p>&#8220;We get Hannah to float through walls and she finds some kind of machine,&#8221; says Dr. Cham.  &#8220;I have to write a program&#8212;it all works out somehow.&#8221; </p>

	<p>&#8220;But, you know what I&#8217;m saying?&#8221; said the goat.  &#8220;I forget all the details. Especially the earlier chapters.  I mean I can remember the ending perfectly. It&#8217;s hard to sit through all this.  The end is so much better.&#8221; </p>

	<p>Dr. Cham folded his arms and teetered on a heel.  &#8220;The porcupine.&#8221;  He smiled greedily at the goat.</p>

	<p>&#8220;Oh, totally.  The porcupine is definitely who I want to meet,&#8221; said the goat.  &#8220;I wonder what he does with all that money when the book is over.&#8221; </p>

	<p>Dr. Cham nodded respectfully.  &#8220;I&#8217;m very excited to see him wearing slippers.&#8221; </p>

	<p>&#8220;Those infernal slippers!&#8221; said the goat and he haw-hawed coarsely, a shower of saliva cascading from his jaws.</p>

	<p>Hannah&#8217;s mind rattled, waiting for this nonsense to break for a moment. She tipped her head on its side and the rattle slid along the curve of her cranium.  The little noise died away, though, as the back of her head vanished (<em>fluxed out</em> is what she called it) and then her head was   back again with its little rattle and she caught herself doing that careless moaning again.  <span class="caps">HRRRRRR</span>-RRR-OH-RRRR-RRRR.</p>

	<p>&#8220;I&#8217;m not as into the chunky bacon stuff,&#8221; said the goat.  &#8220;I don&#8217;t see what&#8217;s so great about it.&#8221; </p>

	<p>Could she speak while moaning? <span class="caps">BON</span>-BON.  With a French moan.  <span class="caps">BOHN</span>-BOHN. <span class="caps">BOHN</span>-APPE-TEET-OHHHH-RRRR.</p>

	<p>&#8220;I know she&#8217;s harmless, but that sound freaks me out.  My hair is <strong>completely</strong> on end.&#8221; </p>

	<p>&#8220;Hannah?&#8221; said Dr. Cham.  &#8220;Where are you, child?  Come do a good turn for us, my niece.&#8221; </p>

	<p>She was right near them, in and out.  And they could hear her cleaning up her voice, bright, speaking like a angel scattering stardust. Yes, the whole maple donut story came out again, and more about the bakery she would own, the muffins and rolls and baguettes.<br />
</p>

    
    
        
        <a name="section5" />
        <h2>5. The Theft of the Lottery Captain</h2>

        <p><img src="i/my.daughters.organ-3.gif" align="right" title="The piping and mixtures of the lotteries." alt="The piping and mixtures of the lotteries." /></p>

	<p>And now, Paij-ree&#8217;s stories of the Lotteries.</p>

	<p>On Endertromb, the organist&#8217;s father invented the lottery.  The idea came while he was praying to Digger Dosh.</p>

	<p>Digger Dosh is sort of like their God.  But ten times scarier.  This guy dug an infinitely deep tunnel straight through the planet and came out dead. But he&#8217;s really not dead.  He&#8217;s really just <em>one second</em> behind them.  And he eats time.</p>

	<p>It&#8217;s kind of complicated because Digger Dosh totally kills people.  But I guess if  you do what he says, it&#8217;s not so bad.  Maybe I&#8217;ll talk about it later.  It&#8217;s such a pain to talk about because it&#8217;s so scary and yet one of my friends actually believes the whole thing.  I get kind of choked up&#8212;not like I&#8217;m crying, more like I&#8217;m choking.</p>

	<p>Anyway, once while praying, three numbers came to Paij-ree&#8217;s father.</p>

	<p>He then asked his mind, &#8220;What are these numbers?&#8221; </p>

	<p>And his mind played a short video clip of him selling all kinds of numbers.  And, for years and years, travelling and selling numbers.</p>

	<p>And he asked his brain, &#8220;People will buy numbers?&#8221; </p>

	<p>And his brain said, &#8220;If they buy the right three numbers, give them a prize.&#8221; </p>

	<p>At which he imagined himself launching off a ski jump and showering people with presents.  No question: he would be an icon.</p>

	<p>So he went and did as his brain said and sold numbers.  The father&#8217;s simple lottery consisted of three unique numbers, drawn from a set of 25 numbers.</p>

<pre>
  class LotteryTicket

    NUMERIC_RANGE = 1..25

    attr_reader :picks, :purchased

    def initialize( *picks )
      if picks.length != 3
        raise ArgumentError, "three numbers must be picked" 
      elsif picks.uniq.length != 3
        raise ArgumentError, "the three picks must be different numbers" 
      elsif picks.detect { |p| not NUMERIC_RANGE === p }
        raise ArgumentError, "the three picks must be numbers between 1 and 25." 
      end
      @picks = picks
      @purchased = Time.now
    end

  end
</pre>

	<p>Yes, the <code>LotteryTicket</code> class contained the three numbers (<code>@picks</code>) and the time when the ticket was bought (<code>@purchased</code>).  The allowed range of numbers (from <strong>one</strong> to <strong>twenty-five</strong>) is kept in the constant <code>NUMERIC_RANGE</code>.  As</p>

	<p>The <code>initialize</code> method here can have any number of arguments passed in.  The <strong>asterisk</strong> in the <code>picks</code> argument means that <strong>any arguments will be passed in as an Array</strong>.  Having the arguments in an Array means that methods like <code>uniq</code> and <code>detect</code> can be used on the arguments together.</p>

	<p>This class contains two definitions: the method definition (<code>def</code>) and an attributes definition (<code>attr_reader</code>).  Both are <strong>really just method definitions</strong> though.</p>

	<p>The <code>attr_reader</code> shortcut is identical to writing this Ruby code:</p>

<pre>
  class LotteryTicket
    def picks; @picks; end
    def purchased; @purchased; end
  end
</pre>

	<p>Attributes are wrapper methods for instance variables (such as <code>@picks</code>) which can be used <strong>outside of the class itself</strong>.  Paij-ree&#8217;s father wanted to code a machine which could read the numbers and the date of purchase from the ticket.  In order to do that, those instance variables must be exposed.</p>

	<p>Let&#8217;s create a random ticket and read back the numbers:</p>

<pre>
  ticket = LotteryTicket.new( rand( 25 ) + 1,
              rand( 25 ) + 1, rand( 25 ) + 1 )
  p ticket.picks
</pre>

	<p>Running the above, I just got: <code>[23, 14, 20]</code>.  You will get an error if two of the random numbers happen to be identical.</p>

	<p>However, I can&#8217;t change the lottery ticket&#8217;s picks from outside of the class.</p>

<pre>
  ticket.picks = [2, 6, 19]
</pre>

	<p>I get an error: <code>undefined method `picks='</code>. This is because <code>attr_reader</code> only adds a <strong>reader</strong> method, not a writer method. That&#8217;s fine, though.  We don&#8217;t want the numbers or the date to change.</p>

	<p>So, the tickets are <em>objects</em>.  Instances of the <code>LotteryTicket</code> class.  Make a ticket with <code>LotteryTicket.new</code>.  Each ticket has it&#8217;s own <code>@picks</code> and it&#8217;s own <code>@purchased</code> instance variables.</p>

	<p>The lottery captain would need to draw three random numbers at the close of the lottery, so we&#8217;ll add a convenient class method for generating random tickets.</p>

<pre>
  class LotteryTicket
    def self.new_random
      new( rand( 25 ) + 1, rand( 25 ) + 1, rand( 25 ) + 1 )
    end
  end
</pre>

	<p>Oh, no.  But we have that stupid error that pops up if two of the random numbers happen to be identical.  If two numbers are the same, the <code>initialize</code> throws an <code>ArgumentError</code>.</p>

	<p>The trick is going to be restarting the method if an error happens. We can use Ruby&#8217;s <code>rescue</code> to handle the error and <code>redo</code> to start the method over.</p>

<pre>
  class LotteryTicket
    def self.new_random
      new( rand( 25 ) + 1, rand( 25 ) + 1, rand( 25 ) + 1 )
    rescue ArgumentError
      redo
    end
  end
</pre>

	<p>Better.  It may take a couple times for the numbers to fall together right, but it&#8217;ll happen.  The wait will build suspense, huh?</p>

	<p>The lottery captain kept a roster of everyone who bought tickets, along with the numbers they drew.</p>

<pre>
  clas LotteryDraw
    @@tickets = {}
    def LotteryDraw.buy( customer, *tickets )
      unless @@tickets.has_key?( customer )
        @@tickets[customer] = []
      end
      @@tickets[customer] += tickets
    end
  end
</pre>

	<p>Yal-dal-rip-sip was the first customer.</p>

<pre>
  LotteryDraw.buy 'Yal-dal-rip-sip',
      LotteryTicket.new( 12, 6, 19 ),
      LotteryTicket.new( 5, 1, 3 ),
      LotteryTicket.new( 24, 6, 8 )
</pre>

	<p>When it came time for the lottery draw, Paij-ree&#8217;s father (the lottery captain) added a bit of code to randomly select the numbers.</p>

<pre>
  class LotteryTicket
    def score( final )
      count = 0
      final.picks.each do |note|
        count +=1 if picks.include? note
      end
      count
    end
  end
</pre>

	<p>The <code>score</code> method compares a <code>LotteryTicket</code> against a random ticket, which represents the winning combination.  The random ticket is passed in through the <code>final</code> variable.  The ticket gets one point for every winning number.  The point total is returned from the <code>score</code> method.</p>

<pre>
  irb&gt; ticket = LotteryTicket.new( 2, 5, 19 )
  irb&gt; winner = LotteryTicket.new( 4, 5, 19 )
  irb&gt; ticket.score( winner )
    =&gt; 2
</pre>

	<p>You will see how brilliant Paij-ree is, in time.  His father commissioned him to finish the lottery for him, while the demand for tickets consumed the lottery captain&#8217;s daylight hours.  Can&#8217;t you just imagine young Paij-ree in his stuffy suit, snapping a rubber band at the company meetings where he proposed the final piece of the system?  Sure, when he stood up, his dad did all the talking for him, but he flipped on the projector and adjusted the focus.</p>

<pre>
  class &lt;&lt; LotteryDraw
    def play
      final = LotteryTicket.new_random
      winners = {}
      @@tickets.each do |buyer, ticket_list|
        ticket_list.each do |ticket|
          score = ticket.score( final )
          next if score.zero?
          winners[buyer] ||= []
          winners[buyer] &lt;&lt; [ ticket, score ]
        end
      end
      @@tickets.clear
      winners
    end
  end
</pre>

	<p>His father&#8217;s associates were stunned.  What was this?  (Paij-ree knew this was just another class method definition&#8212;they would all feel completely demoralized when he told them so.)  They couldn&#8217;t understand the <strong>double angle bracket</strong> up there!  Yes, it was a concatenator, but how is it in the class title?</p>

	<p><em>Infants</em>, thought Paij-ree, although he held everyone of those men in very high esteem.  He was just a kid and kids are tough as a brick&#8217;s teeth. </p>

	<p>The <code>&lt;&lt;</code> operator allows you to alter the definition of an object. Had Paij-ree simply used <code>class LotteryDraw</code>, his <code>play</code> method would be a normal instance method.  But since he used the <code>&lt;&lt;</code> operator, the <code>play</code> method will be added directly to the class, as a class method.  </p>

	<p>When you see <code>class &lt;&lt; obj</code>, believe in your heart, <em>I&#8217;m adding directly to the definition of <code>obj</code>.</em></p>

	<p>The budding organ instructor also threw in a tricky syntax worth examining. In the ninth line, a winner has been found.</p>

<pre>
  winners[buyer] ||= []
  winners[buyer] &lt;&lt; [ ticket, score ]
</pre>

	<p>The <code>||=</code> syntax is a shortcut.</p>

<pre>
  winners[buyer] = winners[buyer] || []
</pre>

	<p>The <strong>double pipe</strong> is an <strong>or</strong> logic.  Set <code>winners[buyer]</code> equal to <code>winners[buyer]</code> or, if <code>winners[buyer]</code> is nil, set it to <code>[]</code>.  This shortcut is a little strange, but if you can really plant it in your head, it&#8217;s a nice timesaver.  You&#8217;re just making sure a variable is set before using it.</p>

<pre>
  irb&gt; LotteryDraw.play.each do |winner, tickets|
  irb&gt;   puts winner + "won on " + tickets.length + " ticket(s)!" 
  irb&gt;   tickets.each do |ticket, score|
  irb&gt;     puts "\t" + ticket.picks.join( ', ' ) + ": " + score
  irb&gt;   end
  irb&gt; end

  Gram-yol won on 2 ticket(s)!
      25, 14, 33: 1
      12, 11, 29: 1
  Tarker-azain won on 1 ticket(s)!
      13, 15, 29: 2
  Bramlor-exxon won on 1 ticket(s)!
      2, 6, 14: 1
</pre>

	<p>But these salad days were not to continue for Paij-ree and his father.  His father often neglected to launder his uniform and contracted a moss disease on his shoulders.  The disease gradually stole his equilibrium and his sense of direction.</p>

	<p>His father still futilely attempted to keep the business running.  He spiraled through the city, sometimes tumbling leg-over-leg down the cobbled stone, most often slowly feeling the walls, counting bricks to the math parlours and coachmen stations, where he would thrust tickets at the bystanders, who hounded him and slapped him away with long, wet beets.  Later, Paij-ree would find him in a corner, his blood running into the city drains alongside the juices of the dark, splattered beets, which juice weaseled its way up into his veins and stung and clotted and glowed fiercely like a congested army of brake lights fighting their way through toll bridges.<br />
</p>

    
    
        
        <div class="sidebar">
        <h1>sidebar!</h1>
        
        <h2>Another Excerpt from The Scarf Eaters</h2>
        

        <p>(<em>from Chapter <span class="caps">VII</span>: Sky High</em>.)</p>

	<p>&#8220;I know you,&#8221; said Brent.  &#8220;And I know your timelines. You couldn&#8217;t have done this Flash piece.&#8221; </p>

	<p>&#8220;So, you&#8217;re saying I&#8217;m predictable?&#8221; said Deborah.  She opened her hands and the diced potatoes stumbled like little, drunk sea otters happily into the open crockpot.</p>

	<p>&#8220;You&#8217;re very linear,&#8221; said Brent.  He took up a mechanical pencil, held it straight before his eyes, gazing tightly at it before replacing it in the pencil holder on the counter.  &#8220;Do you even know how to load a scene?  How to jump frames?  This movie I saw was all over the place, Deb.&#8221; </p>

	<p>She heaped five knit scarves and a single bandana into the slow cooker and set it on high.  She closed the lid, leaving her hand resting upon it.</p>

	<p>&#8220;What is it about this movie?&#8221;  Deborah asked.  &#8220;You go to Flash sites all the time.  You played the Elf Snowball game for two seconds, it didn&#8217;t interest you.  You didn&#8217;t care for Elf Bowling games even.  And you weren&#8217;t even phased by that Hit The Penguin flash game.  Elf versus Penguin?  Don&#8217;t even ask!</p>

	<p>&#8220;Now this movie comes along and you can&#8217;t get a grip.&#8221; She walked over and siddled up next to him.  &#8220;Yo, bro, it&#8217;s me. Deborah.  What happened when you saw that movie?&#8221; </p>

	<p>&#8220;Everything,&#8221; said Brent, his eyes reflecting a million worlds. &#8220;And: nothing.  It opened with a young girl riding upon a wild boar.  She was playing harmonica.  The harmonica music washed in and out, uneasy, unsure.  But she rode naturally, as if it wasn&#8217;t anything of a big deal to ride a wild boar.  And with Flash, riding a wild boar really isn&#8217;t a big deal.&#8221; </p>

	<p>Deborah unclasped her bracelet and set it on the counter by the crockpot.</p>

	<p>&#8220;The bottom of the movie started to break up, an ink puddle formed. The boar reared up, but his legs gave way to the all the dark, sputtering ink.&#8221; </p>

	<p>&#8220;Dark clouds converged.  Hardcore music started to play.  Secret agents came out of the clouds.  <span class="caps">CIA</span> guys and stuff.  The animation simply rocked.</p>

	<p>&#8220;And then, at the very end of the movie, these words fade upon the screen.  In white, bold letters.&#8221; </p>

	<p>&#8220;Sky high,&#8221; said Deborah.</p>

	<p>&#8220;How did you know?&#8221; Brent&#8217;s lip quivered.  Could she be trusted?</p>

	<p>&#8220;There is no room left in the world,&#8221; she said.  &#8220;No room for Scarf Eaters, no room for you and I.  Here, take my hand.&#8221; <br />
</p>
        <h1>sidebar!</h1>
        </div>

    
    

        <p>Paij-ree was an enterprising young Endertromaltoek.  He hammered animal bones into long, glistening trumpets with deep holes that were plugged by corks the musicians banded to their fingers.  Sure, he only sold three of those units, but he was widely reviled as a freelance scholar, a demonic one, for he was of a poorer class and the poor only ever acquired their brilliance through satanic practice.  Of course, they were right, indeed, he did have a bargain with the dark mages, whom he kept appointments with annually, enduring torturous hot springs, bathing as they chanted spells.</p>

	<p>He adored his father, even as his father deteriorated into but a gyroscope.  He idolized the man&#8217;s work and spent his own small earnings playing the lottery.  He loved to watch the numerals, each painted upon hollow clay balls, rise in the <em>robloch</em> (which is any fluid, pond or spill that has happened to withstand the presence of ghosts), the great bankers tying them together on a silver string, reading them in order.</p>

	<p>Even today, Paij-ree paints the scenes with crude strokes of black ink on sheets of aluminum  foil.  It is very touching to see him caught up in the preciousness of his memory, but I don&#8217;t  know exactly why he does it on aluminum foil.  His drawings rip too easily.  Paij-ree himself gets mixed up and will serve you crumbcake right off of some of this art, even after it has been properly framed.  So many things about him are troubling and absurd and downright wretched.</p>

	<p>The disease spread over his father&#8217;s form and marshy weeds covered his father&#8217;s hands and face.  The moss pulled his spine up into a rigid uprightness.  So thick was the growth over his head that he appeared to wear a shrub molded into a bowler&#8217;s hat.  He also called himself by a new name&#8212;<strong>Quos</strong>&#8212;and he healed the people he touched, leaving a pile of full-blooded, greenly-cheeked villages in his wake as he travelled the townships.  Many called him The Mossiah and wept on his feet, which wet the buds and caused him to weed into the ground.  This made him momentarily angry, he harshly jogged his legs to break free and thrashed his fists wildly in the sky, bringing down a storm of lightning shards upon these pitiful.</p>

	<p>Paij-ree was apart from the spiritual odysseys of his father (in fact, thought the man dead), so he only saw the decay of the lottery without its captain present.  Here is where Paij-ree went to work, reviving the dead lottery of his family.</p>

	<h3>Gambling with Fewer Fingers</h3>

	<p>The city was crowded with people who had lost interest in the lottery.  The weather had really worn everyone down as well.  Such terrible rain flooding their cellars. The entire city was forced to move up one story.  You&#8217;d go to put the cap back on your pen and you&#8217;d ruin the pen, since the cap was already full of slosh.  Everyone was depleted, many people drowned.</p>

	<p>Paij-ree found himself wasting his days in a quadruple bunkbed, the only furniture that managed to stay above sea level.  He slept on the top bed.  The third bed up was dry as well, so he let a homeless crater gull nest upon it.  The gull didn&#8217;t need the whole bed, so Paij-ree also kept his calculators and pencils down there.</p>

	<p>At first, these were very dark times for both of them, and they insisted on remaining haggard at all times.  Paij-ree became obsessed with his fingernails, kept them long and pristine, while the rest of him deteriorated under a suit of hair.  In the company of Paij-ree, the crater gull learned his own eccentrity and plucked all the feathers on the right side of his body.  He looked like a cutaway diagram.</p>

	<p>They learned to have happier times.  Paij-ree carved a flute from the wall with his nails and played it often.  Mostly he played his relaxed ballads during the daytime.  In the evening, they pounded the wall and shook the bed frame in time to his songs.  The gull went nuts when he played a certain four notes and he looped this section repeatedly, watching the gull swoop and circle in ectasy.  Paij-ree could hardly keep his composure over the effect the little tune had and he couldn&#8217;t keep it together, fell all apart, slobbering and horse-giggling.</p>

	<p>Paij-ree called the gull <em>Eb-F-F-A</em>, after that favorite song.</p>

	<p>Friendship can be a very good catalyst for progress.  A friend can find traits in you that no one else can.  It&#8217;s like they searched your person and somehow came up with five full sets of silverware you never knew were there.  And even though that friend may not understand why you had these utensils concealed, it&#8217;s still a great feat, worth honoring.</p>

	<p>While <em>Eb-F-F-A</em> didn&#8217;t find silverware, he did find something else.  A pile of something else.  Since Paij-ree was stranded on the quadruple bed, the gull would scout around for food.  One day, he flew down upon a barrel, floating over where the toolshed had been.  <em>Eb-F-F-A</em> walked on top of the barrel, spinning it back to Paij-ree&#8217;s house and they cracked it open, revealing Paij-ree&#8217;s lost collection of duck bills.</p>

	<p>Yes, real duck bills. (<em>Eb-F-F-A</em> was esophagizing his squawks, remaining calm, sucking beads of sweat back into his forehead&#8212;ducks were not <em>of his chosen feather</em>, but still in the species.)  Paij-ree clapped gleefully, absolutely, he had intended to shingle his house with these, they could have deflected a bit of the torrent. Probably not much, nothing to cry about.</p>

	<p>And the roof glue was at the barrel&#8217;s bottom and they were two enterprising bunkmates with time to kill, so they made a raft from the previously-quacked lip shades.  And off they were to the country!  Stirring through a real mess of city and soup.  How strange it was to hit a beach and find out it was just the old dirt road passed Toffletown Junction.</p>

	<p>In the country, they sold.  It was always a long walk to the next plantation, but there would be a few buyers up in the mansion (&#8220;Welcome to The Mansion Built on Beets&#8221;, they&#8217;d say or, &#8220;The Mansion Built on Cellophane Substitutes&#8212;don&#8217;t you know how harmful real cellophane can be?&#8221;)  And one of the families wrapped up some excess jelly and ham in some cellophane for the two travellers.  And they almost died one day later because of it.</p>

	<p>Then, when the heat came and, as the first countryside lottery was at nigh, a farmer called to them from his field, as he stood by his grazing cow. Paij-ree and <em>Eb-F-F-A</em> wandered out to him, murmuring to each other as to whether they should offer him the Wind-Beaten Ticket Special or whether he might want to opt in to winning Risky Rosco&#8217;s Original Homestyle Country  Medallion.</p>

	<p>But the farmer waved them down as he approached, &#8220;No, put your calculators and probability wheels away.  It&#8217;s for my grazledon.&#8221;  He meant his cow.  The Endertromb version: twice as much flesh, twice as meaty, doesn&#8217;t produce milk, produces paper plates.  Still, it grazes.</p>

	<p>&#8220;Your grazledon (poh-kon-ic) wants a lucky ticket?&#8221; asked Paij-ree.</p>

	<p>&#8220;He saw you two and got real excited,&#8221; said the farmer.  &#8220;He doesn&#8217;t know numbers, but he understands luck a bit.  He almost got hit by a doter plane one day and, when I found him, he just gave shrug.  It was like he said, &#8216;Well, I guess that worked out okay.&#8217;&#8221; </p>

	<p>&#8220;The whole (shas-op) lottery is numer-(ig-ig)-ic,&#8221; said Paij-ree.  &#8220;Does he know (elsh) notes?  My eagle knows (losh) notes.&#8221;  Paij-ree whistled at the crater gull, who cooed back a sustained <em>D</em>.</p>

	<p>The farmer couldn&#8217;t speak to his grazledon&#8217;s tonal awareness, so Paij-ree sent the gull to find out (<em>D-D-D-A-D</em>, <em>go-teach-the-gra-zle</em>) while he hacked some notes into his calculator.</p>

<pre>
  class AnimalLottoTicket

    # A list of valid notes.
    NOTES = [:Ab, :A, :Bb, :B, :C, :Db, :D, :Eb, :E, :F, :Gb, :G]

    # Stores the three picked notes and a purchase date.
    attr_reader :picks, :purchased

    # Creates a new ticket from three chosen notes.  The three notes
    # must be unique notes.
    def initialize( note1, note2, note3 )
      if [note1, note2, note3].uniq!
        raise ArgumentError, "the three picks must be different notes" 
      elsif picks.detect { |p| not NOTES.include? p }
        raise ArgumentError, "the three picks must be notes in the chromatic scale." 
      end
      @picks = picks
      @purchased = Time.now
    end

    # Score this ticket against the final draw.
    def score( final )
      count = 0
      final.picks.each do |note|
        count +=1 if picks.include? note
      end
      count
    end

    # Constructor to create a random AnimalLottoTicket
    def self.new_random
      new( NOTES[ rand( NOTES.length ) ], NOTES[ rand( NOTES.length ) ],
           NOTES[ rand( NOTES.length ) ] )
    rescue ArgumentError
      redo
    end

  end
</pre>

	<p>No need for the animal&#8217;s tickets to behave drastically different from the traditional tickets.  The <code>AnimalLottoTicket</code> class is internally different, but exposes the same methods seen in the original <code>LotteryTicket</code> class. The <code>score</code> method is even identical to the <code>score</code> method from the old <code>LotteryTicket</code> class.</p>

	<p>Instead of using a class variable to store the musical note list, they&#8217;re stored in a constant called <code>AnimalLottoTicket::NOTES</code>.  Variables change and the note list shouldn&#8217;t change.  Constants are designed to stay the same.  You can still change the constant, but you&#8217;ll have to be tricky or Ruby will speak up.</p>

<pre>
  irb&gt; AnimalLottoTicket::NOTES = [:TOOT, :TWEET, :BLAT]
  (irb):3: warning: already initialized constant NOTES
    =&gt; [:TOOT, :TWEET, :BLAT]
</pre>

	<p>The gull came back with the grazledon, his name was Merphy, he was thrilled to play chance, he puffed his face dreamily, whistled five and six notes in series, they all held his collar, pulled him close to the calculator and let him breathe three notes, then they choked the bedosh outta him until his ticket was printed and  everything was nicely catalogued inside <code>@@tickets['merphy']</code>.  Thankyou, see ya at the draw!</p>

	<p>So, the fever of the lottery became an epidemic among the simple minds of the animals.   Paij-ree saved his costs, used the same <code>LotteryDraw</code> class he&#8217;d used in the corporate environment of the lottery from his childhood.  And soon enough, the animals were making their own music and their own maps and films.</p>

	<p>&#8220;What about The Originals?&#8221; I asked Paij-ree.  &#8220;They must have hated your animals!&#8221; </p>

	<p>But he winced sourly and pinched his forehead.  &#8220;I am an Original.  You as well. Do we (ae-o) hate any of them?&#8221; </p>

	<p>Not too long after the lottery ended, Paij-ree felt the crater gull <em>Eb-F-F-A</em> lighting upon his shoulder, which whistled an urgent and sad <em>C-Eb-D C-A-Eb</em>. These desparate notes sent an organ roll of chills straight through Paij-ree.  Had the King God of Potted Soil, Our Beloved Topiary, <strong>the Mossiah Quos</strong>, Literal Father of That Man Who Would Be My Daughter&#8217;s Organ Instructor&#8212;had he truly come to his end? How could this be?  Could the great arbors no longer nourish him and guide the moist crosswinds to him?  Or did his own spindly lichen hedge up his way and grow against his breathing?</p>

	<p><em>You never mind</em>, went the tune of the gull.  <em>He has detoriated and weakened and fallen in the lit door of your home cottage.  His tendrils needing and crying for the day to not end. For the sun to stay fixed and wide and attentive.</em></p>

	<p>Plor-ian, the house attendant, kept the pitchers coming and Quos stayed well watered until Paij-ree arrived to survey the decaying buds of soft plant and the emerging face of his father, the lottery captain.  His skin deeply pocked like an overly embroidered pillow. Great shoots springing from his sleeves now curled back with lurching thirst.</p>

	<p>Paij-ree combed back the longer stems around his father&#8217;s eyes and those coming from the corners of his mouth.  While I&#8217;d like to tell you that Paij-ree&#8217;s tears rolled down his sleeves and into the pours of his father, rejuvenating and restoring the grassy gentleman: I cannot say this.</p>

	<p>Rather, Paij-ree&#8217;s tears rolled down his sleeves and into the creaking clapboard floor, nourishing the vile weeds, energizing the dark plant matter, which literally lept through the floor at night and strangled Our Quos.  Yank, pull, crack.  And that was his skull.</p>

	<p>So Paij-ree could never be called Wert-ree or Wert-plo after that.<br />
</p>

    
    
        
        <a name="section6" />
        <h2>6. Them What Make the Rules</h2>

        <p>Hannah lept back from the wall and clenched down on her fingers.</p>

	<p>&#8220;This is the wall,&#8221; said Dr. Cham.  &#8220;The Originals are in there.  My child, can you lead us to the observation deck?&#8221; </p>

	<p>&#8220;You expect us to go up against those guys?&#8221; asked the goat.  &#8220;They&#8217;re mad as koalas.  But these koalas have lasers!&#8221; </p>

	<p>&#8220;We prevail, though,&#8221; said Dr. Cham.  &#8220;You and I know this.&#8221; </p>

	<p>&#8220;Okay, well I&#8217;m muddled on that point,&#8221; said the goat.  &#8220;Do we really win? Or could be thinking about <em>Kramer vs. Kramer</em>?  Does Dustin Hoffman win or do we win?&#8221; </p>

	<p>&#8220;No.  No.  No.  No.&#8221;  Hannah hovered and dragged her legs along the wall nervously. &#8220;There is a man with a huge face in there!&#8221; </p>

	<p>&#8220;Mr. Face,&#8221; said the Doctor.  &#8220;He is the original face.&#8221; </p>

	<p>&#8220;He didn&#8217;t see me,&#8221; said Hannah and moaned.  <span class="caps">HOMA</span>-HOMA-ALLO-ALLO.</p>

	<p>She made that hollow weeping through the crumbling mouseholes and the freezer gateways, fluxing in and out, causing the video checkpoints to hiss and the wall panels to brace themselves and fall silent.  The three passed through two levels of frayed security and emerged in the observation deck overlooking the cargo bay.</p>

	<p><img src="i/the.originals-1.jpg" title="Klon Ooper. Corwood. Mr. Face. Vonblisser.  The Originals." alt="Klon Ooper. Corwood. Mr. Face. Vonblisser.  The Originals." /></p>

	<p>&#8220;The last living among The Originals,&#8221; said Dr. Cham.  &#8220;Are you alright with this, Hannah?&#8221;  Which she didn&#8217;t hear in any way, as her eyes laid fixed on the legendary creatures.</p>

	<p>&#8220;Look at them,&#8221; said the goat.  &#8220;These guys wrote the rule books, Doctor.  We owe everything to these guys.&#8221; </p>

	<p>&#8220;What about God?&#8221; said Dr. Cham.</p>

	<p>&#8220;I don&#8217;t really know,&#8221; said the goat.  &#8220;Hannah probably knows better than any of us about that.&#8221; </p>

	<p>Hannah said nothing.  She only really knew one other ghost and that was her Post-Decease Mediator, Jamie Huft.  Who didn&#8217;t seem to have any answers for her and required questions to be submitted in writing with a self-addressed stamped envelope included.  Hannah hadn&#8217;t gotten the ball rolling on that P.O. Box yet.</p>

	<p>&#8220;We must be up in the mountains,&#8221; said the goat.  &#8220;Look out at that blackness.&#8221; </p>

	<p>&#8220;I saw another deck like this down by where we found Hannah,&#8221; said Dr. Cham.  &#8220;Down closer to your living area.  You should take time to search for it.  It&#8217;s very peaceful there. You can see Earth and the seven seas.&#8221; </p>

	<p>&#8220;The seven seas?&#8221;  The goat wondered if that was near The Rockettes.  He&#8217;d read his share of material on precision dancing and he&#8217;d seen that line of legs, mincing across the stage like a big, glitsy rototiller.</p>

	<p>Hannah stirred to life.</p>

	<p><img src="i/the.originals-2.jpg" title="Hannah panicks. Maple donuts are within reach." alt="Hannah panicks. Maple donuts are within reach." /></p>

	<p><img src="i/the.originals-3.jpg" title="They couldn't hear them, but they saw their slides." alt="They couldn't hear them, but they saw their slides." /></p>

	<p>And none of the three spoke when The Originals flicked off the slide projector and boarded a very slender rocketship and cleanly exploded through a crevice in the cargo bay roof.</p>

	<p>&#8220;Oh, boy,&#8221; said the goat.</p>

	<p>&#8220;What?&#8221; said Hannah.</p>

	<p>&#8220;You&#8217;re going to die,&#8221; said the goat.</p>

	<p>Dr. Cham looked over the controls in front of them, a long panel of padded handles and green screens.</p>

	<p>&#8220;I&#8217;m already dead.  I&#8217;m a ghost.&#8221; </p>

	<p>The goat looked down at the Doctor, who was rummaging under the control panel.  &#8220;Okay, well if your uncle isn&#8217;t going to have a talk with you, I&#8217;m going to make things very clear.  There&#8217;s a good chance these guys are going to build a bomb.  And you see how I&#8217;m fidgeting?  You see how my knees are wobbling?&#8221; </p>

	<p>&#8220;Yeah.&#8221; </p>

	<p>&#8220;Yeah, that&#8217;s how real this is, kid.  I don&#8217;t remember anything from that <em>confounded book</em> except that these guys are building a bomb that can blow up the ghost world.   Because once the ghost world&#8217;s gone, then Digger Dosh gets his one second back.   It&#8217;s a trade they&#8217;ve worked out.  Hell, it&#8217;s sick stuff, that&#8217;s all you need to know.&#8221; </p>

	<p>&#8220;But I&#8217;m dead.&#8221; </p>

	<p>&#8220;Okay, well, we&#8217;re talking, aren&#8217;t we?  You can talk, so are you dead?&#8221;  The goat shook his head. &#8220;I wish I could remember if we win or if it was Dustin Hoffman.&#8221; </p>

	<p>Hannah cried.  &#8220;Why do I have to die again?&#8221;  She wailed and her legs fell into flux and she sunk into the floor.  <span class="caps">MOH</span>-MOHHH-MAO-MAOOO.</p>

	<p>Dr. Cham had forceably yanked on a plush handle, which unlocked and slid open like a breadbox. He reached his hands inside and found a keyboard firmly bolted deep inside.</p>

	<p>&#8220;That&#8217;s it,&#8221; he said and pulled up <code>irb</code>, which appeared on a display to the left of his concealed typing.  He checked the Ruby version.</p>

<pre>
  irb&gt; RUBY_VERSION
    =&gt; "1.8.2" 
</pre>

	<p>Ruby was up-to-date.  What else could he do?  Scanning <code>constants</code> and <code>class_variables</code> was pointless. The only reason that had worked with the <code>Elevator</code> class was because someone had left <code>irb</code> running with their classes still loaded.</p>

	<p>He had just loaded this <code>irb</code>, so no special classes were available yet.  He had to find some classes. He started by loading the <code>`rbconfig`</code> file to get an idea of what Ruby&#8217;s settings were.</p>

<pre>
  irb&gt; require 'rbconfig'
    =&gt; true
  irb&gt; Config::CONFIG
    =&gt; {"abs_srcdir"=&gt;"$(ac_abs_srcdir)", "sitedir"=&gt;"bay://Ruby/lib/site_ruby", ... }
</pre>

	<p>Too much information to sort through there.  The <code>Config::CONFIG</code> constant is a Hash that contains every environment setting used to setup Ruby.  You can find the operating system name at <code>Config::CONFIG['host_os']</code>.  The directory where core Ruby libraries are stored can be found at <code>Config::CONFIG['rubylibdir']</code>.  Ruby programs can store helper files at <code>Config::CONFIG['datadir']</code>.</p>

	<p>What Dr. Cham really needed, though, was a list of all the libraries that aren&#8217;t core Ruby libraries.  Libraries which were installed by The Originals or whoever manned this console. He checked a few global variables for this information.</p>

<pre>
  irb&gt; $" 
    =&gt; ["irb.rb", "e2mmap.rb", "irb/init.rb", ... "rbconfig.rb"]
  irb&gt; $:
    =&gt; ["bay://Ruby/lib/site_ruby/1.9", "bay://Ruby/lib/site_ruby/1.9/i686-unknown",
        "bay://Ruby/lib/site_ruby", "bay://Ruby/lib/1.9", 
        "bay://Ruby/lib/1.9/i686-unknown", "."]
</pre>

	<p>Aha, good.  Dr. Cham stroked his beard and looked over his <code>irb</code> session.  The <code>$"</code> global variable contains an Array of every library which has been loaded with <code>require</code>.  Most of these libraries had been loaded by <code>irb</code>.  He had loaded <code>'rbconfig.rb'</code> earlier, though.</p>

	<p>The <code>$:</code> global variable, which can also be accessed as <code>$LOAD_PATH</code>, contains a list of all the directories which Ruby will check when you try to load a file with <code>require</code>.  When Dr. Cham ran <code>require 'rbconfig'</code>, Ruby checked each directory in order.</p>

<pre>
  bay://Ruby/lib/site_ruby/1.9/rbconfig.rb
  bay://Ruby/lib/site_ruby/1.9/i686-unknown/rbconfig.rb (*)
  bay://Ruby/lib/site_ruby/rbconfig.rb
  bay://Ruby/lib/1.9/rbconfig.rb
  bay://Ruby/lib/1.9/i686-unknown/rbconfig.rb
  ./rbconfig.rb
</pre>

	<p>The second path was where Ruby ended up finding the rbconfig.rb file.  Dr. Cham guessed that the first five paths were <strong>absolute paths</strong>.  These were paths to directories on a drive called <code>bay</code>.  Absolute paths may vary on your system.  On Windows, absolute paths will start with a drive letter.  On Linux, absolute paths start with a slash.</p>

	<p>The directory <code>"."</code> indicates a <strong>relative path</strong>.  The lone period represents the current work directory.  The directory where Dr. Cham started up <code>irb</code>.  So, after Ruby has searched all the standard places, it checks the current directory.</p>

	<p>The goat had peeked his head around Dr. Cham and was watching all these instructions transpire, as he licked his lips to keep his droll from running all over the monitors and glossy buttons.  He had been interjecting a few short cheers (along the lines of: <em>No, not that</em> or <em>Yes, yes, right</em> or <em>Okay, well, your choice</em>), but now he was fully involved, recommending code, &#8220;Try <code>require 'setup'</code> or, no, try 3 * 5@.  Make sure that basic math works.&#8221; </p>

	<p>&#8220;Of course the math works,&#8221; said Dr. Cham.  &#8220;Let me be, I need to find some useful classes.&#8221; </p>

	<p>&#8220;It&#8217;s a basic sanity test,&#8221; said the goat.  &#8220;Just try it.  Do <code>3 * 5</code> and see what comes up.&#8221; </p>

	<p>Dr. Cham caved.</p>

<pre>
  irb&gt; 3 * 5
    =&gt; 15
</pre>

	<p>&#8220;Okay, great!  We&#8217;re in business!&#8221; the goat tossed his furry face about in glee.</p>

	<p>Dr. Cham patted the goat&#8217;s head, &#8220;Well done.  We can continue.&#8221; </p>

<pre>
  irb&gt; Dir.chdir( "bay://Ruby/lib/site_ruby/1.9/" )
    =&gt; 0
  irb&gt; Dir["./*.{rb}"]
    =&gt; ['endertromb.rb', 'mindreader.rb', 'wishmaker.rb']
</pre>

	<p>Dr. Cham had use <code>chdir</code> to change the current working directory over the the first path listed in <code>$LOAD_PATH</code>.  This first path in <code>site_ruby</code> is a common place to store custom classes.</p>

	<p>Here were the three legendary classes that my daughter&#8217;s organ instructor had inscribed for me earlier in this chapter.  And, Dr. Cham, having read this selfsame chapter, recognized these three pieces of the system immediately.</p>

	<p>The <code>Endertromb</code> class which contained the mysteries of this planet&#8217;s powers.  The <code>MindReader</code> class which, upon scanning the minds of its inhabitants, read each mind&#8217;s contents.  And, finally, the crucial <code>WishMaker</code> class which powered the granting of ten-letter wishes, should the wish ever find its way to the core of Endertromb.</p>

	<p>&#8220;How about <code>4 * 56 + 9</code>?&#8221; asked the goat.  &#8220;We don&#8217;t know if it can do compound expressions.&#8221; </p>

	<p>&#8220;I&#8217;ve got the <code>MindReader</code> right here,&#8221; said Dr. Cham.  &#8220;And I have the <code>WishMaker</code> here next to it. This planet can read minds.  And this planet can make wishes.  Now, let&#8217;s see if it can do both at the same time.&#8221; <br />
</p>

    
    
        
        <a name="section7" />
        <h2>7. Them What Live the Dream</h2>

        <p>While The Originals&#8217; craft had long disappeared, Dr. Cham frantically worked away at the computer built into the control panel up in the observation deck.  Hannah had disappeared into the floor (or perhaps those little sparks along the ground were still wisps of her paranormal presence!) and the goat amicably watched Dr. Cham hack out a Ruby module.</p>

<pre>
  require 'endertromb'
  module WishScanner
    def scan_for_a_wish
      wish = self.read.detect do |thought|
        thought.index( 'wish: ' ) == 0
      end
      wish.gsub( 'wish: ', '' )
    end
  end
</pre>

	<p>&#8220;What&#8217;s your plan?&#8221; asked the goat.  &#8220;It seems like I could have solved this problem in like three lines.&#8221; </p>

	<p>&#8220;This <code>Module</code> is the new <code>WishScanner</code> technology,&#8221; he said.  &#8220;The scanner only picks up a wish if it starts with the word <code>wish</code> and a colon and a space.  That way the planet doesn&#8217;t fill up with every less-than-ten-letter word that appears in people&#8217;s heads.&#8221; </p>

	<p>&#8220;Why don&#8217;t you just use a class?&#8221; asked the goat.</p>

	<p>&#8220;Because a <code>Module</code> is simpler than a class.  It&#8217;s basically just a storage facility for methods.  It keeps a group of methods together.  You can&#8217;t create new objects from a method.&#8221; </p>

	<p>&#8220;But don&#8217;t aren&#8217;t you going to want a <code>WishScanner</code> object, so you can actually use it?&#8221; said the goat, appalled.</p>

	<p>&#8220;I&#8217;m going to mix it into the <code>MindReader</code>,&#8221; said Dr. Cham.  And he did.</p>

<pre>
  require 'mindreader'
  class MindReader
    include MindScanner
  end
</pre>

	<p>&#8220;Now, the <code>MindScanner</code> module is mixed in to the <code>MindReader</code>,&#8221; said Dr. Cham. &#8220;I can call the <code>scan_for_a_wish</code> method on any <code>MindReader</code> object.&#8221; </p>

	<p>&#8220;So, it&#8217;s a mixin,&#8221; said the goat.  &#8220;The <code>MindScanner</code> mixin.&#8221; </p>

	<p>&#8220;Yes, any module which is introduced into a class with <code>include</code> is a mixin to that class.  If you go back and look at the <code>scan_for_a_wish</code> method, you&#8217;ll see that it calls a <code>self.read</code> method.  I just have to make sure that whatever class I&#8217;m mixing <code>MindScanner</code> into has a <code>read</code> method.  Otherwise, an error will be thrown.&#8221; </p>

	<p>&#8220;That seems really wierd that the mixin requires certain methods that it doesn&#8217;t already have. It seems like it should work by itself.&#8221; </p>

	<p>Dr. Cham looked up from the keyboard at the goat.  &#8220;Well, it&#8217;s sort of like your video collection. None of your video cassettes work unless they are put in a machine that uses video cassettes. The depend on each other.  A mixin has some basic requirements, but once a class meets those requirements, you can add all this extra functionality in.&#8221; </p>

	<p>&#8220;Hey, that&#8217;s cool,&#8221; said the goat.</p>

	<p>&#8220;You read the book thirty times and you didn&#8217;t pick that up?&#8221; asked Dr. Cham.</p>

	<p>&#8220;You&#8217;re a much better teacher in person,&#8221; said the goat.  &#8220;I really didn&#8217;t think I was going to like you very much.&#8221; </p>

	<p>&#8220;I completely understand,&#8221; said the Doctor.  &#8220;This is much more real than the cartoons make it seem.&#8221; </p>

<pre>
  require 'wishmaker'
  reader = MindReader.new
  wisher = WishMaker.new
  loop do
    wish = reader.scan_for_a_wish
    if wish
      wisher.grant( wish )
    end
  end
</pre>

	<p>Irb sat and looped on the screen.  It&#8217;ll do that until you hit Control-C.  But Dr. Cham let it churn away.  Looping endlessly, scanning the mind waves for a proper wish.</p>

	<p>And Dr. Cham readied his wish.  At first, he thought immediately of a <code>stallion</code>.  To ride bareback over the vales of Sedna.  But he pulled the thought back, his wish hadn&#8217;t been formed properly. A stallion was useless in pursuing The Originals, so he closed his eyes again, bit his lip and he thought to himself: <code>wish: whale</code>.</p>

	<h3>Last Whale to Peoplemud</h3>

	<p>The blocky, sullen whale appeared down at the castle entrance, where Hannah was bashing on a rosebud with her hand.  She whacked at it with a fist, but it only stayed perfect and pleasant and crisp against the solid blue sky of Endertromb.</p>

	<p>&#8220;I&#8217;m bored,&#8221; she said to the whale.  <span class="caps">BOHR</span>-BOHR-OHRRRRRR.</p>

	<p>&#8220;Ok,&#8221; said the whale, deep and soft.  As the word slid along his massive tongue, its edges chipped off and the word slid out polished and worn in a bubble by his mouth&#8217;s corner.</p>

	<p>&#8220;I always have to die,&#8221; said the young ghost.  &#8220;People always kill me.&#8221; </p>

	<p>The whale fluttered his short fins, which hung at useless distance from the ground. So, he pushed himself toward her with his tail.  Scooting over patches of grass.</p>

	<p>&#8220;People kill, so who do they kill?&#8221; said the girl.  &#8220;Me.  They kill me every time.&#8221; </p>

	<p>The whale made it to within three meters of the girl, where he towered like a great war monument that represents enough dead soldiers to actually steal a lumbering step towards you.  And now, the whale rested his tail and, exhausted by the climb thus far, let his eyelids fall shut and became a gently puffing clay mountain, his shadow rich and doubled-up all around the hardly visible Hannah.</p>

	<p>But another shadow combined, narrow and determined.  Right behind her, the hand came on to her shoulder, and the warm ghost inside the hand touched her sleeve.</p>

	<p>&#8220;How did you get down here?&#8221; said the girl.</p>

	<p>Dr. Cham sat right alongside her and the goat walked around and stood in front.</p>

	<p>&#8220;Listen to us,&#8221; said Dr. Cham.  &#8220;We&#8217;ve got to follow this mangy pack of ne&#8217;er-do-wells to the very end, Hannah.  And to nab them, we need your faithful assistance!&#8221; </p>

	<p>&#8220;I&#8217;m scared,&#8221; cried Hannah.</p>

	<p>&#8220;You&#8217;re not scared,&#8221; said the goat.  &#8220;Come on.  You&#8217;re a terrifying little phantom child.&#8221; </p>

	<p>&#8220;Well,&#8221; she said.  &#8220;I&#8217;m a little bored.&#8221; </p>

	<p>Dr. Cham bent down on a knee, bringing his shaggy presence toward the ground, his face just inches from hers.  &#8220;If you come with us, if you can trust what we know, then we can bag this foul troupe.  Now, you say your destiny is to be a baker.  I won&#8217;t dispute that. You have every right on Earth&#8212;and Endertromb, for that matter&#8212;to become a baker. Say, if you didn&#8217;t become a baker, that would be a great tragedy.  Who&#8217;s going to take care of all those donuts if you don&#8217;t?&#8221; </p>

	<p>She shrugged.  &#8220;That&#8217;s what I&#8217;ve been saying.&#8221; </p>

	<p>&#8220;You&#8217;re right,&#8221; said the Doctor.  &#8220;You&#8217;ve been saying it from the start.&#8221;  He looked up to the sky, where the wind whistled peacefully despite its forceful piercing by The Originals&#8217; rocketship.  &#8220;If your destiny is to be a baker, then mine is to stop all this, to end the mayhem that is just beginning to boil.  And hear me, child&#8212;hear how sure and solid my voice becomes when I say this&#8212;I ended your life, I bear sole responsibility for your life as an apparition, but I will get it back.  It&#8217;s going to take more than a donut, but you will have a real childhood.  I promise you.&#8221; </p>

	<p><img src="i/whale.escape-1.jpg" title="On the wished whale... away..." alt="On the wished whale... away..." /></p>

	<p>Sure, it took a minute for the goat to cut his wish down to ten letters, but he was shortly on his way, following the same jetstreams up into the sky, up toward Dr. Cham and his ghost niece Hannah.  Up toward the villanous animal combo pak called The Originals.  Up toward The Rockettes.</p>

	<p>And Digger Dosh bludgeoned and feasted on each second they left behind them.<br />
</p>

    
    

    </div>
</div>

<br style="page-break-before: always;" />
<div class="page">
    <div class="pageTitle">
        <h3>6.</h3>
        <h1>Downtown</h1>
        <p><img src="i/chapter.poignant.guide-6.jpg" alt="[o]" /></p>
    </div>
    <div class="content">

    

        <p><img src="i/wixl-1.jpg" title="Lost in Wixl" alt="Lost in Wixl" /></p>

	<p>Coming Christmas 2004.<br />
</p>

    
    

    </div>
</div>

</div>
</body>
</html>
